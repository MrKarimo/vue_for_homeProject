const inntExpertsRating=()=>{const executeIfElementsExists=(selector,callback)=>{document.querySelectorAll(selector).forEach(elem=>{callback(elem)})}
const isJWTCookieExists=()=>{return docCookies&&docCookies.get('tproger_auth_token')!==null}
const getFormData=data=>{const formData=new FormData()
for(let key in data){formData.append(key,data[key]);}
return formData}
const outputRating=text=>{return(parseInt(text,10)/10.0).toString().replace('.',',')}
const getStorageKey=(expertId,postId)=>'expert'+expertId+'_'+postId
const showMessage=(message,success)=>{if(success){window.successNotyf?window.successNotyf(`<span class='size16px'>${message}</span>`):alert(message)}else{window.errorNotyf?window.errorNotyf(`<span class='size16px'>${message}</span>`):alert(message)}}
executeIfElementsExists('.tx-rating-button',button=>{const voted=localStorage.getItem(getStorageKey(button.dataset.expert_id,button.dataset.post_id))
if(voted===button.dataset.add_to_rating){button.classList.add('voted')}})
executeIfElementsExists('[data-role="change_rating"]',changeRatingButton=>{changeRatingButton.onclick=()=>{const requireAuthAndAcceptVote=()=>{window.onUserAuth=()=>{showMessage(`Спасибо, ${window.currentUser.name??''}! Мы учли ваше мнение`,true)
window.onUserAuth=null
changeRatingButton.click()}
window.openAuthModal()}
if(!window.currentUser){requireAuthAndAcceptVote()}else{const expertId=changeRatingButton.dataset.expert_id
const postId=changeRatingButton.dataset.post_id
const addToRating=changeRatingButton.dataset.add_to_rating
const expertBlock=document.querySelector('[data-role="expert"][data-expert_id="'+expertId+'"]')
const rating=expertBlock?parseInt(expertBlock.dataset.rating,10):0
if(!(rating<=0&&addToRating=='-1')){if(localStorage.getItem(getStorageKey(expertId,postId))===null){const buttonsBlock=changeRatingButton.closest('.tx-rating-changer')
buttonsBlock.classList.add('locked-loading')
fetch('/wp-admin/admin-ajax.php',{method:'POST',cache:'no-cache',body:getFormData({action:'tx-vote',tx_change_rating:addToRating,tx_expert_id:expertId,tx_post_id:postId,})}).then(response=>response.json()).then(data=>{if(data.success){changeRatingButton.classList.add('voted')
localStorage.setItem(getStorageKey(expertId,postId),addToRating)
executeIfElementsExists('[data-role="answer_rating"][data-expert_id="'+expertId+'"]',elem=>elem.innerText=outputRating(rating+parseInt(addToRating,10)))
if(window.approveAchieve&&postId&&postId!==-1){window.approveAchieve('Экспертное мнение',postId);}}else{switch(data.error){case 'not authorized':requireAuthAndAcceptVote()
break
case 'ip already used':showMessage('Вы уже меняли рейтинг полезности этого ответа с этого IP-адреса',false)
break
case 'invalid params':showMessage('Некорректные параметры запроса на изменение полезности ответа',false)
break}}}).catch((error)=>{console.log(error)}).finally(()=>{buttonsBlock.classList.remove('locked-loading')})}else{showMessage('Вы уже меняли рейтинг полезности этого ответа',false)}}}}})}
if(/complete|interactive|loaded/.test(document.readyState)){inntExpertsRating()}else{document.addEventListener('DOMContentLoaded',inntExpertsRating,false)};var LazyLoad=function(){"use strict";function n(){return n=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},n.apply(this,arguments)}var t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=t&&"IntersectionObserver"in window,a=t&&"classList"in document.createElement("p"),o=t&&window.devicePixelRatio>1,r={elements_selector:".lazy",container:e||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},c=function(t){return n({},r,t)},u=function(n,t){var e,i="LazyLoad::Initialized",a=new n(t);try{e=new CustomEvent(i,{detail:{instance:a}})}catch(n){(e=document.createEvent("CustomEvent")).initCustomEvent(i,!1,!1,{instance:a})}window.dispatchEvent(e)},l="src",s="srcset",d="sizes",f="poster",_="llOriginalAttrs",v="data",g="loading",b="loaded",p="applied",h="error",m="native",E="data-",I="ll-status",A=function(n,t){return n.getAttribute(E+t)},k=function(n){return A(n,I)},y=function(n,t){return function(n,t,e){var i="data-ll-status";null!==e?n.setAttribute(i,e):n.removeAttribute(i)}(n,0,t)},L=function(n){return y(n,null)},w=function(n){return null===k(n)},O=function(n){return k(n)===m},C=[g,b,p,h],x=function(n,t,e,i){n&&(void 0===i?void 0===e?n(t):n(t,e):n(t,e,i))},N=function(n,t){a?n.classList.add(t):n.className+=(n.className?" ":"")+t},M=function(n,t){a?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},z=function(n){return n.llTempImage},R=function(n,t){if(t){var e=t._observer;e&&e.unobserve(n)}},T=function(n,t){n&&(n.loadingCount+=t)},G=function(n,t){n&&(n.toLoadCount=t)},D=function(n){for(var t,e=[],i=0;t=n.children[i];i+=1)"SOURCE"===t.tagName&&e.push(t);return e},V=function(n,t){var e=n.parentNode;e&&"PICTURE"===e.tagName&&D(e).forEach(t)},F=function(n,t){D(n).forEach(t)},B=[l],J=[l,f],P=[l,s,d],S=[v],j=function(n){return!!n[_]},U=function(n){return n[_]},$=function(n){return delete n[_]},q=function(n,t){if(!j(n)){var e={};t.forEach((function(t){e[t]=n.getAttribute(t)})),n[_]=e}},H=function(n,t){if(j(n)){var e=U(n);t.forEach((function(t){!function(n,t,e){e?n.setAttribute(t,e):n.removeAttribute(t)}(n,t,e[t])}))}},K=function(n,t,e){N(n,t.class_loading),y(n,g),e&&(T(e,1),x(t.callback_loading,n,e))},Q=function(n,t,e){e&&n.setAttribute(t,e)},W=function(n,t){Q(n,d,A(n,t.data_sizes)),Q(n,s,A(n,t.data_srcset)),Q(n,l,A(n,t.data_src))},X={IMG:function(n,t){V(n,(function(n){q(n,P),W(n,t)})),q(n,P),W(n,t)},IFRAME:function(n,t){q(n,B),Q(n,l,A(n,t.data_src))},VIDEO:function(n,t){F(n,(function(n){q(n,B),Q(n,l,A(n,t.data_src))})),q(n,J),Q(n,f,A(n,t.data_poster)),Q(n,l,A(n,t.data_src)),n.load()},OBJECT:function(n,t){q(n,S),Q(n,v,A(n,t.data_src))}},Y=["IMG","IFRAME","VIDEO","OBJECT"],Z=function(n,t){!t||function(n){return n.loadingCount>0}(t)||function(n){return n.toLoadCount>0}(t)||x(n.callback_finish,t)},nn=function(n,t,e){n.addEventListener(t,e),n.llEvLisnrs[t]=e},tn=function(n,t,e){n.removeEventListener(t,e)},en=function(n){return!!n.llEvLisnrs},an=function(n){if(en(n)){var t=n.llEvLisnrs;for(var e in t){var i=t[e];tn(n,e,i)}delete n.llEvLisnrs}},on=function(n,t,e){!function(n){delete n.llTempImage}(n),T(e,-1),function(n){n&&(n.toLoadCount-=1)}(e),M(n,t.class_loading),t.unobserve_completed&&R(n,e)},rn=function(n,t,e){var i=z(n)||n;en(i)||function(n,t,e){en(n)||(n.llEvLisnrs={});var i="VIDEO"===n.tagName?"loadeddata":"load";nn(n,i,t),nn(n,"error",e)}(i,(function(a){!function(n,t,e,i){var a=O(t);on(t,e,i),N(t,e.class_loaded),y(t,b),x(e.callback_loaded,t,i),a||Z(e,i)}(0,n,t,e),an(i)}),(function(a){!function(n,t,e,i){var a=O(t);on(t,e,i),N(t,e.class_error),y(t,h),x(e.callback_error,t,i),a||Z(e,i)}(0,n,t,e),an(i)}))},cn=function(n,t,e){!function(n){n.llTempImage=document.createElement("IMG")}(n),rn(n,t,e),function(n){j(n)||(n[_]={backgroundImage:n.style.backgroundImage})}(n),function(n,t,e){var i=A(n,t.data_bg),a=A(n,t.data_bg_hidpi),r=o&&a?a:i;r&&(n.style.backgroundImage='url("'.concat(r,'")'),z(n).setAttribute(l,r),K(n,t,e))}(n,t,e),function(n,t,e){var i=A(n,t.data_bg_multi),a=A(n,t.data_bg_multi_hidpi),r=o&&a?a:i;r&&(n.style.backgroundImage=r,function(n,t,e){N(n,t.class_applied),y(n,p),e&&(t.unobserve_completed&&R(n,t),x(t.callback_applied,n,e))}(n,t,e))}(n,t,e)},un=function(n,t,e){!function(n){return Y.indexOf(n.tagName)>-1}(n)?cn(n,t,e):function(n,t,e){rn(n,t,e),function(n,t,e){var i=X[n.tagName];i&&(i(n,t),K(n,t,e))}(n,t,e)}(n,t,e)},ln=function(n){n.removeAttribute(l),n.removeAttribute(s),n.removeAttribute(d)},sn=function(n){V(n,(function(n){H(n,P)})),H(n,P)},dn={IMG:sn,IFRAME:function(n){H(n,B)},VIDEO:function(n){F(n,(function(n){H(n,B)})),H(n,J),n.load()},OBJECT:function(n){H(n,S)}},fn=function(n,t){(function(n){var t=dn[n.tagName];t?t(n):function(n){if(j(n)){var t=U(n);n.style.backgroundImage=t.backgroundImage}}(n)})(n),function(n,t){w(n)||O(n)||(M(n,t.class_entered),M(n,t.class_exited),M(n,t.class_applied),M(n,t.class_loading),M(n,t.class_loaded),M(n,t.class_error))}(n,t),L(n),$(n)},_n=["IMG","IFRAME","VIDEO"],vn=function(n){return n.use_native&&"loading"in HTMLImageElement.prototype},gn=function(n,t,e){n.forEach((function(n){return function(n){return n.isIntersecting||n.intersectionRatio>0}(n)?function(n,t,e,i){var a=function(n){return C.indexOf(k(n))>=0}(n);y(n,"entered"),N(n,e.class_entered),M(n,e.class_exited),function(n,t,e){t.unobserve_entered&&R(n,e)}(n,e,i),x(e.callback_enter,n,t,i),a||un(n,e,i)}(n.target,n,t,e):function(n,t,e,i){w(n)||(N(n,e.class_exited),function(n,t,e,i){e.cancel_on_exit&&function(n){return k(n)===g}(n)&&"IMG"===n.tagName&&(an(n),function(n){V(n,(function(n){ln(n)})),ln(n)}(n),sn(n),M(n,e.class_loading),T(i,-1),L(n),x(e.callback_cancel,n,t,i))}(n,t,e,i),x(e.callback_exit,n,t,i))}(n.target,n,t,e)}))},bn=function(n){return Array.prototype.slice.call(n)},pn=function(n){return n.container.querySelectorAll(n.elements_selector)},hn=function(n){return function(n){return k(n)===h}(n)},mn=function(n,t){return function(n){return bn(n).filter(w)}(n||pn(t))},En=function(n,e){var a=c(n);this._settings=a,this.loadingCount=0,function(n,t){i&&!vn(n)&&(t._observer=new IntersectionObserver((function(e){gn(e,n,t)}),function(n){return{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"}}(n)))}(a,this),function(n,e){t&&window.addEventListener("online",(function(){!function(n,t){var e;(e=pn(n),bn(e).filter(hn)).forEach((function(t){M(t,n.class_error),L(t)})),t.update()}(n,e)}))}(a,this),this.update(e)};return En.prototype={update:function(n){var t,a,o=this._settings,r=mn(n,o);G(this,r.length),!e&&i?vn(o)?function(n,t,e){n.forEach((function(n){-1!==_n.indexOf(n.tagName)&&function(n,t,e){n.setAttribute("loading","lazy"),rn(n,t,e),function(n,t){var e=X[n.tagName];e&&e(n,t)}(n,t),y(n,m)}(n,t,e)})),G(e,0)}(r,o,this):(a=r,function(n){n.disconnect()}(t=this._observer),function(n,t){t.forEach((function(t){n.observe(t)}))}(t,a)):this.loadAll(r)},destroy:function(){this._observer&&this._observer.disconnect(),pn(this._settings).forEach((function(n){$(n)})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(n){var t=this,e=this._settings;mn(n,e).forEach((function(n){R(n,t),un(n,e,t)}))},restoreAll:function(){var n=this._settings;pn(n).forEach((function(t){fn(t,n)}))}},En.load=function(n,t){var e=c(t);un(n,e)},En.resetStatus=function(n){L(n)},t&&function(n,t){if(t)if(t.length)for(var e,i=0;e=t[i];i+=1)u(n,e);else u(n,t)}(En,window.lazyLoadOptions),En}();;var Notyf=function(){"use strict";var e,o=function(){return(o=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t}).apply(this,arguments)},n=(t.prototype.on=function(t,i){var e=this.listeners[t]||[];this.listeners[t]=e.concat([i])},t.prototype.triggerEvent=function(t,i){var e=this;(this.listeners[t]||[]).forEach(function(t){return t({target:e,event:i})})},t);function t(t){this.options=t,this.listeners={}}(i=e=e||{})[i.Add=0]="Add",i[i.Remove=1]="Remove";var f,i,s=(a.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,e.Add,this.notifications)},a.prototype.splice=function(t,i){i=this.notifications.splice(t,i)[0];return this.updateFn(i,e.Remove,this.notifications),i},a.prototype.indexOf=function(t){return this.notifications.indexOf(t)},a.prototype.onUpdate=function(t){this.updateFn=t},a);function a(){this.notifications=[]}(i=f=f||{}).Dismiss="dismiss";var r={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!(i.Click="click")},c=(p.prototype.on=function(t,i){var e;this.events=o(o({},this.events),((e={})[t]=i,e))},p.prototype.update=function(t,i){i===e.Add?this.addNotification(t):i===e.Remove&&this.removeNotification(t)},p.prototype.removeNotification=function(t){var i,e,n=this,t=this._popRenderedNotification(t);t&&((e=t.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,i=function(t){t.target===e&&(e.removeEventListener(n.animationEndEventName,i),n.container.removeChild(e))}))},p.prototype.addNotification=function(t){var i=this._renderNotification(t);this.notifications.push({notification:t,node:i}),this._announce(t.options.message||"Notification")},p.prototype._renderNotification=function(t){var i=this._buildNotificationCard(t),e=t.options.className;return e&&(t=i.classList).add.apply(t,e.split(" ")),this.container.appendChild(i),i},p.prototype._popRenderedNotification=function(t){for(var i=-1,e=0;e<this.notifications.length&&i<0;e++)this.notifications[e].notification===t&&(i=e);if(-1!==i)return this.notifications.splice(i,1)[0]},p.prototype.getXPosition=function(t){return(null===(t=null==t?void 0:t.position)||void 0===t?void 0:t.x)||"right"},p.prototype.getYPosition=function(t){return(null===(t=null==t?void 0:t.position)||void 0===t?void 0:t.y)||"bottom"},p.prototype.adjustContainerAlignment=function(t){var i=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],e=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],t=this.container.style;t.setProperty("justify-content",e),t.setProperty("align-items",i)},p.prototype._buildNotificationCard=function(n){var o=this,t=n.options,i=t.icon;this.adjustContainerAlignment(t);var e=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),s=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),a=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),r=this._createHTMLElement({tagName:"div",className:"notyf__message"});r.innerHTML=t.message||"";var c,p,d,l,u=t.background||t.backgroundColor;i&&(c=this._createHTMLElement({tagName:"div",className:"notyf__icon"}),("string"==typeof i||i instanceof String)&&(c.innerHTML=new String(i).valueOf()),"object"==typeof i&&(p=i.tagName,d=i.className,l=i.text,i=void 0===(i=i.color)?u:i,l=this._createHTMLElement({tagName:void 0===p?"i":p,className:d,text:l}),i&&(l.style.color=i),c.appendChild(l)),a.appendChild(c)),a.appendChild(r),e.appendChild(a),u&&(t.ripple?(s.style.background=u,e.appendChild(s)):e.style.background=u),t.dismissible&&(s=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),u=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"}),s.appendChild(u),a.appendChild(s),e.classList.add("notyf__toast--dismissible"),u.addEventListener("click",function(t){var i,e;null!==(e=(i=o.events)[f.Dismiss])&&void 0!==e&&e.call(i,{target:n,event:t}),t.stopPropagation()})),e.addEventListener("click",function(t){var i,e;return null===(e=(i=o.events)[f.Click])||void 0===e?void 0:e.call(i,{target:n,event:t})});t="top"===this.getYPosition(t)?"upper":"lower";return e.classList.add("notyf__toast--"+t),e},p.prototype._createHTMLElement=function(t){var i=t.tagName,e=t.className,t=t.text,i=document.createElement(i);return e&&(i.className=e),i.textContent=t||null,i},p.prototype._createA11yContainer=function(){var t=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},p.prototype._announce=function(t){var i=this;this.a11yContainer.textContent="",setTimeout(function(){i.a11yContainer.textContent=t},100)},p.prototype._getAnimationEndEventName=function(){var t,i=document.createElement("_fake"),e={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in e)if(void 0!==i.style[t])return e[t];return"animationend"},p);function p(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),i=this._createHTMLElement({tagName:"div",className:"notyf"});t.appendChild(i),document.body.appendChild(t),this.container=i,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}function d(t){var e=this;this.dismiss=this._removeNotification,this.notifications=new s,this.view=new c;var i=this.registerTypes(t);this.options=o(o({},r),t),this.options.types=i,this.notifications.onUpdate(function(t,i){return e.view.update(t,i)}),this.view.on(f.Dismiss,function(t){var i=t.target,t=t.event;e._removeNotification(i),i.triggerEvent(f.Dismiss,t)}),this.view.on(f.Click,function(t){var i=t.target,t=t.event;return i.triggerEvent(f.Click,t)})}return d.prototype.error=function(t){t=this.normalizeOptions("error",t);return this.open(t)},d.prototype.success=function(t){t=this.normalizeOptions("success",t);return this.open(t)},d.prototype.open=function(i){var t=this.options.types.find(function(t){return t.type===i.type})||{},t=o(o({},t),i);this.assignProps(["ripple","position","dismissible"],t);t=new n(t);return this._pushNotification(t),t},d.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},d.prototype.assignProps=function(t,i){var e=this;t.forEach(function(t){i[t]=(null==i[t]?e.options:i)[t]})},d.prototype._pushNotification=function(t){var i=this;this.notifications.push(t);var e=(void 0!==t.options.duration?t:this).options.duration;e&&setTimeout(function(){return i._removeNotification(t)},e)},d.prototype._removeNotification=function(t){t=this.notifications.indexOf(t);-1!==t&&this.notifications.splice(t,1)},d.prototype.normalizeOptions=function(t,i){t={type:t};return"string"==typeof i?t.message=i:"object"==typeof i&&(t=o(o({},t),i)),t},d.prototype.registerTypes=function(t){var i=(t&&t.types||[]).slice();return r.types.map(function(e){var n=-1;i.forEach(function(t,i){t.type===e.type&&(n=i)});var t=-1!==n?i.splice(n,1)[0]:{};return o(o({},e),t)}).concat(i)},d}();;;(function(){const initNotyf=()=>{if(window.Notyf){const notyf=new window.Notyf({duration:5000,dismissible:true,position:{x:'right',y:'top',},types:[{type:'primary',background:'#2AA5A0',icon:{className:'icon-bell notyf-icon',tagName:'i',},},{type:'success',background:'#4CAF50',},{type:'warning',background:'#FF7D1A',icon:{className:'icon-attention notyf-icon',tagName:'i',},},{type:'error',background:'#DC4437',},{type:'love',className:'love-notyf',icon:{className:'icon-heart notyf-icon',tagName:'i',},},],})
window.primaryNotyf=(message,duration=notyf.duration)=>{notyf.open({type:'primary',message:message,duration:duration,})}
window.successNotyf=(message,duration=notyf.duration)=>{notyf.open({type:'success',message:message,duration:duration,})}
window.errorNotyf=(message,duration=notyf.duration)=>{notyf.open({type:'error',message:message,duration:duration,})}
window.warningNotyf=(message,duration=notyf.duration)=>{notyf.open({type:'warning',message:message,duration:duration,})}
window.loveNotyf=function(message,duration=notyf.duration){notyf.open({type:'love',message:message,duration:duration,})}}}
const initPhotoswipe=()=>{let lightboxItems=document.querySelectorAll('.lightbox')
let pswpElement=document.querySelectorAll('.pswp')[0]
lightboxItems.forEach((item)=>{let image=item.getElementsByTagName('img')[0]
if(!image)return
let options={index:0,history:false,focus:false,tapToToggleControls:false,tapToClose:true,bgOpacity:1,mouseUsed:true,pinchToClose:false,closeOnScroll:true,showAnimationDuration:333,showHideOpacity:true,closeElClasses:['item','caption','ui','top-bar','close_area','zoom-wrap'],getThumbBoundsFn:()=>{;(pageYScroll=window.pageYOffset||document.documentElement.scrollTop),(rect=image.getBoundingClientRect())
return{x:rect.left,y:rect.top+pageYScroll,w:rect.width}},getDoubleTapZoom:(isMouseClick,item)=>{if(isMouseClick){return 1}else{return item.initialZoomLevel<0.7?1:1.5}},isClickableElement:function(el){return el.tagName==='A'},}
let baseSrc=item.href
let srcset=''
let sizes=''
if(image.srcset!==''){srcset=image.srcset}else if(image.dataset.srcset!==''){srcset=image.dataset.srcset}
if(image.sizes!==''){sizes=image.sizes}else if(image.dataset.sizes!==''){sizes=image.dataset.sizes}
let imageItem=[{src:baseSrc,sizes:sizes,srcset:srcset,w:image.getAttribute('width')||image.width||1540,h:image.getAttribute('height')||image.height||1540,},]
item.onclick=(event)=>{event.preventDefault()
let pswp=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,imageItem,options)
pswp.listen('gettingData',(index,item)=>{item.src=image.src})
pswp.init()
let closeBtn=pswpElement.querySelector('.pswp__close_area').getElementsByTagName('i')[0]
if(closeBtn){closeBtn.onclick=()=>{pswp.close()}}
let imageLink=pswpElement.querySelector('.pswp__download').getElementsByTagName('a')[0]
if(imageLink){imageLink.href=item.href}}})}
const initJsPlugins=()=>{initNotyf()
initPhotoswipe()
if(!window.initPhotoswipe)window.initPhotoswipe=initPhotoswipe}
if(/complete|interactive|loaded/.test(document.readyState)){initJsPlugins()}else{document.addEventListener('DOMContentLoaded',initJsPlugins,false)}})();window.Prism=window.Prism||{}
window.Prism.manual=true
window.setupVK=()=>{VK.Retargeting.Init('VK-RTRG-271723-bcLdk')
VK.Retargeting.Hit()
if(typeof window.vkRetargetInit==="function")window.vkRetargetInit()}
if(window.VK){setupVK()}
const commonScript=()=>{const executeIfElementsExists=(selector,callback)=>{document.querySelectorAll(selector).forEach((element)=>{callback(element)})
tprogerEasterSecret();}
function tprogerEasterSecret(){console.log('%cTPROGER.RU',`font-size:26px;
			font-weight:bold;
			background-color: #29A19F;
			color:#333333;
			border-radius: 16px;
			padding-left: 14px;
			padding-right: 14px;
			padding-top: 8px;
			padding-bottom: 8px;`,);}
const showOnIdle=()=>{window.requestAnimationFrame(()=>{executeIfElementsExists('.show-on-idle, .mobile-show-on-idle',(element)=>{element.classList.remove('show-on-idle','mobile-show-on-idle')})})}
document.querySelectorAll('.theme-switcher').forEach((button)=>{button.onclick=(e)=>{const themes=[{id:0,class:'theme-auto',name:'Тема: как в системе'},{id:1,class:'theme-dark',name:'Тёмная тема'},{id:2,class:'theme-light',name:'Светлая тема'},]
const defaultTheme=themes[0]
let currentTheme=themes.find((theme)=>document.body.classList.contains(theme.class))
if(!currentTheme){currentTheme=defaultTheme}
const nextTheme=themes.find((theme)=>theme.id===(currentTheme.id+1)%3)
document.body.classList.remove(currentTheme.class)
document.body.classList.add(nextTheme.class)
button.innerText=nextTheme.name}})
const executeLazyFunction=(element)=>{const lazyFunctionName=element.getAttribute('data-lazy-function')
if(typeof window[lazyFunctionName]==='function'){element.removeAttribute('data-lazy-function')
window[lazyFunctionName](element)}}
window.lazyLoadInstance=new LazyLoad({threshold:250,cancel_on_exit:true,elements_selector:'.lazy',callback_enter:executeLazyFunction,})
const buttonShowGroupButtonsSelectList=document.getElementById('buttonShowGroupButtonsSelectList')
const groupButtonsSelectList=document.getElementById('groupButtonsSelectList')
if(buttonShowGroupButtonsSelectList){buttonShowGroupButtonsSelectList.addEventListener('click',(e)=>{e.preventDefault()
groupButtonsSelectList.classList.toggle(containerListShowClassName)
buttonShowGroupButtonsSelectList.children[0]?.children[0]?.classList.toggle('group-buttons-select__icon--rotate')})}
const searchButtonGroupSelectList=document.querySelector('#searchButtonGroupSelectList')
const searchGroupSelectList=document.querySelector('#searchGroupSelectList')
const containerListShowClassName='group-buttons-select__container-list--show';const headerContainerSearch=document.querySelector('.header__container-search');const closeSearchGroupSelectList=()=>{searchGroupSelectList.classList.toggle(containerListShowClassName)}
if(searchButtonGroupSelectList&&searchGroupSelectList){searchButtonGroupSelectList.addEventListener('click',(e)=>{e.preventDefault()
closeSearchGroupSelectList();})}
document.addEventListener('click',(e)=>{const isSearchButtonGroupSelectListFocused=e.composedPath().includes(searchButtonGroupSelectList);const isSearchGroupSelectListFocused=e.composedPath().includes(searchGroupSelectList);const isContainerListShowClassNameShowed=headerContainerSearch.querySelectorAll(`.${containerListShowClassName}`).length>0;const withSearchElements=isSearchButtonGroupSelectListFocused||isSearchGroupSelectListFocused;if(!withSearchElements&&isContainerListShowClassNameShowed){closeSearchGroupSelectList();}},true);document.addEventListener('scroll',(e)=>{if(headerContainerSearch.querySelectorAll(`.${containerListShowClassName}`).length>0)
closeSearchGroupSelectList();});const buttonMobileSearch=document.getElementById('buttonMobileSearch')
buttonMobileSearch.addEventListener('click',(e)=>{e.preventDefault()
toogleClassButtonMobileSearch()
showMobileSearch()})
const toogleClassButtonMobileSearch=()=>{buttonMobileSearch.children[0]?.children[0]?.classList.toggle('button-menu__icon--cancel')}
const showMobileSearch=()=>{const mobileSearch=document.getElementById('mobileSearch')
mobileSearch.classList.toggle('mobile-search--show')}
executeIfElementsExists('.accordion',accordion=>{accordion.querySelectorAll('.accordion-group').forEach(accordionGroup=>{const accordionHeading=accordionGroup.querySelector('.accordion-heading')
const accordionBody=accordionGroup.querySelector('.accordion-body')
accordionHeading.onclick=e=>{e.preventDefault()
window.requestAnimationFrame(()=>{accordionBody.querySelectorAll('code').forEach(element=>{Prism.highlightElement(element)})
accordionBody.style.height=accordionBody.classList.contains('in')?0:accordionBody.scrollHeight+'px'
accordionBody.classList.toggle('in')
accordionHeading.classList.toggle('accordion-heading--open')})}})})
const internalLinks=document.getElementsByClassName('internal-link');if(internalLinks.length>0){const internalLinksObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){let elem=entry.target;if(elem.hasAttribute('data-style')){elem.setAttribute('style',elem.getAttribute('data-style'))
elem.removeAttribute('data-style')}
observer.unobserve(elem);}});},{root:null,rootMargin:'50px',threshold:0});for(const internalLink of internalLinks){internalLinksObserver.observe(internalLink)}}
observeElementLoading();}
const executeIfElementsExists=(selector,callback)=>{document.querySelectorAll(selector).forEach((element)=>{callback(element)})}
const observeElementLoading=()=>{const widgetsLoadedPositiveValue='yes'
const getLoadedCount=widgetsContainer=>parseInt(widgetsContainer.dataset.loadedCount,10)
const isAllChildWidgetsLoaded=widgetsContainer=>getLoadedCount(widgetsContainer)<1
const isWidgetLoaded=widget=>widget.dataset.loaded===widgetsLoadedPositiveValue
const markWidgetsContainerAsLoaded=widgetsContainer=>{if(widgetsContainer.dataset.containerLoaded!==widgetsLoadedPositiveValue){window.requestAnimationFrame(()=>{widgetsContainer.dataset.containerLoaded=widgetsLoadedPositiveValue
if(typeof window[widgetsContainer.dataset.containerLoadedCallback]==='function'){window[widgetsContainer.dataset.containerLoadedCallback](widgetsContainer)}})}}
executeIfElementsExists('[data-container-loaded="no"]',widgetsContainer=>{const observer=new MutationObserver((mutationsList,observer)=>{for(let mutation of mutationsList){if(mutation.attributeName==='data-loaded'&&isWidgetLoaded(mutation.target)){const widgetsContainer=mutation.target.closest('[data-container-loaded]')
widgetsContainer.dataset.loadedCount=getLoadedCount(widgetsContainer)-1
if(isAllChildWidgetsLoaded(widgetsContainer)){observer.disconnect()
markWidgetsContainerAsLoaded(widgetsContainer)}}}})
const childWidgets=widgetsContainer.querySelectorAll('[data-loaded="no"]')
widgetsContainer.dataset.loadedCount=0
childWidgets.forEach(widget=>{if(!isWidgetLoaded(widget)){widgetsContainer.dataset.loadedCount=getLoadedCount(widgetsContainer)+1
observer.observe(widget,{attributes:true})}
if(widget.classList.contains('lazy')){if(typeof window[widget.dataset.lazyFunction]==='function'){window[widget.dataset.lazyFunction](widget)}else{widget.dataset.llStatus='queued'}}})
if(isAllChildWidgetsLoaded(widgetsContainer)){markWidgetsContainerAsLoaded(widgetsContainer)}else{const maxSecondsToWait=parseInt(widgetsContainer.dataset.containerLoadedMaxSeconds,10)
if(maxSecondsToWait>0){setTimeout(markWidgetsContainerAsLoaded.bind(this,widgetsContainer),maxSecondsToWait*1000)}}})}
window.observeElementLoading=observeElementLoading;const showOnIdle=()=>{window.requestAnimationFrame(()=>{executeIfElementsExists('.show-on-idle, .mobile-show-on-idle',(element)=>{element.classList.remove('show-on-idle','mobile-show-on-idle')})})}
if('requestIdleCallback'in window){window.requestIdleCallback(showOnIdle,{timeout:1000})}else{showOnIdle()}
const requestIdleCallbackFunction=(task,second=1)=>{if('requestIdleCallback'in window){requestIdleCallback(task)}else{setTimeout(task,second*1000)}}
window.getPostID=()=>{const article=document.querySelector('article.single.post')
return article?parseInt(article.id.replace('post-','')):0}
window.postID=getPostID()
window.isMobile=()=>window.matchMedia('(max-width: 976px)').matches
window.isNarrowMobile=()=>window.matchMedia('(max-width: 480px)').matches
window.isAppleMobile=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream
executeIfElementsExists('.video-cover-img',(cover)=>{cover.onclick=()=>{cover.classList.add('locked-loading')
loadYouTube(true)}})
executeIfElementsExists('.entry-video',(entryVideo)=>{const videoIframe=entryVideo.querySelector('iframe')
if(videoIframe&&document.contains(videoIframe)&&!isMobile()){const videoContainer=entryVideo.querySelector('.video-container')
const videoObserver=new IntersectionObserver((entries,observer)=>{entries.forEach((entry)=>{if(entry.isIntersecting){if(videoContainer.classList.contains('float')){window.requestAnimationFrame(()=>{videoContainer.classList.remove('float')})}}else{if(!videoContainer.classList.contains('float')&&window.player&&typeof window.player.getPlayerState==='function'&&window.player.getPlayerState()===1){window.requestAnimationFrame(()=>{videoContainer.classList.add('float')})}}})},{root:null,rootMargin:'0px',threshold:0,},)
videoObserver.observe(entryVideo)}})
document.addEventListener('keydown',e=>{const searchParams=new URLSearchParams(window.location.search)
if(e.code==='KeyX'&&e.ctrlKey&&e.shiftKey&&searchParams.get('cache')!=='no'){searchParams.set('cache','no')
window.location.replace(`${window.location.origin}${window.location.pathname}?${searchParams.toString()}`)}else if(e.code==='KeyZ'&&e.ctrlKey&&e.shiftKey){if(window.postID>0){window.location.assign(`${window.location.origin}/wp-admin/post.php?post=${window.postID}&action=edit`)}}})
if(/complete|interactive|loaded/.test(document.readyState)){commonScript()}else{document.addEventListener('DOMContentLoaded',commonScript,false)};(function(){const tprogerWidgetUrls={getWidget:'/wp-json/site/widget/v1/get',getWidgets:'/wp-json/site/widget/v1/get/widgets',}
const widgetCookieKey='tp_a_d_s_baner'
const bannerTypes={FIXBANNER:1,FLOATBANNER:2,AFTERPOST:3,TOP:4,COMPANY:5,SPONSOR:8,}
const wpPageTypes={HOME:0,SINGLE:1,TAG:2,CATEGORY:3,OTHER:4}
const tprogerWidgetColors={menu:{default:'#2b2a29',transparent:'#2b2a2987'}}
let isRenderTopBanner=false
let renderTasks=[]
const backgroundRender=(deadline)=>{while(deadline.timeRemaining()>0&&renderTasks.length>0){renderTasks.shift()()}
if(renderTasks.length>0){requestIdleCallback(backgroundRender)}}
async function getTprogerWidgets(requestData){let widgetsCookie=''
if(window.docCookies.get(widgetCookieKey)!==null){widgetsCookie=window.docCookies.get(widgetCookieKey)}
let url='?'+
'widgetscookie='+
widgetsCookie+
'&requestData='+
JSON.stringify(requestData)
try{const widgetsData=await fetch(tprogerWidgetUrls.getWidgets,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json','pragma':'no-cache','cache-control':'no-cache'},body:JSON.stringify({widgetscookie:widgetsCookie,requestData:JSON.stringify(requestData)})});if(widgetsData.status!==200){return}
let result=await widgetsData.json()
return result}catch(error){console.error('Ошибка:',error)
return null}}
function createStyleBlock(widget,style){if(style!=''){window.requestAnimationFrame(()=>{const styleBlock=document.createElement('style')
styleBlock.type='text/css'
styleBlock.appendChild(document.createTextNode(style))
widget.appendChild(styleBlock)})}}
function checkData(e){switch(e){case '':case 0:case '0':case null:case 'null':case false:case undefined:case typeof this=='undefined':return true
default:return false}}
function initBanner(key,jsonBaner){let event='init'
if(typeof ga!='undefined'&&ga)ga('send','event',event,key)
sendWidgetEvent(jsonBaner,event)}
function showBanner(key,jsonBaner){let event='show'
if(typeof ga!='undefined'&&ga)ga('send','event',event,key)
sendWidgetEvent(jsonBaner,event)}
function clickBanner(widget,key,id,jsonBaner,type=bannerTypes.FIXBANNER,noAddInCookie=false,){let event='click'
if(!noAddInCookie){updateBannerCookieList(id)}
if(typeof ga!='undefined'&&ga)ga('send','event',event,key)
sendWidgetEvent(jsonBaner,event)
hideOrRemoveWidget(widget,type)}
function closeBanner(widget,key,id,jsonBaner,type=bannerTypes.FIXBANNER){let event='close'
updateBannerCookieList(id)
if(typeof ga!='undefined'&&ga)ga('send','event',event,key)
sendWidgetEvent(jsonBaner,event)
hideOrRemoveWidget(widget,type,true)}
function hideOrRemoveWidget(widget,type,remove=false){if(type===bannerTypes.FLOATBANNER){widget.querySelector('.float-widget').style.transform='translate3d(0, 0, 0)'}else if(type===bannerTypes.FIXBANNER){if(remove){widget.style.display='none'}}else if(type===bannerTypes.TOP){return}}
function setMenuBgColor(color){if(!color||color=='')return
let headContainer=document.getElementById('header-container')
headContainer.style.setProperty('background-color',tprogerWidgetColors.menu.transparent,'important')
let header=document.getElementById('masthead')
header.style.zIndex=500
header.style.position='relative'
header.style.setProperty('background-color',color,'important')}
function clearMenuBgColor(){let headContainer=document.getElementById('header-container')
headContainer.style.backgroundColor=tprogerWidgetColors.menu.default}
function updateBannerCookieList(value){if(!window.docCookies)return
let keys=docCookies.get(widgetCookieKey)
if(checkData(keys)){keys=value}else{keys=keys.split(',')
if(!keys.includes(value)){keys.push(value)}
keys=keys.join(',')}
let now=new Date()
let time=now.getTime()
let expireTime=time+7*86400000
now.setTime(expireTime)
docCookies.set(widgetCookieKey,keys,now.toGMTString())}
function sendWidgetEvent(jsonBanner,event){data=JSON.parse(jsonBanner)
data.eventType=event
data.pageType=''
fetch('/wp-json/api/widgets/event',{method:'POST',headers:{'Content-Type':'application/json','pragma':'no-cache','cache-control':'no-cache'},body:JSON.stringify(data)})}
const renderDefault=(widgets)=>{for(let i=0;i<widgets.length;i++){let widget=widgets[i]
if(widget.dataset.isDefault&&parseInt(widget.dataset.isDefault)===0){let img=widget.querySelector('img')
if(img){img.style.display='block'
img.src='/wp-content/themes/gecko/assets/img/icon-logo-telegram.svg'}}
let loader=widget.querySelector('.widget-loader')
if(loader){loader.style.display='none'}}}
function initBannerSystem(){renderTopWidget()
let requestData=[]
let widgets=document.getElementsByClassName('tproger-widget')
if(!widgets||widgets.length<1)return
const setLoadedStatuses=()=>{for(let i=0;i<widgets.length;i++){if((widgets[i].dataset.type==bannerTypes.FIXBANNER||widgets[i].dataset.type==bannerTypes.COMPANY)&&widgets[i].dataset.loaded!=='yes'){widgets[i].dataset.loaded='yes'}}
renderDefault(widgets)}
let widgetData={}
widgetTypes=[]
for(let i=0;i<widgets.length;i++){let widget=widgets[i]
if(parseInt(widget.dataset.type)!==parseInt(bannerTypes.TOP)){widgetTypes.push(widget.dataset.type)}}
let wordpressPageInfo=getWordpressPageInfo()
widgetData={types:widgetTypes,post:wordpressPageInfo.post,post_type:wordpressPageInfo.postType,post_tags:wordpressPageInfo.tags,post_tag_id:wordpressPageInfo.tagID}
requestData.push(widgetData)
let hasSponsor=false
getTprogerWidgets(widgetData).then((wdata)=>{if((wdata&&wdata.length<1)||!wdata)return
wdata.forEach((element)=>{if(element&&element.type==bannerTypes.SPONSOR){hasSponsor=true}})
hasSponsor=hasSponsorWidget()
for(let i=0;i<wdata.length;i++){let element=wdata[i]
if(element.type==bannerTypes.AFTERPOST){let widget=getInactiveWidgetByType(widgets,element.type)
if(widget&&!hasSponsor){if(window.ta){window.ta('widget.init',3,{widgetId:element.id,widgetPlaceName:getWidgetPlace(widget)})}
renderTasks.push(()=>{return renderAfterPostWidget(widget.id,element)})}}
if(element.type==bannerTypes.FLOATBANNER){let widget=getInactiveWidgetByType(widgets,element.type)
if(widget){if(window.ta){window.ta('widget.init',3,{widgetId:element.id,widgetPlaceName:getWidgetPlace(widget)})}
renderTasks.push(()=>{return renderFloatWidget(widget.id,element)})}}
if(element.type==bannerTypes.FIXBANNER){let widget=getInactiveWidgetByType(widgets,element.type)
if(widget){widget.dataset.activeStatus=true
if(window.ta){window.ta('widget.init',3,{widgetId:element.id,widgetPlaceName:getWidgetPlace(widget)})}
renderTasks.push(()=>{return renderFixWidget(widget.id,element)})}}
if(element.type==bannerTypes.COMPANY){let widget=getInactiveWidgetByType(widgets,element.type)
if(widget){widget.dataset.activeStatus=true
if(window.ta){window.ta('widget.init',3,{widgetId:element.id,widgetPlaceName:getWidgetPlace(widget)})}
renderTasks.push(()=>{return renderFixWidget(widget.id,element)})}}
if(element.type==bannerTypes.SPONSOR){}}}).finally(()=>{renderTasks.push(()=>{setLoadedStatuses()})
if('requestIdleCallback'in window){requestIdleCallback(backgroundRender)}
else{while(renderTasks.length){setTimeout(renderTasks.shift(),1)}}})
findAndActivateSponsorWidgetEvents()}
const getWordpressPostTagsForWidget=()=>[...document.querySelectorAll('a[rel=tag] span[itemprop=name]')].map((span)=>span.dataset.tagName)
const getWordpressSlugId=slug=>[...document.body.classList].reduce((acc,val)=>{if(val.match(RegExp(slug+'-(\\d+)')))return val.match(RegExp(slug+'-(\\d+)'))
if(acc)return acc})[1]
function getWordpressPageInfo(){let body=document.body
let post=0
let postType=wpPageTypes.HOME
let tags=[]
let tagID=0
if(body.classList.contains('home')){postType=wpPageTypes.HOME}else if(body.classList.contains('single')){postType=wpPageTypes.SINGLE
tags=getWordpressPostTagsForWidget()
post=getWordpressSlugId('postid')}else if(body.classList.contains('tag')){postType=wpPageTypes.TAG
tagID=getWordpressSlugId('tag')}else if(body.classList.contains('category')){postType=wpPageTypes.CATEGORY
tagID=getWordpressSlugId('category')}else{postType=wpPageTypes.OTHER}
return{post:post,postType:postType,tags:tags.join(","),tagID:tagID}}
function getInactiveWidgetByType(widgets,type){if(!widgets||widgets.length<1)return
for(let i=0;i<widgets.length;i++){let widget=widgets[i]
if(widget.dataset.type==type&&(!widget.dataset.activeStatus||widget.dataset.activeStatus!='true')){return widget}}}
function renderFloatWidget(widgetID,data){let widget=document.getElementById(widgetID)
if(!data){return}else{widget.style.display='block'}
const widgetId=parseInt(data.id)
let widgetContainer=widget.querySelector('.float-widget-container')
let widgetFloat=widget.querySelector('.float-widget')
let widgetLink=widget.querySelector('.float-widget-a')
let widgetText=widget.querySelector('.float-widget-text')
let widgetBtn=widget.querySelector('.float-widget-btn')
let widgetPositiveBtn=widget.querySelector('.float-widget-positive-btn')
let widgetNegativeBtn=widget.querySelector('.float-widget-negative-btn')
let widgetImg=widget.querySelector('.float-widget-img')
let widgetCloseBtn=widget.querySelector('.float-widget-close-btn')
let widgetBlocks=widget.querySelector('.float-widget-blocks')
let startInSeconds=3
const place=getWidgetPlace(widget)
if(data.text!=''){widgetText.innerHTML=data.text}
if(data.button_text!=''){widgetPositiveBtn.innerHTML=data.button_text}
if(data.button_cancel_text!=''){widgetNegativeBtn.innerHTML=data.button_cancel_text}
if(data.src&&data.src!=''){widgetImg.src=data.src}else if(data.image&&data.image!=''){widgetImg.src=data.image}
if(data.srcset&&data.srcset!=''){widgetImg.srcset=data.srcset}
if(data.link!=''){widgetLink.href=data.link}
if(data.custom_class!=''){widget.className+=(" "+data.custom_class)}
if(data.custom_style!=''){createStyleBlock(widget,data.custom_style)}
let goalType=''
let goalTarget=0
let noAddInCookie=false
let paddingBottom=0
if(data.options!=''){let options=JSON.parse(data.options)
if(options.marginBottom!=''){widget.style.marginBottom=options.marginBottom+'px'}
if(options.paddingBottom!=''){paddingBottom=options.paddingBottom
widgetFloat.style.paddingBottom=options.paddingBottom+'px'}
if(options.transformSecond!=''){widgetFloat.style.transition='transform '+options.transformSecond+'s ease'
widgetFloat.style.WebkitTransition='transform '+options.transformSecond+'s ease'
widgetFloat.style.MozTransition='transform '+options.transformSecond+'s ease'}
if(options.paddingImageFromText&&options.paddingImageFromText!==''){if(options.imageAlignPosition&&options.imageAlignPosition==0){widgetImg.style.marginLeft=0
widgetImg.style.marginRight=options.paddingImageFromText+'px'
widgetLink.style.flexDirection='row-reverse'}else{widgetImg.style.marginRight=0
widgetImg.style.marginLeft=options.paddingImageFromText+'px'}}
if(options.alignImage!=''){widgetLink.style.alignItems=options.alignImage}
if(options.textWidth!=''){widgetText.style.width=options.textWidth+'px'}
if(options.positiveBtnBackgroundColor!=''){widgetPositiveBtn.style.backgroundColor=options.positiveBtnBackgroundColor
if(options.textBorder!=''&&options.textBorder>0){widgetText.style.border='solid 2px '+options.positiveBtnBackgroundColor}}
if(options.positiveBtnTextColor!=''){widgetPositiveBtn.style.color=options.positiveBtnTextColor}
if(options.widgetAlignItems!=''){widgetBlocks.style.alignItems=options.widgetAlignItems}
if(options.goalType){goalType=options.goalType}
if(options.goalTarget){goalTarget=options.goalTarget}
if(window.matchMedia('(max-width: 419px)').matches){if(options.decreaseFontOnMobile&&options.decreaseFontOnMobile>0){var mobile_font_size='15px'
widgetText.style.fontSize=mobile_font_size
widgetBtn.style.fontSize=mobile_font_size}
if(options.imageWidthMobile!=''){widgetImg.style.width=options.imageWidthMobile+'px'}}else{if(options.imageWidth!=''){widgetImg.style.width=options.imageWidth+'px'}
if(options.imageHeight!=''||parseInt(options.imageHeight)>0){widgetImg.style.height=options.imageHeight+'px'}else{widgetImg.style.height='auto'}}
if(options.startInSeconds){startInSeconds=options.startInSeconds}
if(options.noAddInCookie&&options.noAddInCookie==true){noAddInCookie=true}}
if(data.ab_test==1&&typeof dataLayer!='undefined'&&dataLayer){dataLayer.push({event:'optimize.activate',})}
let postBannerTags=getPostBannerTags(data.tag_list)
let jsonBanner=JSON.stringify({widgetId:widgetId,eventType:'test',eventTags:postBannerTags,subwidgetPosition:'',})
initBanner(data.baner_key,jsonBanner);widgetLink.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBanner,bannerTypes.FLOATBANNER,noAddInCookie,)}}
widgetLink.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBanner,bannerTypes.FLOATBANNER,noAddInCookie,)}}
widgetLink.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
widgetNegativeBtn.onclick=function(e){e.preventDefault()
e.stopPropagation()
if(window.ta){window.ta('widget.close',3,{widgetId:widgetId,widgetPlaceName:place})}
return closeBanner(widget,data.baner_key,data.id,jsonBanner,bannerTypes.FLOATBANNER,)}
widgetCloseBtn.onclick=function(e){e.preventDefault()
e.stopPropagation()
if(window.ta){window.ta('widget.close',3,{widgetId:widgetId,widgetPlaceName:place})}
return closeBanner(widget,data.baner_key,data.id,jsonBanner,bannerTypes.FLOATBANNER,)}
const cookieNoticeWrapper=document.getElementById('cookie-notice-wrapper')
if(window.matchMedia('(min-width: 979px)').matches&&cookieNoticeWrapper&&cookieNoticeWrapper.style.display!=='none'){const cookieNoticeWraperHeight=parseInt(cookieNoticeWrapper.offsetHeight,10)
if(cookieNoticeWraperHeight>0){paddingBottom=cookieNoticeWraperHeight+parseInt(paddingBottom,10)}}
const startFloatWidget=()=>{return setTimeout(()=>{widgetFloat.style.paddingBottom=`${paddingBottom}px`
widgetFloat.classList.add('float-widget-show')
if(window.ta){window.ta('widget.show',3,{widgetId:widgetId,widgetPlaceName:place})}
showBanner(data.baner_key,jsonBanner)},startInSeconds*1000)}
const ampStore=localStorage.getItem('amp-store:'+window.location.origin);let isAmpApproved=false;if(ampStore){const ampStoreState=JSON.parse(atob(ampStore));isAmpApproved=ampStoreState.vv["amp-user-notification:amp-user-notification1"].v;if(isAmpApproved===true){localStorage.setItem('isTprogerCookieActive',1);}}
let isTprogerCookieActive=localStorage.getItem('isTprogerCookieActive');if(window.matchMedia('(max-width: 979px)').matches&&(!isTprogerCookieActive&&isTprogerCookieActive!='1')){if(cookieNoticeWrapper&&parseInt(cookieNoticeWrapper.offsetHeight)>0&&cookieNoticeWrapper.style.display!=='none'){let cookieNoticeWrapperClose=cookieNoticeWrapper.querySelector('.cookie-notice-close')
let closeNoticeWrapperFunction=function(e){let paddingBottom=parseInt(widget.style.paddingBottom)-parseInt(cookieNoticeWrapper.offsetHeight)
widget.style.paddingBottom=`${paddingBottom}px`
cookieNoticeWrapper.style.display='none'
startFloatWidget()
localStorage.setItem('isTprogerCookieActive',1);let state=new Object();state.vv={"amp-user-notification:amp-user-notification1":{"v":true,"t":Date.now(),}};localStorage.setItem('amp-store:'+window.location.origin,btoa(JSON.stringify(state)));}
if(cookieNoticeWrapperClose){cookieNoticeWrapperClose.onclick=closeNoticeWrapperFunction}}}else{startFloatWidget()}}
function renderFixWidget(widgetID,data){let widget=document.getElementById(widgetID)
const observer=new IntersectionObserver(handleIntersection,{root:null,threshold:1})
const widgetId=parseInt(data.id)
let mainLink=widget.querySelector('.fix-widget-main-a')
let widgetText=widget.querySelector('.fix-widget-text')
let widgetImg=widget.querySelector('.fix-widget-img')
let widgetButton=widget.querySelector('.fix-widget-button')
let widgetCloseBtn=widget.querySelector('.fix-widget-close-btn')
if(data.text!=''){widgetText.innerHTML=data.text}
if(data.button_text!=''){widgetButton.innerHTML=data.button_text}
if(data.src!=''){widgetImg.src=data.src}else if(data.image&&data.image!=''){widgetImg.src=data.image}
if(data.srcset&&data.srcset!=''){widgetImg.srcset=data.srcset}
if(data.link!=''){mainLink.href=data.link
widgetButton.href=data.link}
if(data.custom_class!=''){widget.className+=' '+data.custom_class}
if(data.custom_style!=''){createStyleBlock(widget,data.custom_style)}
let goalType=''
let goalTarget=0
let noAddInCookie=false
if(data.options!=''){let options=JSON.parse(data.options)
if(options.goalType){goalType=options.goalType}
if(options.goalTarget){goalTarget=options.goalTarget}
if(options.imageWidth!=''){widgetImg.style.width=options.imageWidth+'px'}
if(options.imageHeight!=''||parseInt(options.imageHeight)>0){widgetImg.style.height=options.imageHeight+'px'}else{widgetImg.style.height='auto'}
if(options.noAddInCookie&&options.noAddInCookie==true){noAddInCookie=true}}
if(data.ab_test==1&&typeof dataLayer!='undefined'&&dataLayer){dataLayer.push({event:'optimize.activate',})}
const place=getWidgetPlace(widget)
let postBannerTags=getPostBannerTags(data.tag_list)
let jsonBaner=JSON.stringify({widgetId:widgetId,eventType:'test',eventTags:postBannerTags,subwidgetPosition:'',widgetPlaceName:place})
initBanner(data.baner_key,jsonBaner);mainLink.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.FIXBANNER,noAddInCookie,)}}
mainLink.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.FIXBANNER,noAddInCookie,)}}
mainLink.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
widgetButton.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.FIXBANNER,noAddInCookie,)}}
widgetButton.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.FIXBANNER,noAddInCookie,)}}
widgetButton.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
widgetCloseBtn.onclick=function(e){e.preventDefault()
e.stopPropagation()
if(window.ta){window.ta('widget.close',3,{widgetId:widgetId,widgetPlaceName:place})}
return closeBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.FIXBANNER,)}
widget.style.display='block'
widget.dataset.loaded='yes'
function handleIntersection(entries){if(entries[0].intersectionRatio===1){if(entries[0].target.dataset.is_show!='1'){showBanner(data.baner_key,jsonBaner)
widget.dataset.is_show=1
if(window.ta){window.ta('widget.show',3,{widgetId:widgetId,widgetPlaceName:place})}}}}
observer.observe(widget)
requestIdleCallbackFunction(function(){widget.dataset.loaded='yes'})}
function renderAfterPostWidget(widgetID,data){let widget=document.getElementById(widgetID)
widget.dataset.isDefault=1
const widgetId=parseInt(data.id)
let mainLink=widget.querySelector('.fix-widget-main-a')
let widgetText=widget.querySelector('.after-post-widget-text')
let widgetImg=widget.querySelector('.after-post-widget-img')
let widgetButton=widget.querySelector('.after-post-widget-button')
const place=getWidgetPlace(widget)
if(data.text!=''){widgetText.innerHTML=data.text}
if(data.button_text!=''){widgetButton.innerHTML=data.button_text}
if(data.src&&data.src!=''){widgetImg.src=data.src}else if(data.image&&data.image!=''){widgetImg.src=data.image}
if(data.srcset&&data.srcset!=''){widgetImg.srcset=data.srcset}
if(data.link!=''){mainLink.href=data.link
widgetButton.href=data.link}
if(data.custom_class!=''){widget.className+=(" "+data.custom_class)}
if(data.custom_style!=''){createStyleBlock(widget,data.custom_style)}
let goalType=''
let goalTarget=0
let noAddInCookie=false
if(data.options!=''){let options=JSON.parse(data.options)
if(options.goalType){goalType=options.goalType}
if(options.goalTarget){goalTarget=options.goalTarget}
if(options.imageWidth!=''){widgetImg.style.width=options.imageWidth+'px'}
if(options.imageHeight!=''||parseInt(options.imageHeight)>0){widgetImg.style.height=options.imageHeight+'px'}else{widgetImg.style.height='auto'}
if(options.noAddInCookie&&options.noAddInCookie==true){noAddInCookie=true}}
if(data.ab_test==1&&typeof dataLayer!='undefined'&&dataLayer){dataLayer.push({event:'optimize.activate',})}
let postBannerTags=getPostBannerTags(data.tag_list)
let jsonBaner=JSON.stringify({widgetId:widgetId,eventType:'test',eventTags:postBannerTags,subwidgetPosition:'',})
initBanner(data.baner_key,jsonBaner);mainLink.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.revisedWidgetClick',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.AFTERPOST,noAddInCookie,)}}
mainLink.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.revisedWidgetClick',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.AFTERPOST,noAddInCookie,)}}
mainLink.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
widgetButton.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.revisedWidgetClick',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.AFTERPOST,noAddInCookie,)}}
widgetButton.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.revisedWidgetClick',3,{widgetId:widgetId,widgetPlaceName:place})}
return clickBanner(widget,data.baner_key,data.id,jsonBaner,bannerTypes.AFTERPOST,noAddInCookie,)}}
widgetButton.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
widget.querySelector('.h-widget').style.display='flex'
widget.querySelector('.link-block-fix-baner').style.display='block'
widget.style.display='block'
const observer=new IntersectionObserver(handleIntersection,{root:null,threshold:1})
function handleIntersection(entries){if(entries[0].intersectionRatio===1){if(entries[0].target.dataset.is_show!='1'){showBanner(data.baner_key,jsonBaner)
widget.dataset.is_show=1
if(window.ta){window.ta('widget.show.revertedFromWidgetClick',3,{widgetId:widgetId,widgetPlaceName:place})}}}}
observer.observe(widget)}
function renderTopWidget(){if(window.matchMedia('(max-width: 976px)').matches)return
let widget=document.getElementById('top-post-widget-container')
if(!widget)return
const place=getWidgetPlace(widget)
let widgetID=widget.dataset.widgetId
let widgetKey=widget.dataset.widgetKey
let postBannerTags=getPostBannerTags(widget.dataset.widgetTags)
if(window.ta){window.ta('widget.init',3,{widgetId:widgetID,widgetPlaceName:place})}
let widgetLink=widget.querySelector('.t-widget-main-a')
let noAddInCookie=true
let jsonBaner=JSON.stringify({widgetId:widgetID,eventType:'test',eventTags:postBannerTags,subwidgetPosition:'',})
initBanner(widgetKey,jsonBaner);widgetLink.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetID,widgetPlaceName:place})}
return clickBanner(widget,widgetKey,widgetID,jsonBaner,bannerTypes.TOP,noAddInCookie,)}}
widgetLink.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click',3,{widgetId:widgetID,widgetPlaceName:place})}
return clickBanner(widget,widgetKey,widgetID,jsonBaner,bannerTypes.TOP,noAddInCookie,)}}
widget.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
requestIdleCallbackFunction(function(){showBanner(widgetKey,jsonBaner)})
if(window.ta){window.ta('widget.show',3,{widgetId:widgetID,widgetPlaceName:place})}}
function renderSponsorWidgets(data,isTag){let goalType=''
let goalTarget=0
let postBannerTags=getPostBannerTags(data.tag_list)
let noAddInCookie=false
let options={}
if(data.options!=''){options=JSON.parse(data.options)}
if(options.goalType){goalType=options.goalType}
if(options.goalTarget){goalTarget=options.goalTarget}
if(options.noAddInCookie&&options.noAddInCookie==true){noAddInCookie=true}
let widgetId=parseInt(data.id)
let jsonBaner=JSON.stringify({widgetId:parseInt(data.id),eventType:'test',eventTags:postBannerTags,subwidgetPosition:'',})
let topWidget=document.getElementById('top-sponsor-widget-container')
if(topWidget){let topText=topWidget.querySelector('.sponsor-widget-text')
let topHeader=topWidget.querySelector('.sponsor-widget-top-header')
if(data.logo!=''){topWidget.querySelector('.s-widget-logo').src=data.logo}
if(data.text!=''){topText.innerHTML=data.text}
if(data.link!=''){topHeader.href=data.link}
if(options.background!=''){topHeader.style.background=options.background}else if(options.backgroundColor!=''){topHeader.style.backgroundColor=options.backgroundColor}
if(options.textColor!=''){topText.style.color=options.textColor}
let jsonBaner=JSON.stringify({widgetId:parseInt(data.id),eventType:'test',eventTags:postBannerTags,subwidgetPosition:'top',})
topHeader.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:widgetId,widgetPosition:'top',widgetPlaceName:'N/A'})}
return clickBanner(topWidget,data.baner_key,data.id,jsonBaner,bannerTypes.SPONSOR,noAddInCookie,)}}
topHeader.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:widgetId,widgetPosition:'top',widgetPlaceName:'N/A'})}
return clickBanner(topWidget,data.baner_key,data.id,jsonBaner,bannerTypes.SPONSOR,noAddInCookie,)}}
topHeader.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
topWidget.style.display='block'}
let bottomWidget=document.getElementById('bottom-sponsor-widget-container')
if(bottomWidget){let bottomHeader=bottomWidget.querySelector('.sponsor-widget-bottom-header',)
let bottomContainer=bottomWidget.querySelector('.sponsor-widget-bottom-header__container',)
let bottomWrapper=bottomWidget.querySelector('.sponsor-widget-bottom__wrapper',)
let bottomTitle=bottomWidget.querySelector('.sponsor-widget-bottom-title')
let bottomSubtitle=bottomWidget.querySelector('.sponsor-widget-bottom-subtitle',)
if(isTag){bottomContainer.classList.add('windowed')
bottomContainer.style.paddingLeft='0'
bottomContainer.style.paddingRight='0'}
if(data.logo!=''){bottomWidget.querySelector('.s-widget-logo').src=data.logo}
if(data.link!=''){bottomHeader.href=data.link}
if(data.src!=''){bottomContainer.style.backgroundImage="url('"+data.src+"')"}
if(options.sponsorTexts.bottomTitle!=''){bottomTitle.innerHTML=options.sponsorTexts.bottomTitle}
if(options.sponsorTexts.bottomSubtitle!=''){bottomSubtitle.innerHTML=options.sponsorTexts.bottomSubtitle}
if(options.background!=''){bottomHeader.style.background=options.background}else if(options.backgroundColor!=''){bottomHeader.style.backgroundColor=options.backgroundColor}
if(options.textColor!=''){bottomTitle.style.color=options.textColor
bottomSubtitle.style.color=options.textColor}
bottomHeader.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:widgetId,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
return clickBanner(bottomWidget,data.baner_key,data.id,jsonBaner,bannerTypes.SPONSOR,noAddInCookie,)}}
bottomHeader.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:widgetId,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
return clickBanner(bottomWidget,data.baner_key,data.id,jsonBaner,bannerTypes.SPONSOR,noAddInCookie,)}}
bottomHeader.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
bottomWidget.style.display='block'}
if(data.custom_style!=''){if(topWidget){createStyleBlock(bottomWidget,data.custom_style)}else if(bottomWidget){createStyleBlock(bottomWidget,data.custom_style)}}
requestIdleCallbackFunction(function(){showBanner(data.baner_key,jsonBaner)})}
function hasSponsorWidget(){if(document.getElementById('top-sponsor-widget-container')||document.getElementById('bottom-sponsor-widget-container')){return true}
return false}
const getWidgetPlace=(widget)=>{if(widget.dataset.place&&widget.dataset.place!=='')return widget.dataset.place
return ''}
function findAndActivateSponsorWidgetEvents(){let sendShow=true
let noAddInCookie=true
let topWidget=document.getElementById('top-sponsor-widget-container')
if(topWidget){let topHeader=topWidget.querySelector('.sponsor-widget-top-header')
let id=topWidget.dataset.id
if(window.ta){window.ta('widget.init.subwidget',3,{widgetId:id,widgetPosition:'top',widgetPlaceName:'N/A'})}
let bannerKey=topWidget.dataset.key
let postBannerTags=getPostBannerTags(topWidget.dataset.tags)
let jsonBanner=JSON.stringify({widgetId:parseInt(id),eventType:'test',eventTags:postBannerTags,subwidgetPosition:'top',})
initBanner(bannerKey,jsonBanner)
topHeader.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:id,widgetPosition:'top',widgetPlaceName:'N/A'})}
return clickBanner(topWidget,bannerKey,id,jsonBanner,bannerTypes.SPONSOR,noAddInCookie,)}}
topHeader.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:id,widgetPosition:'top',widgetPlaceName:'N/A'})}
return clickBanner(topWidget,bannerKey,id,jsonBanner,bannerTypes.SPONSOR,noAddInCookie,)}}
topHeader.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
if(sendShow==true){sendShow=false
requestIdleCallbackFunction(function(){if(window.ta){window.ta('widget.show.subwidget',3,{widgetId:id,widgetPosition:'top',widgetPlaceName:'N/A'})}
showBanner(bannerKey,jsonBanner)})}}
let bottomWidget=document.getElementById('bottom-sponsor-widget-container')
if(bottomWidget){let bottomHeader=bottomWidget.querySelector('.sponsor-widget-bottom-header',)
let id=bottomWidget.dataset.id
if(window.ta){window.ta('widget.init.subwidget',3,{widgetId:id,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
let bannerKey=bottomWidget.dataset.key
let postBannerTags=getPostBannerTags(bottomWidget.dataset.tags)
let isTag=bottomWidget.dataset.istag
if(window.matchMedia('(max-width: 976px)').matches&&parseInt(isTag)>0){let tgShareBlock=document.getElementById('above-content-container')
if(tgShareBlock){tgShareBlock.remove()}}
let jsonBanner=JSON.stringify({widgetId:parseInt(id),eventType:'test',eventTags:postBannerTags,subwidgetPosition:'bottom',})
initBanner(bannerKey,jsonBanner)
bottomHeader.onauxclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:id,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
return clickBanner(bottomWidget,bannerKey,id,jsonBanner,bannerTypes.SPONSOR,noAddInCookie,)}}
bottomHeader.onclick=function(e){if(e.which<3){if(window.ta){window.ta('widget.click.subwidget',3,{widgetId:id,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
return clickBanner(bottomWidget,bannerKey,id,jsonBanner,bannerTypes.SPONSOR,noAddInCookie,)}}
bottomHeader.oncontextmenu=function(e){if(e.which>2){e.preventDefault()
return false}}
if(sendShow==true){sendShow=false
requestIdleCallbackFunction(function(){if(window.ta){window.ta('widget.show.subwidget',3,{widgetId:id,widgetPosition:'bottom',widgetPlaceName:'N/A'})}
showBanner(bannerKey,jsonBanner)})}}}
function getPostBannerTags(dataTags){if(!dataTags)return
let tags=getWordpressPostTagsForWidget()
let bannerTags=dataTags.split(',')
let arrays=[tags,bannerTags]
let postBannerTags=arrays.reduce((join,current)=>join.filter((el)=>current.includes(el))).join(',')
return postBannerTags}
document.addEventListener("DOMContentLoaded",function(event){if(window.docCookies){initBannerSystem()}
else{window.docCookiesLoaded=initBannerSystem}})})();;window.docCookies={get:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},set:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},remove:function(sKey,sPath,sDomain){if(!sKey||!this.has(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},has:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);}};if(typeof window.docCookiesLoaded==='function')window.docCookiesLoaded();;var _ta={endpoint:'https://track.tproger.ru',collapseAllowedFor:['performance'],userIdCached:null,requestsSeriesId:null,isRequestIdleCallbackScheduled:false,queue:[],processPendingEvents:function(deadline){this.isRequestIdleCallbackScheduled=false
if(typeof deadline==='undefined'||typeof deadline.timeRemaining!=='function'){deadline={timeRemaining:()=>Number.MAX_VALUE}}
while(deadline.timeRemaining()>0&&this.queue.length>0){const{name,version,data,date}=this.queue.shift()
this.sendEvent(name,version,data,date)}
if(this.queue.length>0){this.schedulePendingEvents()}},schedulePendingEvents:async function(){if(this.isRequestIdleCallbackScheduled||document.readyState!=='complete'){return}
this.isRequestIdleCallbackScheduled=true
let dataMap={}
let dateMap={}
let versionMap={}
this.queue=this.queue.filter(event=>{if(this.collapseAllowedFor.includes(event.name)){if(event.name in versionMap&&versionMap[event.name]!==event.version){return true;}
versionMap[event.name]=event.version
dateMap[event.name]=event.date
dataMap[event.name]=Object.assign(dataMap[event.name]||{},event.data)
return false}
return true})
for(const[name,data]of Object.entries(dataMap)){this.queue.push({name:name,version:versionMap[name],data:data,date:dateMap[name]})}
if('requestIdleCallback'in window){window.requestIdleCallback(this.processPendingEvents.bind(this),{timeout:2000})}else{this.processPendingEvents()}},init:function(){if(window.ta&&window.ta.q){while(window.ta.q.length>0){let[date,name,version,data]=window.ta.q.shift()
this.checkParams(name,version,data)
this.queue.push({name:name,version:version,data:data,date:date})}}
window.ta=this.scheduleEvent.bind(this)
this.requestsSeriesId=this.generateUUID()
this.schedulePendingEvents()
window.addEventListener('load',this.schedulePendingEvents.bind(this))
window.addEventListener('pagehide',this.processPendingEvents.bind(this))
document.addEventListener('visibilitychange',()=>document.visibilityState==='hidden'&&this.processPendingEvents())
window.ta.loaded=true},generateUUID:function(){let d=new Date().getTime()
let d2=(performance&&performance.now&&(performance.now()*1000))||0
return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){let r=Math.random()*16
if(d>0){r=(d+r)%16|0
d=Math.floor(d/16)}else{r=(d2+r)%16|0
d2=Math.floor(d2/16)}
return(c==='x'?r:(r&0x3|0x8)).toString(16)});},updateUserId:function(uuid){return docCookies.set('_ta',uuid,new Date(Date.now()+2*365*24*60*60*1000),'/',document.location.hostname)},generateAndSaveUserId:function(){this.userIdCached=this.generateUUID()
return this.updateUserId(this.userIdCached)?this.userIdCached:null},getUserId:function(){this.userIdCached=this.userIdCached||docCookies.get('_ta')||this.generateAndSaveUserId()
return this.userIdCached},sendEvent:function(name,version,data,date){if(typeof data!=='object'){data={}}
if(name==='pageview'){this.updateUserId(this.getUserId())}
const url=`${this.endpoint}?eventName=${name}&eventVersion=${version}&userId=${this.getUserId()}&eventTimestamp=${date.getTime()}&eventTimestampTimezone=${date.getTimezoneOffset()}&requestsSeriesId=${this.requestsSeriesId}`;(navigator.sendBeacon&&navigator.sendBeacon(url,JSON.stringify(data)))||fetch(url,{method:'POST',mode:'no-cors',cache:'no-cache',keepalive:true,body:JSON.stringify(data),})},scheduleEvent:function(name,version,data){this.checkParams(name,version,data)
this.queue.push({name:name,version:version,data:data,date:new Date})
this.schedulePendingEvents()},checkParams:function(name,version,data){if(typeof name!=='string'){throw new Error('ta(name, version, data): first argument must be of type string')}
if(typeof version!=='number'){throw new Error('ta(name, version, data): second argument must be of type number')}
if(data!==undefined&&typeof data!=='object'){throw new Error('ta(name, version, data): third argument must be of type object or undefined')}}}
_ta.init();window.setAnalyticsSentryTags=()=>{if(typeof Sentry==='object'){Sentry.configureScope(function(scope){scope.setTag('ta.userId',_ta.getUserId())
scope.setTag('ta.requestsSeriesId',_ta.requestsSeriesId)})}}
setAnalyticsSentryTags();var Perfume=function(){"use strict";var n={t:!1,i:!1,o:3e4},t=window,e=t.console,i=document,r=t.navigator,o=t.performance,u=function(){return r.deviceMemory},c=function(){return r.hardwareConcurrency},a=function(){return o&&!!o.getEntriesByType&&!!o.now&&!!o.mark},f="4g",s=!1,l=function(){return!!(c()&&c()<=4)||!!(u()&&u()<=4)},m=function(n,t){switch(n){case"slow-2g":case"2g":case"3g":return!0;default:return l()||t}},v={u:!1},d=function(n){i.hidden&&(n(),v.u=i.hidden)},p=function(n){return parseFloat(n.toFixed(4))},g=function(n){return"number"!=typeof n?null:p(n/Math.pow(1024,2))},b=[2e3,4e3],h=[2500,4e3],T=[.1,.25],k={ttfb:[200,500],fp:b,fcp:b,lcp:h,lcpFinal:h,fid:[100,300],cls:T,clsFinal:T,tbt:[200,600],ntbt:[200,600]},y=function(n,t){return k[n]?t<=k[n][0]?"good":t<=k[n][1]?"needsImprovement":"poor":null},w=function(e,i,o){var a;a=function(){v.u&&e.indexOf("Final")<0||!n.analyticsTracker||n.analyticsTracker({metricName:e,data:i,eventProperties:o||{},navigatorInformation:r?{deviceMemory:u()||0,hardwareConcurrency:c()||0,serviceWorkerStatus:"serviceWorker"in r?r.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:l(),isLowEndExperience:m(f,s)}:{},vitalsScore:y(e,i)})},"requestIdleCallback"in t?t.requestIdleCallback(a,{timeout:3e3}):a()},_=function(n,t,e){Object.keys(t).forEach((function(n){"number"==typeof t[n]&&(t[n]=p(t[n]))})),w(n,t,e)},F=function(t,e,i){var r=p(t);r<=n.o&&r>=0&&w(e,r,i)},E={},P={value:0},x={value:0},D={value:0},I={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},j={value:0},q={value:0},C=function(n){var t=n.pop();t&&!t.s&&t.value&&(P.value+=t.value)},L={},O=function(n,t){try{var i=new PerformanceObserver((function(n){t(n.getEntries())}));return i.observe({type:n,buffered:!0}),i}catch(n){e.warn("Perfume.js:",n)}return null},S=function(n){L[n]&&L[n].disconnect(),delete L[n]},W=function(n){var t=n.pop();t&&F(t.processingStart-t.startTime,"fid",{performanceEntry:t}),S(1),F(D.value,"lcp"),L[3]&&"function"==typeof L[3].takeRecords&&L[3].takeRecords(),F(P.value,"cls"),setTimeout((function(){F(j.value,"tbt"),_("dataConsumption",I.value)}),1e4)},B=function(n){n.forEach((function(n){if(!("self"!==n.name||n.startTime<x.value)){var t=n.duration-50;t>0&&(j.value+=t,q.value+=t)}}))},M=function(n){n.forEach((function(n){"first-paint"===n.name?F(n.startTime,"fp"):"first-contentful-paint"===n.name&&(x.value=n.startTime,F(x.value,"fcp"),L[4]=O("longtask",B),S(0))}))},z=function(n){var t=n.pop();t&&(D.value=t.renderTime||t.loadTime)},H=function(n){n.forEach((function(n){n.identifier&&F(n.startTime,n.identifier)}))},N=function(t){t.forEach((function(t){if(n.t&&_("resourceTiming",t),t.decodedBodySize&&t.initiatorType){var e=t.decodedBodySize/1e3;I.value[t.initiatorType]+=e,I.value.total+=e}}))},R=function(){L[2]&&(F(D.value,"lcpFinal"),S(2)),L[3]&&("function"==typeof L[3].takeRecords&&L[3].takeRecords(),F(P.value,"clsFinal"),S(3))},A=function(n){var t="usageDetails"in n?n.usageDetails:{};_("storageEstimate",{quota:g(n.quota),usage:g(n.usage),caches:g(t.caches),indexedDB:g(t.indexedDB),serviceWorker:g(t.serviceWorkerRegistrations)})},G=0;return function(){function e(e){if(void 0===e&&(e={}),this.l="7.0.0",n.analyticsTracker=e.analyticsTracker,n.t=!!e.resourceTiming,n.i=!!e.elementTiming,n.o=e.maxMeasureTime||n.o,a()){"PerformanceObserver"in t&&(L[0]=O("paint",M),L[1]=O("first-input",W),L[2]=O("largest-contentful-paint",z),n.t&&O("resource",N),L[3]=O("layout-shift",C),n.i&&O("element",H)),void 0!==i.hidden&&i.addEventListener("visibilitychange",d.bind(this,R));var u=function(){if(!a())return{};var n=o.getEntriesByType("navigation")[0];if(!n)return{};var t=n.responseStart,e=n.responseEnd;return{fetchTime:e-n.fetchStart,workerTime:n.workerStart>0?e-n.workerStart:0,totalTime:e-n.requestStart,downloadTime:e-t,timeToFirstByte:t-n.requestStart,headerSize:n.transferSize-n.encodedBodySize||0,dnsLookupTime:n.domainLookupEnd-n.domainLookupStart,redirectTime:n.redirectEnd-n.redirectStart}}();_("navigationTiming",u),u.timeToFirstByte&&F(u.timeToFirstByte,"ttfb"),_("networkInformation",function(){if("connection"in r){var n=r.connection;return"object"!=typeof n?{}:(f=n.effectiveType,s=!!n.saveData,{downlink:n.downlink,effectiveType:n.effectiveType,rtt:n.rtt,saveData:!!n.saveData})}return{}}()),r&&r.storage&&"function"==typeof r.storage.estimate&&r.storage.estimate().then(A)}}return e.prototype.start=function(n){a()&&!E[n]&&(E[n]=!0,o.mark("mark_"+n+"_start"),v.u=!1)},e.prototype.end=function(n,t,e){if(void 0===t&&(t={}),void 0===e&&(e=!0),a()&&E[n]){o.mark("mark_"+n+"_end"),delete E[n];var i=function(n){o.measure(n,"mark_"+n+"_start","mark_"+n+"_end");var t=o.getEntriesByName(n).pop();return t&&"measure"===t.entryType?t.duration:-1}(n);e&&_(n,p(i),t)}},e.prototype.endPaint=function(n,t){var e=this;setTimeout((function(){e.end(n,t)}))},e.prototype.clear=function(n){delete E[n],o.clearMarks&&(o.clearMarks("mark_"+n+"_start"),o.clearMarks("mark_"+n+"_end"))},e.prototype.markNTBT=function(){var n=this;this.start("ntbt"),q.value=0,clearTimeout(G),G=setTimeout((function(){n.end("ntbt",{},!1),F(q.value,"ntbt"),q.value=0}),2e3)},e}()}();;(function(){var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,k="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function l(){l=function(){};h.Symbol||(h.Symbol=m)}var n=0;function m(a){return"jscomp_symbol_"+(a||"")+n++}
function p(){l();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&k(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q(this)}});p=function(){}}function q(a){var b=0;return r(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function r(a){p();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}function t(a){p();var b=a[Symbol.iterator];return b?b.call(a):q(a)}
function u(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var v=0;function w(a,b){var c=XMLHttpRequest.prototype.send,d=v++;XMLHttpRequest.prototype.send=function(f){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];var E=this;a(d);this.addEventListener("readystatechange",function(){4===E.readyState&&b(d)});return c.apply(this,e)}}
function x(a,b){var c=fetch;fetch=function(d){for(var f=[],e=0;e<arguments.length;++e)f[e-0]=arguments[e];return new Promise(function(d,e){var g=v++;a(g);c.apply(null,[].concat(u(f))).then(function(a){b(g);d(a)},function(a){b(a);e(a)})})}}var y="img script iframe link audio video source".split(" ");function z(a,b){a=t(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.includes(c.nodeName.toLowerCase())||z(c.children,b))return!0;return!1}
function A(a){var b=new MutationObserver(function(c){c=t(c);for(var b=c.next();!b.done;b=c.next())b=b.value,"childList"==b.type&&z(b.addedNodes,y)?a(b):"attributes"==b.type&&y.includes(b.target.tagName.toLowerCase())&&a(b)});b.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]});return b}
function B(a,b){if(2<a.length)return performance.now();var c=[];b=t(b);for(var d=b.next();!d.done;d=b.next())d=d.value,c.push({timestamp:d.start,type:"requestStart"}),c.push({timestamp:d.end,type:"requestEnd"});b=t(a);for(d=b.next();!d.done;d=b.next())c.push({timestamp:d.value,type:"requestStart"});c.sort(function(a,b){return a.timestamp-b.timestamp});a=a.length;for(b=c.length-1;0<=b;b--)switch(d=c[b],d.type){case "requestStart":a--;break;case "requestEnd":a++;if(2<a)return d.timestamp;break;default:throw Error("Internal Error: This should never happen");}return 0}function C(a){a=a?a:{};this.w=!!a.useMutationObserver;this.u=a.minValue||null;a=window.__tti&&window.__tti.e;var b=window.__tti&&window.__tti.o;this.a=a?a.map(function(a){return{start:a.startTime,end:a.startTime+a.duration}}):[];b&&b.disconnect();this.b=[];this.f=new Map;this.j=null;this.v=-Infinity;this.i=!1;this.h=this.c=this.s=null;w(this.m.bind(this),this.l.bind(this));x(this.m.bind(this),this.l.bind(this));D(this);this.w&&(this.h=A(this.B.bind(this)))}
C.prototype.getFirstConsistentlyInteractive=function(){var a=this;return new Promise(function(b){a.s=b;"complete"==document.readyState?F(a):window.addEventListener("load",function(){F(a)})})};function F(a){a.i=!0;var b=0<a.a.length?a.a[a.a.length-1].end:0,c=B(a.g,a.b);G(a,Math.max(c+5E3,b))}
function G(a,b){!a.i||a.v>b||(clearTimeout(a.j),a.j=setTimeout(function(){var b=performance.timing.navigationStart,d=B(a.g,a.b),b=(window.a&&window.a.A?1E3*window.a.A().C-b:0)||performance.timing.domContentLoadedEventEnd-b;if(a.u)var f=a.u;else performance.timing.domContentLoadedEventEnd?(f=performance.timing,f=f.domContentLoadedEventEnd-f.navigationStart):f=null;var e=performance.now();null===f&&G(a,Math.max(d+5E3,e+1E3));var g=a.a;5E3>e-d?d=null:(d=g.length?g[g.length-1].end:b,d=5E3>e-d?null:Math.max(d,f));d&&(a.s(d),clearTimeout(a.j),a.i=!1,a.c&&a.c.disconnect(),a.h&&a.h.disconnect());G(a,performance.now()+1E3)},b-performance.now()),a.v=b)}
function D(a){a.c=new PerformanceObserver(function(b){b=t(b.getEntries());for(var c=b.next();!c.done;c=b.next())if(c=c.value,"resource"===c.entryType&&(a.b.push({start:c.fetchStart,end:c.responseEnd}),G(a,B(a.g,a.b)+5E3)),"longtask"===c.entryType){var d=c.startTime+c.duration;a.a.push({start:c.startTime,end:d});G(a,d+5E3)}});a.c.observe({entryTypes:["longtask","resource"]})}C.prototype.m=function(a){this.f.set(a,performance.now())};C.prototype.l=function(a){this.f.delete(a)};C.prototype.B=function(){G(this,performance.now()+5E3)};h.Object.defineProperties(C.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.f.values()))}}});var H={getFirstConsistentlyInteractive:function(a){a=a?a:{};return"PerformanceLongTaskTiming"in window?(new C(a)).getFirstConsistentlyInteractive():Promise.resolve(null)}};"undefined"!=typeof module&&module.exports?module.exports=H:"function"===typeof define&&define.amd?define("ttiPolyfill",[],function(){return H}):window.ttiPolyfill=H;})();const sendMetrics=data=>ta('performance',1,data)
const getIntValue=value=>Math.round(parseFloat(value))
const isDownlinkNumber=downlink=>downlink==parseInt(downlink,10)
const roundBy=(value,bucketSize)=>Math.floor(value/bucketSize)*bucketSize
const toInterval=(value,interval,max)=>{const rounded=roundBy(value,interval)
return rounded>=max?max+'+':rounded+'-'+(rounded+interval)}
const toFloatInterval=(value,interval,max)=>{const rounded=parseFloat(roundBy(value,interval).toFixed(2))
return rounded>=max?max+'+':rounded+'-'+(rounded+interval).toFixed(2)}
const metricToInterval=(name,value)=>{switch(name){case 'lcp':case 'fcp':return toInterval(value,500,5000)
case 'fid':return toInterval(value,50,500)
case 'cls':return toFloatInterval(value,0.05,0.5)
case 'tbtFinal':return toInterval(value,250,2500)
case 'tti':return toInterval(value,500,9000)}
return value}
const addTagToSentry=(name,value)=>{if(window.Sentry){Sentry.configureScope(function(scope){scope.setTag(name,metricToInterval(name,value))})}}
const sendEventToSentry=message=>{const sentrySamplingRate=0.1;if(window.Sentry&&Math.random()<sentrySamplingRate){Sentry.captureMessage(message)}}
const layoutShiftAttributionListToString=list=>[...list].reduce((accumulator,list)=>accumulator+list.node.cloneNode().outerHTML,'')
const domRectReadOnlyToString=r=>JSON.stringify({x:r.x,y:r.y,width:r.width,height:r.height})
const sendTopClsContributors=message=>{const sentryClsSamplingRate=0.15
if(window.Sentry&&Math.random()<sentryClsSamplingRate){try{const po=new PerformanceObserver(list=>{let clsContributors=[]
const entries=list.getEntries()
for(let i=0;i<entries.length;i++){if(!entries[i].hadRecentInput){let clsContributor={clsAdded:entries[i].value,shiftedNodes:layoutShiftAttributionListToString(entries[i].sources),}
if(entries[i].sources.length===1){clsContributor.previousRect=domRectReadOnlyToString(entries[i].sources[0].previousRect)
clsContributor.currentRect=domRectReadOnlyToString(entries[i].sources[0].currentRect)}
clsContributors.push(clsContributor)}}
Sentry.captureMessage(message,{extra:{'Top CLS contributors':clsContributors.sort((a,b)=>b.clsAdded-a.clsAdded).slice(0,3)}})
po.disconnect()})
po.observe({type:'layout-shift',buffered:true})}catch(e){}}}
ttiPolyfill.getFirstConsistentlyInteractive().then(tti=>{if(tti){sendMetrics({timeToInteractive:getIntValue(tti)})
addTagToSentry('tti',getIntValue(tti))}})
const perfume=new Perfume({analyticsTracker:options=>{const{metricName,data}=options
switch(metricName){case 'navigationTiming':if(data&&data.timeToFirstByte){sendMetrics({workerTime:data.workerTime,dnsLookupTime:data.dnsLookupTime,downloadTime:data.downloadTime,timeToFirstByte:getIntValue(data.timeToFirstByte)})}
break
case 'networkInformation':let metrics={effectiveType:data.effectiveType,rtt:getIntValue(data.rtt)}
if(isDownlinkNumber(data.downlink)){metrics.downlink=getIntValue(data.downlink*1024)}
sendMetrics(metrics)
addTagToSentry('effectiveType',data.effectiveType)
break
case 'clsFinal':sendMetrics({[metricName+'_us']:getIntValue(data*1000)})
addTagToSentry('cls',data)
data>0.1&&sendTopClsContributors('CLS is higher than 0.1')
break
case 'tbtFinal':case 'fcp':case 'fid':case 'lcp':sendMetrics({[metricName]:getIntValue(data)})
addTagToSentry(metricName,data)
metricName==='fid'&&data>100&&sendEventToSentry('FID is higher than 100 milliseconds')
metricName==='lcp'&&data>2500&&sendEventToSentry('LCP is higher than 2.5 seconds')
break}}});window.addEventListener('DOMContentLoaded',()=>{const loggedIn=document.body.classList.contains('logged-in')?1:0
const cacheStatus=docCookies.get('cf_cache_status')
sendMetrics({isUserLoggedInToWordpress:loggedIn,cfCacheStatus:cacheStatus})
addTagToSentry('cfCacheStatus',cacheStatus)});function processTags(){function getEntitiesList(classList,entityPrefix,tagPrefix){var tags=[];classList.forEach(item=>{if(item.startsWith(entityPrefix)){tags.push(tagPrefix+item);}});return tags;}
function getTagsList(classList,tagPrefix){return getEntitiesList(classList,'tag-',tagPrefix);}
function getCategoriesList(classList,tagPrefix){return getEntitiesList(classList,'category-',tagPrefix);}
function sendTagsVK(newTags){newTags.forEach(newTag=>{VK.Retargeting.Event(newTag);});}
function sendTagsFB(newTags){var event=newTags[0].substr(0,newTags[0].indexOf('-'));var tagsToSend=[];var categoriesToSend=[];newTags.forEach(newTag=>{if(newTag.indexOf('-tag-')!==-1){tagsToSend.push(newTag.replace(event+'-tag-',''));}else{categoriesToSend.push(newTag.replace(event+'-category-',''));}});fbq('trackCustom',event,{tags:tagsToSend,categories:categoriesToSend});}
function sendTags(newTags,checkPostsKey,postId){if(newTags.length>0){if(typeof OneSignal!=='undefined'){OneSignal.push(['getTags',function(tags){let tagsToSend={};if(checkPostsKey&&postId>0){let postIds=[];if(typeof tags[checkPostsKey]==='string'){postIds=tags[checkPostsKey].split(',');if(postIds.includes(postId.toString()))return;}
postIds.push(postId);tagsToSend[checkPostsKey]=postIds.join();}
newTags.forEach(newTag=>{if(newTag in tags){tagsToSend[newTag]=parseInt(tags[newTag])+1;}else{tagsToSend[newTag]=1;}});OneSignal.sendTags(tagsToSend,function(tagsSent){});}]);}
if(typeof VK!=='undefined'&&typeof VK.Retargeting!=='undefined'){sendTagsVK(newTags);}else{window.vkRetargetInit=function(){sendTagsVK(newTags);}}
if(typeof fbq==='function'){sendTagsFB(newTags);}else{window.fbRetargetInit=function(){sendTagsFB(newTags);}}}}
function getArticleTagsAndSendNow(tagPrefix,checkPostsKey){const articleElem=document.querySelector('#content > article.post');if(articleElem){const postId=parseInt(articleElem.getAttribute('id').replace('post-',''));const classList=articleElem.classList;const viewTags=getTagsList(classList,tagPrefix);const viewCategories=getCategoriesList(classList,tagPrefix);sendTags(viewTags.concat(viewCategories),checkPostsKey,postId);}}
function getArticleTagsAndSend(tagPrefix,checkPostsKey){if('requestIdleCallback'in window){window.requestIdleCallback(function(){getArticleTagsAndSendNow(tagPrefix,checkPostsKey)});}else{getArticleTagsAndSendNow(tagPrefix,checkPostsKey);}}
function setArticleReadChecker(){const articleEndBeaconObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){let elem=entry.target;observer.unobserve(elem);if(typeof ga!=='undefined'){ga('send','event','article','read');}
getArticleTagsAndSend('read-','posts-read');if(window.approveAchieve&&window.postID&&window.postID!==-1){window.approveAchieve('Чтение — вот лучшее учение!',window.postID);}}});},{root:null,rootMargin:'0px',threshold:1.0});const articleEndBeackonElement=document.getElementById('article-end-beacon')
if(articleEndBeackonElement){articleEndBeaconObserver.observe(articleEndBeackonElement);}}
getArticleTagsAndSend('view-');function sendArticleVisited(){getArticleTagsAndSend('visit-','posts-visited');}
setTimeout(sendArticleVisited,7*1000);setTimeout(setArticleReadChecker,21*1000);const articleEndBeacon=document.getElementById('article-end-beacon')
if(articleEndBeacon){const articleEndBeaconObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){observer.unobserve(entry.target)
ta('post.endBeaconReached',1,{postId:window.postID})}})},{root:null,rootMargin:'0px',threshold:1.0});articleEndBeaconObserver.observe(articleEndBeacon)}}
if(/complete|interactive|loaded/.test(document.readyState)){processTags();}else{document.addEventListener('DOMContentLoaded',processTags,false);};var seconds=formatNum.bind(null,'секунду','%s секунду','%s секунды','%s секунд'),minutes=formatNum.bind(null,'минуту','%s минуту','%s минуты','%s минут'),hours=formatNum.bind(null,'час','%s час','%s часа','%s часов'),days=formatNum.bind(null,'день','%s день','%s дня','%s дней'),weeks=formatNum.bind(null,'неделю','%s неделю','%s недели','%s недель'),months=formatNum.bind(null,'месяц','%s месяц','%s месяца','%s месяцев'),years=formatNum.bind(null,'год','%s год','%s года','%s лет')
var russianLocale=function(number,index){switch(index){case 0:return['только что','через несколько секунд']
case 1:return[seconds(number)+' назад','через '+seconds(number)]
case 2:case 3:return[minutes(number)+' назад','через '+minutes(number)]
case 4:case 5:return[hours(number)+' назад','через '+hours(number)]
case 6:return['вчера','завтра']
case 7:return[days(number)+' назад','через '+days(number)]
case 8:case 9:return[weeks(number)+' назад','через '+weeks(number)]
case 10:case 11:return[months(number)+' назад','через '+months(number)]
case 12:case 13:return[years(number)+' назад','через '+years(number)]
default:return['','']}}
function formatNum(f1,f,s,t,n){var n10=n%10,str=t
if(n===1){str=f1}else if(n10===1&&n>20){str=f}else if(n10>1&&n10<5&&(n>20||n<10)){str=s}
return str}
!(function(root,factory){if(typeof module==='object'&&module.exports){module.exports=factory(root)
module.exports['default']=module.exports}else root.timeago=factory(root)})(typeof window!=='undefined'?window:this,function(){;(locales={}),(SEC_ARRAY=[60,60,24,7,365/7/12,12]),(SEC_ARRAY_LEN=6),(ATTR_DATA_TID='data-tid'),(timers={})
function toDate(input){if(input instanceof Date)return input
if(!isNaN(input))return new Date(toInt(input))
if(/^\d+$/.test(input))return new Date(toInt(input))
input=(input||'').trim().replace(/\.\d+/,'').replace(/-/,'/').replace(/-/,'/').replace(/(\d)T(\d)/,'$1 $2').replace(/Z/,' UTC').replace(/([\+\-]\d\d)\:?(\d\d)/,' $1$2')
return new Date(input)}
function toInt(f){return parseInt(f)}
function formatDiff(diff,locale,defaultLocale){locale=locales[locale]?locale:locales[defaultLocale]?defaultLocale:'en'
var i=0,agoin=diff<0?1:0,total_sec=(diff=Math.abs(diff))
for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;i++){diff/=SEC_ARRAY[i]}
diff=toInt(diff)
i*=2
if(diff>(i===0?9:1))i+=1
return locales[locale](diff,i,total_sec)[agoin].replace('%s',diff)}
function diffSec(date,nowDate){nowDate=nowDate?toDate(nowDate):new Date()
return(nowDate-toDate(date))/1000}
function nextInterval(diff){var rst=1,i=0,d=Math.abs(diff)
for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;i++){diff/=SEC_ARRAY[i]
rst*=SEC_ARRAY[i]}
d=d%rst
d=d?rst-d:rst
return Math.ceil(d)}
function Timeago(nowDate,defaultLocale){this.nowDate=nowDate
this.defaultLocale=defaultLocale||'en'}
Timeago.prototype.getLocalDate=function(date,timezone=null){const options={year:'numeric',month:'long',day:'numeric'}
if(timezone){options.timezone=timezone}
return new Date(date).toLocaleDateString('ru-RU',options).replace(new Date().getFullYear()+' г.','').replace(' г.','').trim()}
Timeago.prototype.getLocalTime=function(date,timezone=null){const options={hour:'numeric',minute:'numeric'}
if(timezone){options.timezone=timezone}
return new Date(date).toLocaleTimeString('ru-RU',options).trim()}
Timeago.prototype.doRender=function(node,date,locale){var diff=diffSec(date,this.nowDate),self=this,tid
node.innerHTML=formatDiff(diff,locale,this.defaultLocale).replace('вчера','вчера в '+this.getLocalTime(date)).replace('завтра','завтра в '+this.getLocalTime(date))
timers[(tid=setTimeout(function(){self.doRender(node,date,locale)
delete timers[tid]},Math.min(nextInterval(diff)*1000,0x7fffffff)))]=0
node.setAttribute(ATTR_DATA_TID,tid)}
Timeago.prototype.format=function(date,locale){return formatDiff(diffSec(date,this.nowDate),locale,this.defaultLocale)}
Timeago.prototype.render=function(nodes,locale){if(nodes.length===undefined)nodes=[nodes]
for(var i=0,len=nodes.length;i<len;i++){this.doRender(nodes[i],nodes[i].getAttribute('datetime'),locale)}}
Timeago.prototype.doLocalTime=function(node,date){node.innerText=[this.getLocalDate(date),this.getLocalTime(date)].join(' в ')}
Timeago.prototype.localTime=function(nodes){if(nodes.length===undefined)nodes=[nodes]
for(var i=0,len=nodes.length;i<len;i++){this.doLocalTime(nodes[i],nodes[i].getAttribute('datetime'))}}
Timeago.prototype.setLocale=function(locale){this.defaultLocale=locale}
function timeagoFactory(nowDate,defaultLocale){return new Timeago(nowDate,defaultLocale)}
timeagoFactory.register=function(locale,localeFunc){locales[locale]=localeFunc}
timeagoFactory.cancel=function(node){var tid
if(node){tid=node.getAttribute(ATTR_DATA_TID)
if(tid){clearTimeout(tid)
delete timers[tid]}}else{for(tid in timers)clearTimeout(tid)
timers={}}}
return timeagoFactory})
timeago.register('ru-RU',russianLocale)
var timeagoInstance=timeago()
window.timeagoInstanceRun=()=>{timeagoInstance.render(document.querySelectorAll('time.timeago'),'ru-RU')
timeagoInstance.localTime(document.querySelectorAll('time.localtime'))
const $timeagoElems=document.querySelectorAll('time.timeago');for(const $item of $timeagoElems){$item.dataset.loaded='yes';}}
window.timeagoInstanceRun();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e){var t=!0,n=!1,o=null,d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function i(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function s(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function u(e){t=!1}function a(){document.addEventListener("mousemove",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c),document.addEventListener("pointermove",c),document.addEventListener("pointerdown",c),document.addEventListener("pointerup",c),document.addEventListener("touchmove",c),document.addEventListener("touchstart",c),document.addEventListener("touchend",c)}function c(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c),document.removeEventListener("pointermove",c),document.removeEventListener("pointerdown",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",c))}document.addEventListener("keydown",function(n){n.metaKey||n.altKey||n.ctrlKey||(i(e.activeElement)&&s(e.activeElement),t=!0)},!0),document.addEventListener("mousedown",u,!0),document.addEventListener("pointerdown",u,!0),document.addEventListener("touchstart",u,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(n&&(t=!0),a())},!0),a(),e.addEventListener("focus",function(e){var n,o,u;i(e.target)&&(t||(n=e.target,o=n.type,"INPUT"===(u=n.tagName)&&d[o]&&!n.readOnly||"TEXTAREA"===u&&!n.readOnly||n.isContentEditable))&&s(e.target)},!0),e.addEventListener("blur",function(e){var t;i(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout(function(){n=!1},100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)});;(()=>{const authWindowScript=()=>{const routes={user:"/wp-node/auth/user",auth:{github:"/wp-node/auth/login/github",google:"/wp-node/auth/login/google",twitter:"/wp-node/auth/login/twitter",vk:"/wp-node/auth/login/vk",yandex:"/wp-node/auth/login/yandex",telegram:"/wp-node/auth/telegram/callback",},personal:"/personal",achievements:{set:"/wp-node/achieve",},};const defaultLogo="/wp-content/themes/gecko/assets/img/logo.svg";const authPlaces={default:"profileThumbnail",comments:"comments",bookmark:"bookmark",reaction:"reaction",notification:"notification",other:"other",};window.authPlaces=authPlaces;const hiddenTelegramButton=document.querySelector(".telegram-auth-button__inner");const agree=document.getElementById("user-login-checkbox");const agreeText=document.querySelector(".warning__container");if(agree){agree.addEventListener("click",()=>{if(agree.checked===true){if(hiddenTelegramButton){hiddenTelegramButton.style.display="none";}
if(agreeText){agreeText.style.display="none";}}else{if(hiddenTelegramButton){hiddenTelegramButton.style.display="block";}}});}
const validate=()=>{if(!agree){return true;}
if(!agree.checked&&agreeText){agreeText.style.display="block";return false;}
return true;};const getCookie=(name)=>{const match=document.cookie.match(new RegExp("(^| )"+name+"=([^;]+)"));if(match)return match[2];};const getHeaders=()=>{let token=getCookie("tproger_auth_token");try{token=JSON.parse(window.atob(token)).message??"";}catch(e){token="";}
return{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${token}`,};};window.getHeaders=getHeaders;const getPostIDs=()=>{const posts=document.getElementsByClassName("post");const ids=[];for(let i=0;i<posts.length;i++){ids.push(parseInt(posts[i].id.replace("post-","")));}
return ids;};window.getPostIDs=getPostIDs;const telegramBotUsername=window.authTelegram.botUsername;const loginButton=document.getElementById("tproger-login-button");const loginForm=document.querySelector("#tproger-login-popup");const modalCover=loginForm.querySelector(".tproger-login-popup__cover");const modalContainer=loginForm.querySelector(".tproger-login-popup__container");const closeButton=loginForm.querySelector("#tproger-login-popup__close");const notificationButton=document.querySelector("#tproger-notification-button");const notificationAuthPopup=document.querySelector("#notification__auth-popup");const closeButtonNotificationAuthPopup=document.getElementById("closeButtonNotificationAuthPopup");const notificationCount=notificationButton.querySelector(".notifications__count-badge");function initialBadgeNotifications(){if(!checkFlagViewNotifications()){showBadgeNotifications();}}
initialBadgeNotifications();function checkFlagViewNotifications(){if(window.localStorage.getItem("viewNotification")){return true;}else{return false;}}
function setFlagViewNotifications(){window.localStorage.setItem("viewNotification","yes");}
function removeFlagViewNotifications(){window.localStorage.removeItem("viewNotification");}
function hideBadgeNotifications(){notificationCount.classList.add("notifications__count-badge--hide");}
function showBadgeNotifications(){notificationCount.classList.remove("notifications__count-badge--hide");}
const closeAuthModal=()=>{if(modalContainer&&modalCover){modalContainer.classList.remove("open");modalCover.style.display="none";}
return;};const getAuthPlace=()=>{if(window.authPlace){return window.authPlace;}
return window.authPlaces.other;};const openAuthNotificationModal=()=>{if(window.ta){window.ta("user.login.request",1,{initiator:getAuthPlace(),});}
if(notificationAuthPopup){notificationAuthPopup.classList.toggle("open");return;}
return;};const createTelegramScript=(itemClass)=>{const item=modalContainer.querySelector(itemClass);const script=document.createElement("script");script.src="https://telegram.org/js/telegram-widget.js?15";script.dataset.telegramLogin=telegramBotUsername;script.dataset.size="large";script.dataset.userpic="false";script.dataset.radius="8";script.dataset.onauth="window.onTelegramAuth(user)";script.dataset.requestAccess="write";script.async=true;if(!item.querySelector("script")){item.append(script);}
script.onload=()=>{const loading=item.querySelector(".loading-vertical");if(loading){item.querySelector(".loading-vertical").remove();}};return script;};const openAuthModal=()=>{if(window.ta){window.ta("user.login.request",1,{initiator:getAuthPlace(),});}
if(modalContainer&&modalCover){modalContainer.classList.add("open");modalCover.style.display="block";createTelegramScript(".telegram-auth-button");return;}
return;};window.openAuthModal=openAuthModal;const getButtonSocialClick=(socialButton,socialRoutes)=>{document.querySelectorAll(socialButton).forEach((social)=>social.addEventListener("click",()=>{if(validate()===true){openAuthWindowNew(socialRoutes);}}),);};if(loginForm&&loginButton&&notificationAuthPopup){closeButton.onclick=()=>{closeAuthModal();};modalCover.onclick=()=>{closeAuthModal();};getButtonSocialClick(".btn-social__vk",routes.auth.vk);getButtonSocialClick(".btn-social__twitter",routes.auth.twitter);getButtonSocialClick(".btn-social__github",routes.auth.github);getButtonSocialClick(".btn-social__google",routes.auth.google);getButtonSocialClick(".btn-social__yandex",routes.auth.yandex);loginForm.querySelector(".telegram-auth-button").addEventListener("click",(e)=>{if(validate()!==true){e.preventDefault();return;}});}
if(notificationButton&&notificationAuthPopup){notificationButton.onclick=()=>{if(!window.currentUser){if(!checkFlagViewNotifications()){setFlagViewNotifications();hideBadgeNotifications();}
agree.checked=true;window.authPlace=window.authPlaces.notification;openAuthNotificationModal();window.onUserAuth=function(){if(notificationAuthPopup&&notificationAuthPopup.classList.contains("open")){notificationAuthPopup.classList.remove("open");}};}else{window.location.href=routes.personal;}};closeButtonNotificationAuthPopup.addEventListener("click",(e)=>{notificationAuthPopup.classList.remove("open");});document.addEventListener("click",(e)=>{if(!notificationAuthPopup.contains(e.target)&&!notificationButton.contains(e.target)){notificationAuthPopup.classList.remove("open");}});}
const openAuthWindowNew=(provider)=>{let w=750;let h=450;var dualScreenLeft=window.screenLeft!==undefined?window.screenLeft:screen.left;var dualScreenTop=window.screenTop!==undefined?window.screenTop:screen.top;var width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var left=width/2-w/2+dualScreenLeft;var top=height/2-h/2+dualScreenTop;var newWindow=window.open(provider,"tprogerAuth","height="+
h+
",width="+
w+
",top="+
top+
",left="+
left+
",resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0",);if(window.focus){newWindow.focus();}};window.authCallbacks=[];window.setAuthUser=async()=>{const response=await fetch(routes.user,{headers:getHeaders(),});loginButton.addEventListener("click",(e)=>{if(!window.currentUser){e.preventDefault();openAuthModal();window.authPlace=window.authPlaces.default;}});if(response.status!==200){checkUserCompanyByComments();return;}
const user=await response.json();if(user){window.currentUser=user;const logo=document.createElement("img");const loginButtonContent=loginButton.querySelector(".button-menu__wrapper");let photo=defaultLogo;if(user.photo&&user.photo!==""){photo=user.photo;}
logo.src=photo;logo.width="24";logo.height="24";logo.classList.add("round-image");logo.alt="Личный кабинет";loginButtonContent.innerHTML="";loginButtonContent.append(logo);if(user.notificationCount>0){notificationCount.innerHTML=user.notificationCount;notificationCount.style.display="flex";notificationCount.classList.add("animated");}else{notificationCount.style.display="none";}
loginButton.onclick=()=>{window.location.href=routes.personal;};closeAuthModal();if(window.ta){window.ta("user.login.completed",1,{loginService:user.source,initiator:getAuthPlace(),tprogerUserId:user.id,});}
if(window.onUserAuth){window.onUserAuth();}
window.authCallbacks.forEach((f)=>{f();});}
checkUserCompanyByComments();};window.setAuthUser();window.onTelegramAuth=async(user)=>{const qs=Object.keys(user).map((key)=>`${key}=${user[key]}`).join("&");try{const response=await fetch(`${routes.auth.telegram}?${qs}`);const r=await response.json();setAuthUser();}catch(e){console.log("telegram auth failed");}};window.approveAchieve=async(name)=>{return;const response=await fetch(routes.achievements.set,{method:"POST",headers:getHeaders(),body:JSON.stringify({name:name}),});const achieve=await response.json();if(window.successNotyf&&achieve&&achieve!==-1&&achieve!=="-1"){window.successNotyf(`Задание «${achieve.name}» выполнено! Вы получили ${achieve.point} очков`);}};if(window.location.search.includes("auth=on")){openAuthModal();}
function checkUserCompanyByComments(){const userCompany=window.currentUser?.companies;if(!userCompany||userCompany.length===0){const companyCheckbox=document.querySelector(".comments-checkbox-company");if(companyCheckbox){companyCheckbox.querySelector("label").remove();}}}};if(/complete|interactive|loaded/.test(document.readyState)){authWindowScript();}else{document.addEventListener("DOMContentLoaded",authWindowScript,false);}})();;(()=>{const initComments=async()=>{const treeSize=5;const routePrefix="/wp-node/";const routes={add:`${routePrefix}comments`,edit:`${routePrefix}comments/edit`,delete:`${routePrefix}comments/delete`,load:`${routePrefix}comments`,get:`${routePrefix}comments/votes`,vote:`${routePrefix}comments/vote`,};const prefix="comments-card__";const classes={anchor:"comments-anchor",card:"comments-card",deletedCard:"comments-card__deleted",deletedCardInner:"comments-card__deleted-inner",child:"comments-card__children-comments",cardsContainer:"comments-cards-container",top:"comments-card__content-top",logo:{container:"comments-card__user-image",image:"",},user:{name:"comments-card__user-name",},label:{container:"comments-card__labels",company:{container:"comments-card__company",logo:"comments-card__company-logo",name:"comments-card__company-name",link:"comments-card__company-link",},},options:{container:"comments-card__options",edit:"comments-card__edit",trash:"comments-card__trash",manage:"comments-card__options-manage",bottom:"comments-card__options-bottom",},bottom:"comments-card__content-bottom",text:"comments-card__text",time:"comments-card__dispatch-time",divider:"round-divider",commentReply:{actions:"comments-actions",actionChecbox:"comments-checkbox-company",},reply:"comments-card__reply",replyForm:"comments-card__reply-form",replyClose:"comments-card__reply-close",editForm:"comments-card__edit-form",rate:{container:"comments-card__rate",score:"comments-card__score",button:"comments-card__rate-button",up:"icon-up-open",down:"icon-down-open",positive:"comments-card__score-positive",negative:"comments-card__score-negative",downvoted:"score-downvoted",upvoted:"score-upvoted",},form:{container:"comments-textarea-container",textarea:"comments-textarea",button:"comments-submit-button",},hoverable:"hoverable",icons:{close:"icon-close",answer:"icon-arrow-answer",edit:"icon-edit",trash:"icon-trash",deletedTrash:"comment__deleted-trash",},answer:"comments-card__anwser-user",answerUserName:"comments-card__anwser-user-name",disabled:"disabled",};const messages={permissionDenied:"Вам не разрешено выполнять, это действие",};const defaultLogo="/wp-content/themes/gecko/assets/img/logo.svg";const replyText="Ответить";const directions={up:"up",down:"down",};let enabledSocketIO=false;const goToComment=()=>{const hash=window.location.hash.split("#")[1];if(!hash||hash===""){return;}
const element=document.getElementById(hash);if(element){element.scrollIntoView({behavior:"smooth",block:"center",});}};const findCommentById=(id)=>{return comments.querySelector(`.${classes.card}[data-id="${id}"]`)??null;};const findElementByClass=(container,_class)=>{return container.querySelector(`.${_class}`)??null;};const updateTime=()=>{if(window.timeagoInstanceRun){window.timeagoInstanceRun();}};window.postID=window.getPostID();const addComment=async(parent,content)=>{const postID=window.postID||0;const addCompanyLabel=document.querySelector("#from-company");const response=await fetch(routes.add,{method:"POST",headers:window.getHeaders(),body:JSON.stringify({parent:parent,content:content,post:postID,from_company:addCompanyLabel?addCompanyLabel.checked:false,}),});if(response.status!==200){return null;}
const json=await response.json();const card=getCard(json);return card;};const strip=(html)=>{const tempDiv=document.createElement("div");tempDiv.innerHTML=html;return tempDiv.innerText;};const getReplyForm=(parent,target)=>{const replyContainer=document.createElement("div");const container=document.createElement("div");const close=document.createElement("div");close.classList.add(classes.icons.close,classes.replyClose);container.classList.add(classes.form.container);const textarea=document.createElement("div");textarea.classList.add(classes.form.textarea);textarea.placeholder="Написать комментарий…";textarea.contentEditable="true";textarea.addEventListener("paste",(e)=>{e.preventDefault();textarea.innerHTML+=strip(e.clipboardData.getData("Text"));});const commentActions=document.createElement("div");commentActions.classList.add(classes.commentReply.actions);const companyContainer=document.createElement("div");companyContainer.classList.add(classes.commentReply.actionChecbox);if(window.currentUser&&window.currentUser.companies.length!==0){const checkBoxSvgUse=document.createElementNS("http://www.w3.org/2000/svg","use");checkBoxSvgUse.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#check");const checkBoxSvg=document.createElementNS("http://www.w3.org/2000/svg","svg");checkBoxSvg.classList.add("tp-checkbox__icon");checkBoxSvg.appendChild(checkBoxSvgUse);const checkBoxSvgContainer=document.createElement("div");checkBoxSvgContainer.classList.add("tp-checkbox__box");checkBoxSvgContainer.appendChild(checkBoxSvg);const companyInput=document.createElement("input");companyInput.id="from-company";companyInput.name="from-company";companyInput.classList.add("tp-checkbox__input");companyInput.type="checkbox";const companyLabelText=document.createElement("div");companyLabelText.classList.add("tp-checkbox__wrapper-label");companyLabelText.innerHTML="Комметирую от имени компании";const companyLabel=document.createElement("label");companyLabel.setAttribute("for","from-company");companyLabel.classList.add("tp-checkbox");companyLabel.classList.add("tp-checkbox--primary");companyLabel.appendChild(companyInput);companyLabel.appendChild(checkBoxSvgContainer);companyLabel.appendChild(companyLabelText);companyContainer.appendChild(companyLabel);}
commentActions.appendChild(companyContainer);const button=document.createElement("button");button.classList.add(classes.form.button,classes.hoverable);button.dataset.parent=parent;button.innerHTML=replyText;container.appendChild(textarea);commentActions.appendChild(button);container.appendChild(commentActions);container.appendChild(close);replyContainer.appendChild(container);const replyButton=target.querySelector(`.${classes.reply}`);const replyButtonFunction=async()=>{const content=textarea.innerHTML;if(content===""){return;}
if(button.classList.contains(classes.disabled)){return;}
button.classList.add(classes.disabled);const card=await addComment(parent,content);if(!card){button.classList.remove(classes.disabled);return;}
replyContainer.innerHTML="";if(enabledSocketIO===false){replyContainer.appendChild(card);}
initCommentCard(card);if(replyButton){replyButton.dataset.reply=0;}
button.classList.remove(classes.disabled);updateTime();};button.addEventListener("click",async()=>{if(!window.currentUser){window.authPlace=window.authPlaces.comments;window.openAuthModal();window.onUserAuth=replyButtonFunction;}else{await replyButtonFunction();}});close.addEventListener("click",()=>{const form=target.querySelector(`.${classes.replyForm}`);const replyButton=target.querySelector(`.${classes.reply}`);if(form){form.remove();}
if(replyButton){replyButton.dataset.reply=0;}});replyContainer.classList.add(classes.replyForm);return replyContainer;};const initCommentCard=(card)=>{if(!card){return;}
const replyButton=card.querySelector(`.${classes.reply}`);const child=card.querySelector(`.${classes.child}`);const parent=card.dataset.id;if(replyButton){replyButton.addEventListener("click",()=>{if(replyButton.dataset.reply!=1){replyButton.dataset.reply=1;const form=getReplyForm(parent,card);child.prepend(form);}});}
appendTopOptions(card);};const initPostForm=(comments)=>{if(!comments){return;}
const forms=comments.getElementsByClassName(classes.form.container);if(forms){for(let i=0;i<forms.length;i++){const form=forms[i];const button=findElementByClass(form,classes.form.button);const textarea=findElementByClass(form,classes.form.textarea);if(button&&textarea){textarea.addEventListener("paste",(e)=>{e.preventDefault();textarea.innerHTML+=strip(e.clipboardData.getData("Text"));});const sendFunction=async()=>{const parent=button.dataset.parent||0;const container=findElementByClass(comments,classes.cardsContainer);const content=textarea.innerHTML;if(content===""){return;}
if(button.classList.contains(classes.disabled)){return;}
button.classList.add(classes.disabled);const newCard=await addComment(parent,content);if(!newCard){button.classList.remove(classes.disabled);return;}
button.classList.remove(classes.disabled);content.innerHTML="";if(enabledSocketIO===false&&container){container.prepend(newCard);}
textarea.innerHTML="";initCommentCard(newCard);updateTime();};button.addEventListener("click",async()=>{if(!window.currentUser){window.authPlace=window.authPlaces.comments;window.openAuthModal();window.onUserAuth=sendFunction;window.authPlace;}else{await sendFunction();}});}}}};const start=(comments)=>{const commentCards=comments.getElementsByClassName(classes.card);if(commentCards){for(let i=0;i<commentCards.length;i++){initCommentCard(commentCards[i]);}}};const comments=document.querySelector("#tproger-comments");if(!comments){return;}
const prependComment=(comment,parent_id)=>{if(!comments){return;}
const container=findElementByClass(comments,classes.cardsContainer);if(!container){return;}
const card=getCard(comment);if(!card){return;}
if(comment.comment_parent===0){container.prepend(card);}else{const parentContainer=findCommentById(comment.comment_parent);if(!parentContainer){return;}
const parentClildsContainer=findElementByClass(parentContainer,classes.child);if(!parentClildsContainer){return;}
parentClildsContainer.appendChild(card);}
initCommentCard(card);updateTime();};const initRateButton=(button)=>{if(!button){return;}
let direction=directions.up;if(button.classList.contains(classes.rate.up)){direction=directions.up;}else{direction=directions.down;}
const comment=button.dataset.id;button.addEventListener("click",async()=>{const setVoteFucntion=async()=>{const vote=await setVote(direction,comment);if(!vote){return;}
updateVoteKarma(vote.comment,vote.karma,vote.vote);};if(!window.currentUser){window.authPlace=window.authPlaces.comments;window.openAuthModal();window.onUserAuth=setVoteFucntion;}else{await setVoteFucntion();}});};const createDeletedCard=(content)=>{const card=document.createElement("div");card.classList.add(classes.deletedCardInner);const inner=document.createElement("div");inner.innerHTML=content;const icon=document.createElement("div");icon.classList.add(classes.icons.trash,classes.icons.deletedTrash);card.appendChild(icon);card.appendChild(inner);return card;};const getCard=(comment,parent_user)=>{if(!comment.user){return;}
const card=document.createElement("div");card.classList.add(classes.card);card.dataset.id=comment.comment_id;card.dataset.time=new Date(comment.comment_date).getTime();card.dataset.karma=comment.comment_karma;card.id=`comment-${comment.comment_id}`;if(comment.is_deleted){if(comment.children.length===0){return;}
card.classList.add(classes.deletedCard);const deletedCard=createDeletedCard(comment.comment_content);card.appendChild(deletedCard);}else{const cardAnchor=document.createElement("div");cardAnchor.id=`comment-anchor-${comment.comment_id}`;cardAnchor.classList.add(classes.anchor);const divider=document.createElement("div");divider.classList.add(classes.divider);const dividerF=document.createElement("div");dividerF.classList.add(classes.divider);const top=document.createElement("div");top.classList.add(classes.top);const imgContainer=document.createElement("div");imgContainer.classList.add(classes.logo.container);const img=document.createElement("img");img.src=comment.user.photo??defaultLogo;img.width=32;img.height=32;imgContainer.appendChild(img);const userName=document.createElement("div");userName.classList.add(classes.user.name);userName.innerHTML=comment.user.name;userName.dataset.user=comment.user.id;top.appendChild(imgContainer);top.appendChild(userName);if(parent_user){const parentUser=document.createElement("a");parentUser.title=parent_user.name;parentUser.href=`#comment-${comment.comment_parent}`;parentUser.classList.add(classes.icons.answer,classes.answer);top.appendChild(parentUser);}
const bottom=document.createElement("div");bottom.classList.add(classes.bottom);const content=document.createElement("div");content.classList.add(classes.text);content.innerHTML=comment.comment_content;const optionsBottom=document.createElement("div");optionsBottom.classList.add(classes.options.container,classes.options.bottom);const labelConataier=document.createElement("div");if(comment.company){labelConataier.classList.add(classes.label.company.container);const labelCompanyLogo=document.createElement("div");labelCompanyLogo.classList.add(classes.label.company.logo);const labelCompanyImg=document.createElement("img");labelCompanyImg.src=comment.company.logo;labelCompanyImg.width=20;labelCompanyImg.height=20;labelCompanyImg.alt=comment.company.post_title;const labelCompanyName=document.createElement("div");labelCompanyName.classList.add(classes.label.company.name);const labelCompanyLink=document.createElement("a");labelCompanyLink.classList.add(classes.label.company.link);labelCompanyLink.href=comment.company.link;labelCompanyLogo.appendChild(labelCompanyImg);labelCompanyName.innerHTML=comment.company.post_title;labelCompanyLink.appendChild(labelCompanyLogo);labelCompanyLink.appendChild(labelCompanyName);labelConataier.appendChild(labelCompanyLink);if(document.documentElement.clientWidth>600){top.appendChild(labelConataier);}}
const date=document.createElement("div");const time=document.createElement("time");time.dateTime=comment.comment_date;time.title=comment.comment_date;time.innerHTML=comment.comment_date;time.classList.add("localtime");date.classList.add(classes.time);date.appendChild(time);const reply=document.createElement("div");reply.classList.add(classes.reply);reply.dataset.id=comment.comment_id;reply.classList.add(classes.hoverable);reply.innerHTML="Ответить";const rateContainer=document.createElement("div");rateContainer.classList.add(classes.rate.container);const voteDown=document.createElement("div");voteDown.classList.add(classes.rate.down,classes.rate.button,classes.hoverable);voteDown.dataset.id=comment.comment_id;const vote=document.createElement("div");vote.classList.add(classes.rate.score);vote.innerHTML=comment.comment_karma??0;const voteUp=document.createElement("div");voteUp.dataset.id=comment.comment_id;voteUp.classList.add(classes.rate.up,classes.rate.button,classes.hoverable);initRateButton(voteUp);initRateButton(voteDown);rateContainer.appendChild(voteDown);rateContainer.appendChild(vote);rateContainer.appendChild(voteUp);optionsBottom.appendChild(date);optionsBottom.appendChild(dividerF);optionsBottom.appendChild(reply);optionsBottom.appendChild(divider);optionsBottom.appendChild(rateContainer);bottom.appendChild(content);bottom.appendChild(optionsBottom);card.appendChild(cardAnchor);card.appendChild(top);if(comment.company&&document.documentElement.clientWidth<=600){card.appendChild(labelConataier);}
card.appendChild(bottom);}
const children=document.createElement("div");children.classList.add(classes.child);children.dataset.id=comment.comment_id;card.appendChild(children);return card;};const deleteCard=(card,text)=>{const top=card.querySelector(`.${classes.top}`);if(top){top.remove();}
const bottom=card.querySelector(`.${classes.bottom}`);if(bottom){bottom.remove();}
const deletedCard=createDeletedCard(text);card.prepend(deletedCard);};const appendTopOptions=(card)=>{if(!card){return;}
if(!canEdit(card)){return;}
if(card.classList.contains(classes.deletedCard)){return;}
const options=findElementByClass(card,classes.options.manage);if(options){return;}
const container=findElementByClass(card,classes.top);if(!container){return;}
const bottom=findElementByClass(card,classes.bottom);if(!bottom){return;}
const content=findElementByClass(card,classes.text);if(!content){return;}
const edit=document.createElement("div");edit.classList.add(classes.options.edit,classes.icons.edit);edit.addEventListener("click",()=>{let form=card.querySelector(`.${classes.editForm}`);if(form){return;}
const bottomOptions=findElementByClass(card,classes.options.bottom);if(bottomOptions){bottomOptions.style.display="none";}
edit.style.display="none";const text=content.innerHTML;form=document.createElement("div");form.classList.add(classes.editForm);const container=document.createElement("div");const close=document.createElement("div");close.classList.add(classes.icons.close,classes.replyClose);container.classList.add(classes.form.container);const textarea=document.createElement("div");textarea.innerHTML=text;textarea.classList.add(classes.form.textarea);textarea.contentEditable="true";textarea.addEventListener("paste",(e)=>{e.preventDefault();textarea.innerHTML+=strip(e.clipboardData.getData("Text"));});const button=document.createElement("button");button.classList.add(classes.form.button,classes.hoverable);button.dataset.parent=parent;button.innerHTML="Сохранить";container.appendChild(textarea);container.appendChild(button);container.appendChild(close);form.appendChild(container);const removeForm=()=>{const form=card.querySelector(`.${classes.editForm}`);if(form){form.remove();content.style.display="block";}
edit.style.display="block";if(bottomOptions){bottomOptions.style.display="flex";}};button.addEventListener("click",async()=>{if(textarea.innerHTML===""){return;}
if(button.classList.contains(classes.disabled)){return;}
const response=await fetch(routes.edit,{method:"POST",headers:window.getHeaders(),body:JSON.stringify({comment_id:card.dataset.id??0,content:textarea.innerHTML,}),});button.classList.remove(classes.disabled);if(response.status!==200){if(window.errorNotyf){window.errorNotyf(messages.permissionDenied);}
removeForm();return;}
content.innerHTML=textarea.innerHTML;removeForm();});close.addEventListener("click",()=>{removeForm();});bottom.prepend(form);content.style.display="none";});const trash=document.createElement("div");trash.classList.add(classes.options.trash,classes.icons.trash);trash.addEventListener("click",async()=>{let isRemove=confirm("Подтверждаете удаление?");if(!isRemove){return;}
const response=await fetch(routes.delete,{method:"POST",headers:window.getHeaders(),body:JSON.stringify({comment_id:card.dataset.id??0,}),});if(response.status!==200){if(window.errorNotyf){window.errorNotyf(messages.permissionDenied);}
return;}
const result=await response.json();if(enabledSocketIO===false){deleteCard(card,result.text);}});const optionsTop=document.createElement("div");optionsTop.classList.add(classes.options.container,classes.options.manage);optionsTop.appendChild(edit);optionsTop.appendChild(trash);container.appendChild(optionsTop);};const canEdit=(card)=>{if(!window.currentUser){return false;}
const user=window.currentUser;if(user.is_admin===1){return true;}
const cardUser=findElementByClass(card,classes.user.name);if(!cardUser){return false;}
if(!cardUser.dataset.user||cardUser.dataset.user===""){return false;}
if(user.id===parseInt(cardUser.dataset.user)){return true;}
return false;};const enableOptions=()=>{if(!window.currentUser){window.authCallbacks.push(enableOptions);return;}
const cards=document.querySelectorAll(`.${classes.card}`);if(!cards){return;}
if(cards.length===0){return;}
for(let i=0;i<cards.length;i++){const card=cards[i];appendTopOptions(card);}};enableOptions();const setVote=async(direction,comment)=>{const postID=window.postID||0;const response=await fetch(routes.vote,{method:"POST",headers:window.getHeaders(),body:JSON.stringify({direction:direction,comment_id:comment,post:postID,}),});if(response.status!==200){return null;}
return await response.json();};const updateVoteKarma=(comment,karma,vote)=>{const card=findCommentById(comment);if(!card){return;}
const voteContainer=findElementByClass(card,classes.rate.container);if(!voteContainer){return;}
const upButton=findElementByClass(voteContainer,classes.rate.up);const score=findElementByClass(voteContainer,classes.rate.score);const downButton=findElementByClass(voteContainer,classes.rate.down);if(!upButton||!score||!downButton){return;}
upButton.classList.remove(classes.rate.upvoted);downButton.classList.remove(classes.rate.downvoted);score.classList.remove(classes.rate.negative);score.classList.remove(classes.rate.positive);score.innerHTML=vote;if(parseInt(vote)>0){score.classList.add(classes.rate.positive);}
if(parseInt(vote)<0){score.classList.add(classes.rate.negative);}
if(parseInt(karma)<0){downButton.classList.add(classes.rate.downvoted);}
if(parseInt(karma)>0){upButton.classList.add(classes.rate.upvoted);}};const getVotes=async()=>{const response=await fetch(`${routes.get}?post=${window.postID}`,{headers:window.getHeaders(),});if(response.status!==200){return;}
const userVotes=await response.json();if(!userVotes){return;}
userVotes.forEach((vote)=>{updateVoteKarma(vote.comment,vote.karma,vote.vote);});return;};const getCommentList=(comment,parent_user)=>{const card=getCard(comment,parent_user);if(comment.children.length>0){const childrens=comment.children;childrens.forEach((child)=>{card.append(getCommentList(child,parent_user));});}
return card;};const getCommentTree=(comment,parent_user,level)=>{const card=getCard(comment,parent_user);const user=comment.user;if(comment.children.length>0){const childrens=comment.children;const childrenContainer=findElementByClass(card,classes.child);childrens.forEach((child)=>{let commentCard=null;if(level<treeSize){commentCard=getCommentTree(child,user,level+1);}else{commentCard=getCommentList(child,user);}
if(childrenContainer&&commentCard){childrenContainer.appendChild(commentCard);}});}
return card;};const getComments=async()=>{const level=1;const commentsContainer=findElementByClass(comments,classes.cardsContainer);if(!commentsContainer){console.log("comments container disable");return;}
const response=await fetch(`${routes.load}?post=${window.postID}`,{headers:window.getHeaders(),});if(response.status!==200){commentsContainer.dataset.loaded="yes";return false;}
const postComments=await response.json();if(!postComments||postComments.length===0){commentsContainer.dataset.loaded="yes";return false;}
postComments.forEach((comment)=>{const tree=getCommentTree(comment,null,level+1);if(tree){commentsContainer.appendChild(tree);}});start(comments);updateTime();commentsContainer.dataset.loaded="yes";await getVotes();enableOptions();};initPostForm(comments);await getComments();goToComment();const sortComments=(type)=>{const comments=document.querySelectorAll(`.${classes.cardsContainer} > .${classes.card}`);const sortable=[];let fieldSort="karma";switch(type){case "popular":fieldSort="karma";break;case "new":fieldSort="time";break;}
comments.forEach((comment)=>{sortable.push([comment.dataset.id,comment.dataset[fieldSort],comment.dataset.time]);});sortable.sort((a,b)=>{let result=b[1]-a[1];if(result===0&&fieldSort==="karma"){result=b[2]-a[2];}
return result;});for(let i=0;i<sortable.length;i++){const commentCard=document.querySelector(`.${classes.card}[data-id="${sortable[i][0]}"]`);commentCard.style.order=i;}};sortComments("popular");const sortPopular=document.getElementById("sort-popular");const sortNew=document.getElementById("sort-new");sortPopular.addEventListener("click",()=>{if(!sortPopular.classList.contains("tp-button--tertiary")){sortNew.classList.remove("tp-button--tertiary");sortNew.classList.add("tp-button--secondary");sortPopular.classList.add("tp-button--tertiary");sortPopular.classList.remove("tp-button--secondary");sortComments("popular");}});sortNew.addEventListener("click",()=>{if(!sortNew.classList.contains("tp-button--tertiary")){sortPopular.classList.remove("tp-button--tertiary");sortPopular.classList.add("tp-button--secondary");sortNew.classList.add("tp-button--tertiary");sortNew.classList.remove("tp-button--secondary");sortComments("new");}});const handlerCommentsVisible=(entries,observer)=>{for(entry of entries){if(entry.isIntersecting){getSocketComments();observer.disconnect();}}};const getSocketComments=()=>{try{const socket=io({reconnectionAttempts:3,});socket.emit("create",`comments_post_${window.postID||0}`);socket.on("new_comment",(comment)=>{prependComment(comment);});socket.on("edit_comment",(comment)=>{const card=findCommentById(comment.comment_id);if(!card){return;}
const content=findElementByClass(card,classes.text);if(!content){return;}
content.innerHTML=comment.comment_content;});socket.on("delete_comment",(data)=>{const card=findCommentById(data.comment_id);if(!card){return;}
deleteCard(card,data.text);});socket.on("connect",()=>{enabledSocketIO=true;});socket.on("disconnect",()=>{socket.disconnect(0);enabledSocketIO=false;});socket.on("connect_error",(reason)=>{enabledSocketIO=false;});window.addEventListener("beforeunload",(event)=>{socket.disconnect(0);});}catch(err){enabledSocketIO=false;}};const observerCommentsVisible=new IntersectionObserver(handlerCommentsVisible);observerCommentsVisible.observe(comments);};if(/complete|interactive|loaded/.test(document.readyState)){initComments();}else{document.addEventListener("DOMContentLoaded",initComments,false);}})();;const routes={getUserByPost:'/wp-node/post/user'}
const createLogo=(logoSrc)=>{const logo=document.createElement('img')
logo.classList.add('user-info__logo')
logo.src=logoSrc
logo.alt='user-info'
return logo}
const formInput=(identificator,value)=>{const input=document.createElement('input')
input.classList.add('user-info__form-preview-input')
input.disabled=true
input.readOnly=true
input.value=value
input.innerText=value
input.id=identificator
return input}
const formLabel=(identificator,labelName)=>{const label=document.createElement('label')
label.classList.add('user-info__form-preview-label')
label.for=identificator
label.innerText=labelName
return label}
const createFormPreview=(labelName,value)=>{const identificator=`input-preview-${labelName}`
const container=document.createElement('div')
const label=formLabel(identificator,labelName)
const input=formInput(identificator,value)
container.classList.add('user-info__form-preview')
container.append(label)
container.append(input)
return container}
const onClose=()=>{const widgetPlace=document.querySelector('#tproger-user-info-widget')
widgetPlace.remove()}
const createCoverUserInfo=()=>{const cover=document.createElement('div')
cover.classList.add('user-info__cover')
cover.onclick=()=>onClose()
return cover}
const createButtonInfo=()=>{const buttonInfo=document.createElement('i')
buttonInfo.classList.add('icon-info')
buttonInfo.classList.add('user-info__button')
return buttonInfo}
const createUserInfoForm=()=>{const article=document.querySelector('#content article')
if(!article){return}
const post=article.id
if(post){const postId=post.replace('post-','')
const buttonInfo=createButtonInfo()
const tprogerUserInfo=document.querySelector('#tproger-user-info')
buttonInfo.onclick=async()=>{const response=await fetch(`${routes.getUserByPost}/?post_id=${postId}`,{headers:window.getHeaders()})
const user=await response.json()
console.log(user)
const page=document.querySelector('#page')
const userInfoWidget=document.createElement('div')
userInfoWidget.id='tproger-user-info-widget'
const userInfoContainer=document.createElement('div')
const cover=createCoverUserInfo()
const logo=createLogo(user.photo)
userInfoContainer.classList.add('user-info__container')
userInfoContainer.append(logo)
const objectUserData=[{labelName:'Имя пользователя',value:user.name},{labelName:'E-mail',value:user.email},{labelName:'Ссылка на формальное резюме',value:user.resume},{labelName:'Контакты',value:user.contact},{labelName:'Социальная сеть',value:user.source},{labelName:'Ссылка на фотографию',value:user.photo},{labelName:'Идентификатор социальной сети',value:user.userid},{labelName:'Идентификатор личного кабинета',value:user.id},{labelName:'Идентификатор Wordpress',value:user.wp}]
objectUserData.forEach(data=>{const formInput=createFormPreview(data.labelName,data.value)
userInfoContainer.append(formInput)})
userInfoWidget.append(cover)
userInfoWidget.append(userInfoContainer)
page.append(userInfoWidget)}
if(!window.currentUser){window.onUserAuth=()=>{if(window.currentUser.is_admin===1){if(tprogerUserInfo){tprogerUserInfo.append(buttonInfo)}}}}}}
if(/complete|interactive|loaded/.test(document.readyState)){createUserInfoForm()}else{document.addEventListener('DOMContentLoaded',createUserInfoForm,false)};const videoYouTubeComponent=()=>{document.querySelectorAll(".video").forEach((video)=>{let isVideoLaunching=false;const link=video.querySelector(".video__link");const button=video.querySelector(".video__button");const type=link.getAttribute("data-video-type");const id=link.getAttribute("data-video-id");function setupVideo(video){video.addEventListener("click",()=>{initYTVideo(id,()=>{window.player.playVideo();});});link.removeAttribute("href");video.classList.add("video--enabled");}
function createYTScript(){const oldTag=document.querySelector('#youtubePlayer');if(!oldTag){const tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";tag.async=true;tag.id='youtubePlayer';const firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);}
return oldTag===null;}
function initYTVideo(id,callback){button.remove();let videoParams=null;if(type==="video"){videoParams={videoId:id,};}else if(type==="playlist"){videoParams={playerVars:{listType:"playlist",list:id,},};}
const ready=!createYTScript();if(!ready){window.onYouTubeIframeAPIReady=apiReady;}else{apiReady();}
function apiReady(){window.player=new YT.Player("media"+id,{host:"https://www.youtube.com",height:"100%",width:"100%",...videoParams,events:{onReady:(event)=>{window.player.getIframe().classList.add("video__media");isVideoLaunching=true;callback(event);},},});}}
const timestamps=document.querySelectorAll("span.badge.tproger");timestamps.forEach((timestamp)=>{if(!timestamp.classList.contains("video-seek")){const match=timestamp.innerText.match(/^(?:(\d{1,3}):)?(\d{1,2}):(\d{1,2})$/);if(match){timestamp.setAttribute("data-seconds",(parseInt(match[1])*60*60||0)+
parseInt(match[2])*60+
parseInt(match[3]));timestamp.classList.add("video-seek");timestamp.innerHTML=timestamp.innerHTML+'<i class="icon-play"></i>';timestamp.addEventListener("click",(event)=>{const dataSeconds=event.target.getAttribute("data-seconds");if(isVideoLaunching===true){window.player.playVideo();window.player.seekTo(dataSeconds,true);}else{initYTVideo(id,()=>{window.player.playVideo();window.player.seekTo(dataSeconds,true);});}});}}});const videoLinks=document.querySelectorAll(".entry-content a");videoLinks.forEach((videoLink)=>{if(!videoLink.classList.contains("video-play")){const match=videoLink.href.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(match){videoLink.dataset.videoid=match[1];videoLink.classList.add("video-play");videoLink.addEventListener("click",(event)=>{event.preventDefault();const aboutToPlayVideo=event.target.dataset.videoid;let playlistVideos=null;let playlistIndex=null;if(isVideoLaunching===true){playlistVideos=window.player.getPlaylist();playlistIndex=playlistVideos.indexOf(aboutToPlayVideo);if(playlistIndex>-1){window.player.playVideoAt(playlistIndex);}else{window.player.loadVideoById(aboutToPlayVideo,0);}}else{initYTVideo(id,()=>{playlistVideos=window.player.getPlaylist();playlistIndex=playlistVideos.indexOf(aboutToPlayVideo);if(playlistIndex>-1){window.player.playVideoAt(playlistIndex);}else{window.player.loadVideoById(aboutToPlayVideo,0);}});}});}}});setupVideo(video);});};if(/complete|interactive|loaded/.test(document.readyState)){videoYouTubeComponent();}else{document.addEventListener("DOMContentLoaded",videoYouTubeComponent,false);};var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(u){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,e={},M={manual:u.Prism&&u.Prism.manual,disableWorkerMessageHandler:u.Prism&&u.Prism.disableWorkerMessageHandler,util:{encode:function e(n){return n instanceof W?new W(n.type,e(n.content),n.alias):Array.isArray(n)?n.map(e):n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function t(e,r){var a,n;switch(r=r||{},M.util.type(e)){case"Object":if(n=M.util.objId(e),r[n])return r[n];for(var i in a={},r[n]=a,e)e.hasOwnProperty(i)&&(a[i]=t(e[i],r));return a;case"Array":return n=M.util.objId(e),r[n]?r[n]:(a=[],r[n]=a,e.forEach(function(e,n){a[n]=t(e,r)}),a);default:return e}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var n=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(e.stack)||[])[1];if(n){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].src==n)return t[r]}return null}},isActive:function(e,n,t){for(var r="no-"+n;e;){var a=e.classList;if(a.contains(n))return!0;if(a.contains(r))return!1;e=e.parentElement}return!!t}},languages:{plain:e,plaintext:e,text:e,txt:e,extend:function(e,n){var t=M.util.clone(M.languages[e]);for(var r in n)t[r]=n[r];return t},insertBefore:function(t,e,n,r){var a=(r=r||M.languages)[t],i={};for(var l in a)if(a.hasOwnProperty(l)){if(l==e)for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);n.hasOwnProperty(l)||(i[l]=a[l])}var s=r[t];return r[t]=i,M.languages.DFS(M.languages,function(e,n){n===s&&e!=t&&(this[e]=i)}),i},DFS:function e(n,t,r,a){a=a||{};var i=M.util.objId;for(var l in n)if(n.hasOwnProperty(l)){t.call(n,l,n[l],r||l);var o=n[l],s=M.util.type(o);"Object"!==s||a[i(o)]?"Array"!==s||a[i(o)]||(a[i(o)]=!0,e(o,t,l,a)):(a[i(o)]=!0,e(o,t,null,a))}}},plugins:{},highlightAll:function(e,n){M.highlightAllUnder(document,e,n)},highlightAllUnder:function(e,n,t){var r={callback:t,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};M.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),M.hooks.run("before-all-elements-highlight",r);for(var a,i=0;a=r.elements[i++];)M.highlightElement(a,!0===n,r.callback)},highlightElement:function(e,n,t){var r=M.util.getLanguage(e),a=M.languages[r];M.util.setLanguage(e,r);var i=e.parentElement;i&&"pre"===i.nodeName.toLowerCase()&&M.util.setLanguage(i,r);var l={element:e,language:r,grammar:a,code:e.textContent};function o(e){l.highlightedCode=e,M.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,M.hooks.run("after-highlight",l),M.hooks.run("complete",l),t&&t.call(l.element)}if(M.hooks.run("before-sanity-check",l),(i=l.element.parentElement)&&"pre"===i.nodeName.toLowerCase()&&!i.hasAttribute("tabindex")&&i.setAttribute("tabindex","0"),!l.code)return M.hooks.run("complete",l),void(t&&t.call(l.element));if(M.hooks.run("before-highlight",l),l.grammar)if(n&&u.Worker){var s=new Worker(M.filename);s.onmessage=function(e){o(e.data)},s.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else o(M.highlight(l.code,l.grammar,l.language));else o(M.util.encode(l.code))},highlight:function(e,n,t){var r={code:e,grammar:n,language:t};if(M.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=M.tokenize(r.code,r.grammar),M.hooks.run("after-tokenize",r),W.stringify(M.util.encode(r.tokens),r.language)},tokenize:function(e,n){var t=n.rest;if(t){for(var r in t)n[r]=t[r];delete n.rest}var a=new i;return I(a,a.head,e),function e(n,t,r,a,i,l){for(var o in r)if(r.hasOwnProperty(o)&&r[o]){var s=r[o];s=Array.isArray(s)?s:[s];for(var u=0;u<s.length;++u){if(l&&l.cause==o+","+u)return;var c=s[u],g=c.inside,f=!!c.lookbehind,h=!!c.greedy,d=c.alias;if(h&&!c.pattern.global){var v=c.pattern.toString().match(/[imsuy]*$/)[0];c.pattern=RegExp(c.pattern.source,v+"g")}for(var p=c.pattern||c,m=a.next,y=i;m!==t.tail&&!(l&&y>=l.reach);y+=m.value.length,m=m.next){var k=m.value;if(t.length>n.length)return;if(!(k instanceof W)){var x,b=1;if(h){if(!(x=z(p,y,n,f))||x.index>=n.length)break;var w=x.index,A=x.index+x[0].length,E=y;for(E+=m.value.length;E<=w;)m=m.next,E+=m.value.length;if(E-=m.value.length,y=E,m.value instanceof W)continue;for(var P=m;P!==t.tail&&(E<A||"string"==typeof P.value);P=P.next)b++,E+=P.value.length;b--,k=n.slice(y,E),x.index-=y}else if(!(x=z(p,0,k,f)))continue;var w=x.index,L=x[0],S=k.slice(0,w),O=k.slice(w+L.length),j=y+k.length;l&&j>l.reach&&(l.reach=j);var C=m.prev;S&&(C=I(t,C,S),y+=S.length),T(t,C,b);var N=new W(o,g?M.tokenize(L,g):L,d,L);if(m=I(t,C,N),O&&I(t,m,O),1<b){var _={cause:o+","+u,reach:j};e(n,t,r,m.prev,y,_),l&&_.reach>l.reach&&(l.reach=_.reach)}}}}}}(e,a,n,a.head,0),function(e){var n=[],t=e.head.next;for(;t!==e.tail;)n.push(t.value),t=t.next;return n}(a)},hooks:{all:{},add:function(e,n){var t=M.hooks.all;t[e]=t[e]||[],t[e].push(n)},run:function(e,n){var t=M.hooks.all[e];if(t&&t.length)for(var r,a=0;r=t[a++];)r(n)}},Token:W};function W(e,n,t,r){this.type=e,this.content=n,this.alias=t,this.length=0|(r||"").length}function z(e,n,t,r){e.lastIndex=n;var a=e.exec(t);if(a&&r&&a[1]){var i=a[1].length;a.index+=i,a[0]=a[0].slice(i)}return a}function i(){var e={value:null,prev:null,next:null},n={value:null,prev:e,next:null};e.next=n,this.head=e,this.tail=n,this.length=0}function I(e,n,t){var r=n.next,a={value:t,prev:n,next:r};return n.next=a,r.prev=a,e.length++,a}function T(e,n,t){for(var r=n.next,a=0;a<t&&r!==e.tail;a++)r=r.next;(n.next=r).prev=n,e.length-=a}if(u.Prism=M,W.stringify=function n(e,t){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach(function(e){r+=n(e,t)}),r}var a={type:e.type,content:n(e.content,t),tag:"span",classes:["token",e.type],attributes:{},language:t},i=e.alias;i&&(Array.isArray(i)?Array.prototype.push.apply(a.classes,i):a.classes.push(i)),M.hooks.run("wrap",a);var l="";for(var o in a.attributes)l+=" "+o+'="'+(a.attributes[o]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+l+">"+a.content+"</"+a.tag+">"},!u.document)return u.addEventListener&&(M.disableWorkerMessageHandler||u.addEventListener("message",function(e){var n=JSON.parse(e.data),t=n.language,r=n.code,a=n.immediateClose;u.postMessage(M.highlight(r,M.languages[t],t)),a&&u.close()},!1)),M;var r=M.util.currentScript();function a(){M.manual||M.highlightAll()}if(r&&(M.filename=r.src,r.hasAttribute("data-manual")&&(M.manual=!0)),!M.manual){var l=document.readyState;"loading"===l||"interactive"===l&&r&&r.defer?document.addEventListener("DOMContentLoaded",a):window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,16)}return M}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(a,e){var s={};s["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var t={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};t["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var n={};n[a]={pattern:RegExp("(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[^])*?(?=</__>)".replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:t},Prism.languages.insertBefore("markup","cdata",n)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(a,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp("(^|[\"'\\s])(?:"+a+")\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))","i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml;!function(s){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|(?:[^\\\\\r\n()\"']|\\\\[^])*)\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var t=s.languages.markup;t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))}(Prism);Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp("(^|[^\\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?|\\d+(?:_\\d+)*n|(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?)(?![\\w$])"),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute("on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)","javascript")),Prism.languages.js=Prism.languages.javascript;!function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},a={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:a},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:a},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:a.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:a.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var o=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],s=a.variable[1].inside,i=0;i<o.length;i++)s[o[i]]=e.languages.bash[o[i]];e.languages.shell=e.languages.bash}(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean;!function(s){function a(e,s){return e.replace(/<<(\d+)>>/g,function(e,n){return"(?:"+s[+n]+")"})}function t(e,n,s){return RegExp(a(e,n),s||"")}function e(e,n){for(var s=0;s<n;s++)e=e.replace(/<<self>>/g,function(){return"(?:"+e+")"});return e.replace(/<<self>>/g,"[^\\s\\S]")}var n="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",r="class enum interface record struct",i="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",o="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function l(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var d=l(r),p=RegExp(l(n+" "+r+" "+i+" "+o)),c=l(r+" "+i+" "+o),u=l(n+" "+r+" "+o),g=e("<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>",2),b=e("\\((?:[^()]|<<self>>)*\\)",2),h="@?\\b[A-Za-z_]\\w*\\b",f=a("<<0>>(?:\\s*<<1>>)?",[h,g]),m=a("(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*",[c,f]),k="\\[\\s*(?:,\\s*)*\\]",y=a("<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?",[m,k]),w=a("(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?",[a("\\(<<0>>+(?:,<<0>>+)+\\)",[a("[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>",[g,b,k])]),m,k]),v={keyword:p,punctuation:/[<>()?,.:[\]]/},x="'(?:[^\r\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'",$='"(?:\\\\.|[^\\\\"\r\n])*"';s.languages.csharp=s.languages.extend("clike",{string:[{pattern:t("(^|[^$\\\\])<<0>>",['@"(?:""|\\\\[^]|[^\\\\"])*"(?!")']),lookbehind:!0,greedy:!0},{pattern:t("(^|[^@$\\\\])<<0>>",[$]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:t("(\\busing\\s+static\\s+)<<0>>(?=\\s*;)",[m]),lookbehind:!0,inside:v},{pattern:t("(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)",[h,w]),lookbehind:!0,inside:v},{pattern:t("(\\busing\\s+)<<0>>(?=\\s*=)",[h]),lookbehind:!0},{pattern:t("(\\b<<0>>\\s+)<<1>>",[d,f]),lookbehind:!0,inside:v},{pattern:t("(\\bcatch\\s*\\(\\s*)<<0>>",[m]),lookbehind:!0,inside:v},{pattern:t("(\\bwhere\\s+)<<0>>",[h]),lookbehind:!0},{pattern:t("(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>",[y]),lookbehind:!0,inside:v},{pattern:t("\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))",[w,u,h]),inside:v}],keyword:p,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),s.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),s.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:t("([(,]\\s*)<<0>>(?=\\s*:)",[h]),lookbehind:!0,alias:"punctuation"}}),s.languages.insertBefore("csharp","class-name",{namespace:{pattern:t("(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])",[h]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:t("(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))",[b]),lookbehind:!0,alias:"class-name",inside:v},"return-type":{pattern:t("<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))",[w,m]),inside:v,alias:"class-name"},"constructor-invocation":{pattern:t("(\\bnew\\s+)<<0>>(?=\\s*[[({])",[w]),lookbehind:!0,inside:v,alias:"class-name"},"generic-method":{pattern:t("<<0>>\\s*<<1>>(?=\\s*\\()",[h,g]),inside:{function:t("^<<0>>",[h]),generic:{pattern:RegExp(g),alias:"class-name",inside:v}}},"type-list":{pattern:t("\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))",[d,f,h,w,p.source,b,"\\bnew\\s*\\(\\s*\\)"]),lookbehind:!0,inside:{"record-arguments":{pattern:t("(^(?!new\\s*\\()<<0>>\\s*)<<1>>",[f,b]),lookbehind:!0,greedy:!0,inside:s.languages.csharp},keyword:p,"class-name":{pattern:RegExp(w),greedy:!0,inside:v},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var _=$+"|"+x,B=a("/(?![*/])|//[^\r\n]*[\r\n]|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>",[_]),E=e(a("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[B]),2),R="\\b(?:assembly|event|field|method|module|param|property|return|type)\\b",z=a("<<0>>(?:\\s*\\(<<1>>*\\))?",[m,E]);s.languages.insertBefore("csharp","class-name",{attribute:{pattern:t("((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])",[R,z]),lookbehind:!0,greedy:!0,inside:{target:{pattern:t("^<<0>>(?=\\s*:)",[R]),alias:"keyword"},"attribute-arguments":{pattern:t("\\(<<0>>*\\)",[E]),inside:s.languages.csharp},"class-name":{pattern:RegExp(m),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var S=":[^}\r\n]+",j=e(a("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[B]),2),A=a("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[j,S]),F=e(a("[^\"'/()]|/(?!\\*)|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>|\\(<<self>>*\\)",[_]),2),P=a("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[F,S]);function U(e,n){return{interpolation:{pattern:t("((?:^|[^{])(?:\\{\\{)*)<<0>>",[e]),lookbehind:!0,inside:{"format-string":{pattern:t("(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)",[n,S]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:s.languages.csharp}}},string:/[\s\S]+/}}s.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:t('(^|[^\\\\])(?:\\$@|@\\$)"(?:""|\\\\[^]|\\{\\{|<<0>>|[^\\\\{"])*"',[A]),lookbehind:!0,greedy:!0,inside:U(A,j)},{pattern:t('(^|[^@\\\\])\\$"(?:\\\\.|\\{\\{|<<0>>|[^\\\\"{])*"',[P]),lookbehind:!0,greedy:!0,inside:U(P,F)}],char:{pattern:RegExp(x),greedy:!0}}),s.languages.dotnet=s.languages.cs=s.languages.csharp}(Prism);!function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n="\\b(?!<keyword>)\\w+(?:\\s*\\.\\s*\\w+)*\\b".replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp("(\\b(?:class|concept|enum|struct|typename)\\s+)(?!<keyword>)\\w+".replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp('(\\b(?:import|module)\\s+)(?:"(?:\\\\(?:\r\n|[^])|[^"\\\\\r\n])*"|<[^<>\r\n]*>|'+"<mod-name>(?:\\s*:\\s*<mod-name>)?|:\\s*<mod-name>".replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism);Prism.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m};Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete Prism.languages.go["class-name"];!function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n="(^|[^\\w.])(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*",a={pattern:RegExp(n+"[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b"),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[a,{pattern:RegExp(n+"[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()])"),lookbehind:!0,inside:a.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":a,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},namespace:{pattern:RegExp("(\\b(?:exports|import(?:\\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\\s+)(?!<keyword>)[a-z]\\w*(?:\\.[a-z]\\w*)*\\.?".replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;!function(n){n.languages.kotlin=n.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete n.languages.kotlin["class-name"];var e={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:n.languages.kotlin}};n.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:e},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:e},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete n.languages.kotlin.string,n.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),n.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),n.languages.kt=n.languages.kotlin,n.languages.kts=n.languages.kotlin}(Prism);Prism.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/};!function(h){function v(e,n){return"___"+e.toUpperCase()+n+"___"}Object.defineProperties(h.languages["markup-templating"]={},{buildPlaceholders:{value:function(a,r,e,o){if(a.language===r){var c=a.tokenStack=[];a.code=a.code.replace(e,function(e){if("function"==typeof o&&!o(e))return e;for(var n,t=c.length;-1!==a.code.indexOf(n=v(r,t));)++t;return c[t]=e,n}),a.grammar=h.languages.markup}}},tokenizePlaceholders:{value:function(p,k){if(p.language===k&&p.tokenStack){p.grammar=h.languages[k];var m=0,d=Object.keys(p.tokenStack);!function e(n){for(var t=0;t<n.length&&!(m>=d.length);t++){var a=n[t];if("string"==typeof a||a.content&&"string"==typeof a.content){var r=d[m],o=p.tokenStack[r],c="string"==typeof a?a:a.content,i=v(k,r),u=c.indexOf(i);if(-1<u){++m;var g=c.substring(0,u),l=new h.Token(k,h.tokenize(o,p.grammar),"language-"+k,o),s=c.substring(u+i.length),f=[];g&&f.push.apply(f,e([g])),f.push(l),s&&f.push.apply(f,e([s])),"string"==typeof a?n.splice.apply(n,[t,1].concat(f)):a.content=f}}else a.content&&e(a.content)}return n}(p.tokens)}}}})}(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Prism.languages.objectivec["class-name"],Prism.languages.objc=Prism.languages.objectivec;Prism.languages.pascal={directive:{pattern:/\{\$[\s\S]*?\}/,greedy:!0,alias:["marco","property"]},comment:{pattern:/\(\*[\s\S]*?\*\)|\{[\s\S]*?\}|\/\/.*/,greedy:!0},string:{pattern:/(?:'(?:''|[^'\r\n])*'(?!')|#[&$%]?[a-f\d]+)+|\^[a-z]/i,greedy:!0},asm:{pattern:/(\basm\b)[\s\S]+?(?=\bend\s*[;[])/i,lookbehind:!0,greedy:!0,inside:null},keyword:[{pattern:/(^|[^&])\b(?:absolute|array|asm|begin|case|const|constructor|destructor|do|downto|else|end|file|for|function|goto|if|implementation|inherited|inline|interface|label|nil|object|of|operator|packed|procedure|program|record|reintroduce|repeat|self|set|string|then|to|type|unit|until|uses|var|while|with)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:dispose|exit|false|new|true)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:class|dispinterface|except|exports|finalization|finally|initialization|inline|library|on|out|packed|property|raise|resourcestring|threadvar|try)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:absolute|abstract|alias|assembler|bitpacked|break|cdecl|continue|cppdecl|cvar|default|deprecated|dynamic|enumerator|experimental|export|external|far|far16|forward|generic|helper|implements|index|interrupt|iochecks|local|message|name|near|nodefault|noreturn|nostackframe|oldfpccall|otherwise|overload|override|pascal|platform|private|protected|public|published|read|register|reintroduce|result|safecall|saveregisters|softfloat|specialize|static|stdcall|stored|strict|unaligned|unimplemented|varargs|virtual|write)\b/i,lookbehind:!0}],number:[/(?:[&%]\d+|\$[a-f\d]+)/i,/\b\d+(?:\.\d+)?(?:e[+-]?\d+)?/i],operator:[/\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=]/,{pattern:/(^|[^&])\b(?:and|as|div|exclude|in|include|is|mod|not|or|shl|shr|xor)\b/,lookbehind:!0}],punctuation:/\(\.|\.\)|[()\[\]:;,.]/},Prism.languages.pascal.asm.inside=Prism.languages.extend("pascal",{asm:void 0,keyword:void 0,operator:void 0}),Prism.languages.objectpascal=Prism.languages.pascal;!function(e){var n="(?:\\((?:[^()\\\\]|\\\\[^])*\\)|\\{(?:[^{}\\\\]|\\\\[^])*\\}|\\[(?:[^[\\]\\\\]|\\\\[^])*\\]|<(?:[^<>\\\\]|\\\\[^])*>)";Prism.languages.perl={comment:[{pattern:/(^\s*)=\w[\s\S]*?=cut.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],string:[{pattern:RegExp("\\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\\s*(?:"+["([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[^])*\\1","([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[^])*\\2",n].join("|")+")"),greedy:!0},{pattern:/("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/'(?:[^'\\\r\n]|\\.)*'/,greedy:!0}],regex:[{pattern:RegExp("\\b(?:m|qr)(?![a-zA-Z0-9])\\s*(?:"+["([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[^])*\\1","([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[^])*\\2",n].join("|")+")[msixpodualngc]*"),greedy:!0},{pattern:RegExp("(^|[^-])\\b(?:s|tr|y)(?![a-zA-Z0-9])\\s*(?:"+["([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\2)[^\\\\]|\\\\[^])*\\2(?:(?!\\2)[^\\\\]|\\\\[^])*\\2","([a-zA-Z0-9])(?:(?!\\3)[^\\\\]|\\\\[^])*\\3(?:(?!\\3)[^\\\\]|\\\\[^])*\\3",n+"\\s*"+n].join("|")+")[msixpodualngcer]*"),lookbehind:!0,greedy:!0},{pattern:/\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\b))/,greedy:!0}],variable:[/[&*$@%]\{\^[A-Z]+\}/,/[&*$@%]\^[A-Z_]/,/[&*$@%]#?(?=\{)/,/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+(?![\w$]))+(?:::)*/,/[&*$@%]\d+/,/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/],filehandle:{pattern:/<(?![<=])\S*?>|\b_\b/,alias:"symbol"},"v-string":{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/(\bsub[ \t]+)\w+/,lookbehind:!0},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\b/,punctuation:/[{}[\];(),:]/}}();!function(a){var e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,t=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],i=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,n=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,s=/[{}\[\](),:;]/;a.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:e,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|new|or|parent|print|private|protected|public|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s+)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:t,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:i,operator:n,punctuation:s};var l={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:a.languages.php},r=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:l}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:l}}];a.languages.insertBefore("php","variable",{string:r,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:e,string:r,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:t,number:i,operator:n,punctuation:s}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),a.hooks.add("before-tokenize",function(e){if(/<\?/.test(e.code)){a.languages["markup-templating"].buildPlaceholders(e,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}}),a.hooks.add("after-tokenize",function(e){a.languages["markup-templating"].tokenizePlaceholders(e,"php")})}(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python;!function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var n={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var t="(?:"+["([^a-zA-Z0-9\\s{(\\[<=])(?:(?!\\1)[^\\\\]|\\\\[^])*\\1","\\((?:[^()\\\\]|\\\\[^]|\\((?:[^()\\\\]|\\\\[^])*\\))*\\)","\\{(?:[^{}\\\\]|\\\\[^]|\\{(?:[^{}\\\\]|\\\\[^])*\\})*\\}","\\[(?:[^\\[\\]\\\\]|\\\\[^]|\\[(?:[^\\[\\]\\\\]|\\\\[^])*\\])*\\]","<(?:[^<>\\\\]|\\\\[^]|<(?:[^<>\\\\]|\\\\[^])*>)*>"].join("|")+")",i='(?:"(?:\\\\.|[^"\\\\\r\n])*"|(?:\\b[a-zA-Z_]\\w*|[^\\s\0-\\x7F]+)[?!]?|\\$.)';e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp("%r"+t+"[egimnosux]{0,6}"),greedy:!0,inside:{interpolation:n,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:n,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp("(^|[^:]):"+i),lookbehind:!0,greedy:!0},{pattern:RegExp("([\r\n{(,][ \t]*)"+i+"(?=:(?!:))"),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp("%[qQiIwWs]?"+t),greedy:!0,inside:{interpolation:n,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:n,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:n,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp("%x"+t),greedy:!0,inside:{interpolation:n,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:n,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(Prism);Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp('(^|[^"#])(?:"(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|\r\n|[^(])|[^\\\\\r\n"])*"|"""(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|[^(])|[^\\\\"]|"(?!""))*""")(?!["#])'),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp('(^|[^"#])(#+)(?:"(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|\r\n|[^#])|[^\\\\\r\n])*?"|"""(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|[^#])|[^\\\\])*?""")\\2'),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp("#(?:(?:elseif|if)\\b(?:[ \t]*(?:![ \t]*)?(?:\\b\\w+\\b(?:[ \t]*\\((?:[^()]|\\([^()]*\\))*\\))?|\\((?:[^()]|\\([^()]*\\))*\\))(?:[ \t]*(?:&&|\\|\\|))?)+|(?:else|endif)\\b)"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});!function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var s=e.languages.extend("typescript",{});delete s["class-name"],e.languages.typescript["class-name"].inside=s,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:s}}}}),e.languages.ts=e.languages.typescript}(Prism);!function(){if("undefined"!=typeof Prism&&"undefined"!=typeof document){var o="line-numbers",a=/\n(?!$)/g,e=Prism.plugins.lineNumbers={getLine:function(e,n){if("PRE"===e.tagName&&e.classList.contains(o)){var t=e.querySelector(".line-numbers-rows");if(t){var i=parseInt(e.getAttribute("data-start"),10)||1,r=i+(t.children.length-1);n<i&&(n=i),r<n&&(n=r);var s=n-i;return t.children[s]}}},resize:function(e){u([e])},assumeViewportIndependence:!0},n=void 0;window.addEventListener("resize",function(){e.assumeViewportIndependence&&n===window.innerWidth||(n=window.innerWidth,u(Array.prototype.slice.call(document.querySelectorAll("pre."+o))))}),Prism.hooks.add("complete",function(e){if(e.code){var n=e.element,t=n.parentNode;if(t&&/pre/i.test(t.nodeName)&&!n.querySelector(".line-numbers-rows")&&Prism.util.isActive(n,o)){n.classList.remove(o),t.classList.add(o);var i,r=e.code.match(a),s=r?r.length+1:1,l=new Array(s+1).join("<span></span>");(i=document.createElement("span")).setAttribute("aria-hidden","true"),i.className="line-numbers-rows",i.innerHTML=l,t.hasAttribute("data-start")&&(t.style.counterReset="linenumber "+(parseInt(t.getAttribute("data-start"),10)-1)),e.element.appendChild(i),u([t]),Prism.hooks.run("line-numbers",e)}}}),Prism.hooks.add("line-numbers",function(e){e.plugins=e.plugins||{},e.plugins.lineNumbers=!0})}function u(e){if(0!=(e=e.filter(function(e){var n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null}(e)["white-space"];return"pre-wrap"===n||"pre-line"===n})).length){var n=e.map(function(e){var n=e.querySelector("code"),t=e.querySelector(".line-numbers-rows");if(n&&t){var i=e.querySelector(".line-numbers-sizer"),r=n.textContent.split(a);i||((i=document.createElement("span")).className="line-numbers-sizer",n.appendChild(i)),i.innerHTML="0",i.style.display="block";var s=i.getBoundingClientRect().height;return i.innerHTML="",{element:e,lines:r,lineHeights:[],oneLinerHeight:s,sizer:i}}}).filter(Boolean);n.forEach(function(e){var i=e.sizer,n=e.lines,r=e.lineHeights,s=e.oneLinerHeight;r[n.length-1]=void 0,n.forEach(function(e,n){if(e&&1<e.length){var t=i.appendChild(document.createElement("span"));t.style.display="block",t.textContent=e}else r[n]=s})}),n.forEach(function(e){for(var n=e.sizer,t=e.lineHeights,i=0,r=0;r<t.length;r++)void 0===t[r]&&(t[r]=n.children[i++].getBoundingClientRect().height)}),n.forEach(function(e){var n=e.sizer,t=e.element.querySelector(".line-numbers-rows");n.style.display="none",n.innerHTML="",e.lineHeights.forEach(function(e,n){t.children[n].style.height=e+"px"})})}}}();!function(){if("undefined"!=typeof Prism){var i={tab:/\t/,crlf:/\r\n/,lf:/\n/,cr:/\r/,space:/ /};Prism.hooks.add("before-highlight",function(r){s(r.grammar)})}function f(r,e){var i=r[e];switch(Prism.util.type(i)){case"RegExp":var a={};r[e]={pattern:i,inside:a},s(a);break;case"Array":for(var n=0,t=i.length;n<t;n++)f(i,n);break;default:s(a=i.inside||(i.inside={}))}}function s(r){if(r&&!r.tab){for(var e in i)i.hasOwnProperty(e)&&(r[e]=i[e]);for(var e in r)r.hasOwnProperty(e)&&!i[e]&&("rest"===e?s(r.rest):f(r,e))}}}();!function(){if("undefined"!=typeof Prism){var i=Object.assign||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e};e.prototype={setDefaults:function(e){this.defaults=i(this.defaults,e)},normalize:function(e,n){for(var t in n=i(this.defaults,n)){var r=t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()});"normalize"!==t&&"setDefaults"!==r&&n[t]&&this[r]&&(e=this[r].call(this,e,n[t]))}return e},leftTrim:function(e){return e.replace(/^\s+/,"")},rightTrim:function(e){return e.replace(/\s+$/,"")},tabsToSpaces:function(e,n){return n=0|n||4,e.replace(/\t/g,new Array(++n).join(" "))},spacesToTabs:function(e,n){return n=0|n||4,e.replace(RegExp(" {"+n+"}","g"),"\t")},removeTrailing:function(e){return e.replace(/\s*?$/gm,"")},removeInitialLineFeed:function(e){return e.replace(/^(?:\r?\n|\r)/,"")},removeIndent:function(e){var n=e.match(/^[^\S\n\r]*(?=\S)/gm);return n&&n[0].length?(n.sort(function(e,n){return e.length-n.length}),n[0].length?e.replace(RegExp("^"+n[0],"gm"),""):e):e},indent:function(e,n){return e.replace(/^[^\S\n\r]*(?=\S)/gm,new Array(++n).join("\t")+"$&")},breakLines:function(e,n){n=!0===n?80:0|n||80;for(var t=e.split("\n"),r=0;r<t.length;++r)if(!(s(t[r])<=n)){for(var i=t[r].split(/(\s+)/g),o=0,a=0;a<i.length;++a){var l=s(i[a]);n<(o+=l)&&(i[a]="\n"+i[a],o=l)}t[r]=i.join("")}return t.join("\n")}},"undefined"!=typeof module&&module.exports&&(module.exports=e),Prism.plugins.NormalizeWhitespace=new e({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),Prism.hooks.add("before-sanity-check",function(e){var n=Prism.plugins.NormalizeWhitespace;if((!e.settings||!1!==e.settings["whitespace-normalization"])&&Prism.util.isActive(e.element,"whitespace-normalization",!0))if(e.element&&e.element.parentNode||!e.code){var t=e.element.parentNode;if(e.code&&t&&"pre"===t.nodeName.toLowerCase()){for(var r=t.childNodes,i="",o="",a=!1,l=0;l<r.length;++l){var s=r[l];s==e.element?a=!0:"#text"===s.nodeName&&(a?o+=s.nodeValue:i+=s.nodeValue,t.removeChild(s),--l)}if(e.element.children.length&&Prism.plugins.KeepMarkup){var c=i+e.element.innerHTML+o;e.element.innerHTML=n.normalize(c,e.settings),e.code=e.element.textContent}else e.code=i+e.code+o,e.code=n.normalize(e.code,e.settings)}}else e.code=n.normalize(e.code,e.settings)})}function e(e){this.defaults=i({},e)}function s(e){for(var n=0,t=0;t<e.length;++t)e.charCodeAt(t)=="\t".charCodeAt(0)&&(n+=3);return e.length+n}}();;const initPrismPulgins=()=>{Prism.plugins.NormalizeWhitespace.setDefaults({'remove-trailing':true,'remove-indent':true,'left-trim':true,'right-trim':true,'tabs-to-spaces':2,});};const initLazyHighlight=()=>{window.lazyLoadCodeInstance=new LazyLoad({threshold:500,cancel_on_exit:true,elements_selector:'.lazy-code',callback_enter:(element)=>{window.requestAnimationFrame(()=>{Prism.highlightElement(element);});},});};const initPrims=()=>{initPrismPulgins();initLazyHighlight();};if(/complete|loaded/.test(document.readyState)){initPrims();}else{window.addEventListener('load',initPrims);};;(()=>{const postActionsScript=()=>{const emojiNames={1:'angry',2:'surprised',3:'thinking',4:'laugh',5:'like',}
const classes={bookmark:'bookmarks__button',bookmarkColored:'bookmarks__button--colored',reactionItem:'reactions__item',rating:'reactions__rating',reactionsTop:'reactions__container-icons',mark:'tproger-mark',close:'icon-close',reactionsCount:'reactions__text',reactionTopIcon:'reactions__wrapper-icon',reactionsIcon:'reactions__icon',reactionContainer:'reactions',reactionList:'reactions__list',reactionCount:'reactions__text',reactionSelected:'reaction__item--selected',commentsCountContainer:'article__comments-count',commentsCountIcon:'article__comments-count__icon',commentsCountText:'article__comments-count__text',viewsCountText:'meta__views-text',viewsCountContainer:'meta__views',}
const routes={get:'/wp-node/reaction/posts',set:'/wp-node/reaction',bookmark:'/wp-node/bookmark',commentsCount:'/wp-node/comments/count',viewsCount:'/wp-node/views/posts',}
const limit=3;const emptyReactionId=5;const emptyReactionText='Оценить';const getTopReaction=(iconId)=>{const div=document.createElement('div');const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');const use=document.createElementNS('http://www.w3.org/2000/svg','use');const iconName=emojiNames[iconId];div.classList.add(classes.reactionTopIcon);svg.classList.add(classes.reactionsIcon);use.setAttribute('href',`#${iconName}`);svg.appendChild(use);div.appendChild(svg);return div;}
const getReactionEventAction=(deleted)=>{if(deleted!==true){return 'post.reaction.set';}
return 'post.reaction.drop';}
const getBookmarkAction=(deleted)=>{if(deleted!==true){return 'post.bookmark.add';}
return 'post.bookmark.remove';}
const renderReactionsForPosts=(reactions,post)=>{const postId=post.dataset.post;const reactionList=post.querySelector(`.${classes.reactionList}`);const filterReactions=reactions.filter((r)=>r.post==postId)[0];const reactionsContentCount=post.querySelector(`.${classes.reactionsCount}`);const topIcons=post.querySelector(`.${classes.reactionsTop}`);if(topIcons){const icons=topIcons.querySelectorAll(`.${classes.reactionTopIcon}`);if(icons){icons.forEach((element)=>element.remove());}}
if(reactionList){const reactions=reactionList.querySelectorAll(`.${classes.reactionItem}`);if(reactions){reactions.forEach((element)=>{element.classList.remove(classes.reactionSelected);const count=element.querySelector(`.${classes.reactionCount}`);if(count){count.innerHTML=0;}});}}
if(filterReactions&&filterReactions.reactions){postReactions=filterReactions.reactions;const reactionsSorted=postReactions.sort((lhs,rhs)=>{return rhs.count-lhs.count;})
let reactionsCount=0;let reactionsLimit=0;let topReactionList=[];reactionsSorted.forEach((r)=>{reactionsCount+=r.count;if(reactionsLimit<limit){topReactionList.push(getTopReaction(r.reaction));reactionsLimit++;}
if(reactionList){const reaction=reactionList.querySelector(`.${classes.reactionItem}[data-reaction="${r.reaction}"]`);if(reaction){const count=reaction.querySelector(`.${classes.reactionCount}`);if(count){count.innerHTML=r.count;}
if(r.is_user===true&&r.count>0){reaction.classList.add(classes.reactionSelected);}else{reaction.classList.remove(classes.reactionSelected);}}}})
topReactionList.reverse();for(let i=topReactionList.length;i>0;i--){if(topReactionList[i-1]){topIcons.append(topReactionList[i-1]);}}
if(reactionsContentCount){reactionsContentCount.innerHTML=reactionsCount;}}else{if(topIcons){topIcons.append(getTopReaction(emptyReactionId));}
if(reactionsContentCount){reactionsContentCount.innerHTML=emptyReactionText;}}}
const setBookmarkStatus=(el,deleted)=>{if(deleted){el.classList.remove(classes.bookmarkColored);}else{el.classList.add(classes.bookmarkColored);}}
const renderBookmarksForPosts=async(post,bookmarksResponse)=>{const postId=post.dataset.post;const bookmark=post.querySelector(`.${classes.bookmark}`);const bookmarkIcons=bookmark?.querySelector('.article__button-action-icon');const bookmarkCount=bookmark?.querySelector('.article__button-action-text');if(bookmarksResponse&&bookmarksResponse.length>0){bookmarksResponse.forEach((item)=>{if(parseInt(item.post)===parseInt(postId)){if(bookmarkCount){bookmarkCount.innerHTML=item.count??'';}
if(item.is_user!==false){setBookmarkStatus(bookmark,false);}}});}
const updateBookmarks=async()=>{const response=await fetch(routes.bookmark,{method:'POST',headers:window.getHeaders(),body:JSON.stringify({post:postId}),});if(response.status!==200){return;}
const json=await response.json();setBookmarkStatus(bookmark,json.deleted);const event=getBookmarkAction(json.deleted);const version=2;if(window.ta){window.ta(event,version,{post});}
if(json.counts&&parseInt(json.counts)>0){bookmarkCount.innerHTML=json.counts;}else{bookmarkCount.innerHTML='';}}
if(bookmark){bookmark.onclick=async()=>{if(window.currentUser){await updateBookmarks();}else{window.authPlace=window.authPlaces.bookmark;window.openAuthModal();window.onUserAuth=updateBookmark;}}}}
const setLoadedStatus=async($posts,selector,loadedFlag=null)=>{for(const $post of $posts){if(loadedFlag!==null&&loadedFlag!==''){$post.dataset[`postActionLoading${loadedFlag}`]='yes';}
const $item=$post.querySelector(`.${selector}`);if(typeof $item!=='undefined'&&$item){$item.dataset.loaded='yes';}}}
const renderCommentsCountForPost=async($post,countResponse)=>{const $commentsCountContainer=$post.querySelector(`.${classes.commentsCountContainer}`);if(!$commentsCountContainer){return;}
const $commentsCountText=$commentsCountContainer.querySelector(`.${classes.commentsCountText}`);if(!$commentsCountText){return;}
if($commentsCountText){for(const countResponseItem of countResponse){if(parseInt(countResponseItem.post)===parseInt($post.dataset.post)){$commentsCountText.innerHTML=countResponseItem.count;break;}}}};const getPostsID=(posts)=>{const postIDs=[];posts.forEach((post)=>{if(post.dataset.post){postIDs.push(post.dataset.post)}});if(postIDs.length!==0){return postIDs}
return null}
const getCommentsCount=async()=>{const posts=document.querySelectorAll('article:not([data-post-action-loading-comments])');const postIDs=getPostsID(posts)
if(!postIDs){return}
const response=await fetch(`${routes.commentsCount}/posts?ids=${postIDs.join(',')}`,{headers:window.getHeaders(),})
if(response.status!==200){console.error('Ошибка получения количества комментариев к записям. Попробуйте позже.');await setLoadedStatus(posts,classes.commentsCountContainer)
return;}
const commentsCountResponse=await response.json();if(!commentsCountResponse||commentsCountResponse.length===0){await setLoadedStatus(posts,classes.commentsCountContainer)
return;}
posts.forEach((post)=>{renderCommentsCountForPost(post,commentsCountResponse);})
await setLoadedStatus(posts,classes.commentsCountContainer,'Comments')};const getUserBookmarks=async()=>{const posts=document.querySelectorAll('article:not([data-post-action-loading-bookmarks])');const postIDs=getPostsID(posts)
if(!postIDs){return}
const response=await fetch(`${routes.bookmark}/posts?ids=${postIDs.join(',')}`,{headers:window.getHeaders(),});if(response.status!==200){console.error('Ошибка получения закладок для записей. Попробуйте позже.');await setLoadedStatus(posts,classes.bookmark);return;}
const bookmarksResponse=await response.json();if(!bookmarksResponse){await setLoadedStatus(posts,classes.bookmark);return;}
posts.forEach((post)=>{renderBookmarksForPosts(post,bookmarksResponse);})
await setLoadedStatus(posts,classes.bookmark,'Bookmarks');}
const getUserReactions=async()=>{const posts=document.querySelectorAll('article:not([data-post-action-loading-reactions])');const postIDs=getPostsID(posts)
if(!postIDs){return}
const response=await fetch(`${routes.get}?ids=${postIDs.join(',')}`,{headers:window.getHeaders(),});if(response.status!==200){console.error('Произошла ошибка при загрузке реакций для записей. Пожалуйста, попробуйте позже.');await setLoadedStatus(posts,classes.reactionContainer);return;}
const reactions=await response.json()
if(reactions){posts.forEach((post)=>{renderReactionsForPosts(reactions,post);})}
await setLoadedStatus(posts,classes.reactionContainer,'Reactions');}
const renderPostViews=(post,data)=>{const postId=parseInt(post.dataset.post);const postViews=data.filter((el)=>{return el.post===postId;})[0];let postViewsCount=0;if(postViews!==undefined){postViewsCount=postViews.count;}
const $postViewsText=post.querySelector(`.${classes.viewsCountText}`);const $postViewsContainer=post.querySelector(`.${classes.viewsCountContainer}`);if($postViewsContainer){$postViewsContainer.dataset.count=postViewsCount;}
if($postViewsText){$postViewsText.innerHTML=postViewsCount;}}
const getPostViews=async()=>{const posts=document.querySelectorAll('article:not([data-post-action-loading-views])');const postIDs=getPostsID(posts)
if(!postIDs){return}
const response=await fetch(`${routes.viewsCount}?ids=${postIDs.join(',')}`,{headers:window.getHeaders(),});if(response.status===404){await setLoadedStatus(posts,classes.viewsCountContainer);return;}
if(response.status!==200){console.error('Ошибка получения просмотров для записей. Попробуйте позже.');await setLoadedStatus(posts,classes.viewsCountContainer);return;}
const viewsResponse=await response.json();if(!viewsResponse||viewsResponse.length===0){await setLoadedStatus(posts,classes.viewsCountContainer);return;}
posts.forEach((post)=>{renderPostViews(post,viewsResponse);})
await setLoadedStatus(posts,classes.viewsCountContainer,'Views');}
window.getCommentsCount=getCommentsCount;window.getUserBookmarks=getUserBookmarks;window.getUserReactions=getUserReactions;window.getPostViews=getPostViews;const setReactionEventListener=()=>{document.addEventListener('click',(e)=>{const reactions=document.querySelectorAll('.reactions')
if(reactions){reactions.forEach(reaction=>{const dropdown=reaction.querySelector('.reactions__dropdown--show')
if(!reaction.contains(e.target)&&dropdown){dropdown.classList.remove('reactions__dropdown--show')}})}})}
setReactionEventListener()
const setReactionValue=()=>{const posts=document.querySelectorAll('article');posts.forEach((post)=>{const reactions=post.querySelectorAll(`.${classes.reactionItem}[data-reaction]`);const postId=post.dataset.post;reactions.forEach((reaction)=>{reaction.onclick=async()=>{reaction.parentElement.parentElement.classList.toggle('reactions__dropdown--show');if(window.currentUser){const response=await fetch(routes.set,{method:'POST',headers:window.getHeaders(),body:JSON.stringify({post:postId,reaction:reaction.dataset.reaction,}),})
if(response.status!==200){await setLoadedStatus(posts,classes.reactionContainer);return;}
const result=await response.json();if(result.reactions){renderReactionsForPosts(result.reactions,post);}
await setLoadedStatus(posts,classes.reactionContainer);const event=getReactionEventAction(result.is_deleted);if(window.ta){window.ta(event,1,{postId:parseInt(postID),reactionId:parseInt(reaction.dataset.reaction),})}}else{window.authPlace=window.authPlaces.reaction;window.openAuthModal();window.onUserAuth=()=>{setReactionValue();getUserReactions();getUserBookmarks();getPostViews();}}}})})}
window.setReactions=async(doc)=>{if(!doc){doc=document;}
setReactionValue()
const mainReactionsButtons=doc.querySelectorAll('.reactions__main-button');const buttonsCloseDropdown=doc.querySelectorAll('.reactions__button--close');const toogleDropdownReactions=(element)=>{if(element){element.classList.toggle('reactions__dropdown--show');}}
mainReactionsButtons.forEach((element)=>{element.onclick=(e)=>{e.preventDefault();toogleDropdownReactions(e.currentTarget.nextElementSibling);}})
buttonsCloseDropdown.forEach((element)=>{element.onclick=(e)=>{e.preventDefault();toogleDropdownReactions(e.currentTarget.parentElement.parentElement.parentElement);}})}
Promise.all([setReactions(),getUserBookmarks(),getUserReactions(),getCommentsCount(),getPostViews(),]).then(r=>{}).catch(e=>{console.error('Непредвиденная ошибка:',e);})}
if(/complete|interactive|loaded/.test(document.readyState)){postActionsScript();}else{document.addEventListener('DOMContentLoaded',postActionsScript,false);}})();;document.addEventListener("DOMContentLoaded",()=>{const mainMenuButtons=document.querySelectorAll(".menu-category__button");let activePopup=null;mainMenuButtons.forEach(element=>{element.addEventListener("click",(e)=>{if(e.currentTarget.nextElementSibling!==null){e.currentTarget.querySelector(".menu-category__text--more").classList.toggle("menu-category__text--more-flip");if(e.currentTarget.nextElementSibling.classList.contains("popup-subcategories--show")){hidePopup(e.currentTarget.nextElementSibling);}else{if(activePopup){hidePopup(activePopup);showPopup(e.currentTarget.nextElementSibling,e.currentTarget.clientWidth);}else{showPopup(e.currentTarget.nextElementSibling,e.currentTarget.clientWidth);}}}});});const showPopup=(element,leftPosition)=>{if(element){activePopup=element;element.style.display='flex';element.classList.add("popup-subcategories--show")
element.style.left=`${leftPosition}px`;}}
const hidePopup=(element)=>{if(element){activePopup=null;element.classList.remove("popup-subcategories--show");element.style.display="none";}}
const buttonShowPopupMoreCategories=document.querySelectorAll("#buttonShowPopupMoreCategories");const buttonHidePopupMoreCategories=document.getElementById("buttonHidePopupMoreCategories");const popupMoreCategories=document.getElementById("popupMoreCategories");let isShowPopupMoreCategories=false;if(buttonShowPopupMoreCategories){buttonShowPopupMoreCategories.forEach(button=>{button.addEventListener("click",(e)=>{e.preventDefault();tooglePopupMoreCategories();});})}
if(buttonHidePopupMoreCategories){buttonHidePopupMoreCategories.addEventListener("click",(e)=>{e.preventDefault();tooglePopupMoreCategories();});}
document.addEventListener('keydown',(e)=>{if(e.code==="Escape"){if(isShowPopupMoreCategories===true){tooglePopupMoreCategories();}}});const tooglePopupMoreCategories=()=>{isShowPopupMoreCategories=!isShowPopupMoreCategories;popupMoreCategories.classList.toggle("popup-more-categories--show")};});;;const toggleComponent=()=>{document.querySelectorAll('.toggle__title').forEach(button=>{button.onclick=(e)=>{button.closest('.toggle').classList.toggle('open')}})
const resizeObserver=new ResizeObserver(entries=>{for(let entry of entries){const container=entry.target.closest('.toggle')
const height=entry.borderBoxSize[0].blockSize
container.style.cssText=`--height: ${height}px`}})
document.querySelectorAll('.toggle__inner').forEach(inner=>resizeObserver.observe(inner))}
if(/complete|interactive|loaded/.test(document.readyState)){toggleComponent()}else{document.addEventListener('DOMContentLoaded',toggleComponent,false)};document.addEventListener("DOMContentLoaded",()=>{const buttonShowAsideMenu=document.getElementById("buttonShowAsideMenu");const buttonHideAsideMenu=document.getElementById("buttonHideAsideMenu");const asideMenu=document.getElementById("asideMenu");const asideMenuWrapper=asideMenu.querySelector(".aside-left__wrapper");const substrateAsideMenu=document.getElementById("substrateAsideMenu");let isShowAsideMenu=false;let isShowPopupMoreCategories=false;const isAppleDevice=/(Mac|iPhone|iPod|iPad)/i.test(window.navigator.userAgent);if(!isAppleDevice){if(asideMenu){asideMenu.classList.add("aside-left--styled-scroll");}}
buttonShowAsideMenu.addEventListener("click",(e)=>{e.preventDefault();showAsideMenu();});buttonHideAsideMenu.addEventListener("click",(e)=>{e.preventDefault();hideAsideMenu();});document.addEventListener('keydown',(e)=>{if(e.code==="Escape"){if(isShowPopupMoreCategories===true){hideAsideMenu();}}});document.addEventListener('click',(e)=>{if(isShowAsideMenu){if(e.target.isEqualNode(substrateAsideMenu)){hideAsideMenu();}}});function showAsideMenu(){isShowAsideMenu=true;document.querySelector("body").classList.add("disabled-scroll");asideMenu.classList.add("aside-left--show");substrateAsideMenu.classList.add("aside-left__substrate--show");}
function hideAsideMenu(){isShowAsideMenu=false;document.querySelector("body").classList.remove("disabled-scroll");asideMenu.classList.remove("aside-left--show");substrateAsideMenu.classList.remove("aside-left__substrate--show");}
const buttonOpenDropdownFooterNavigation=document.getElementById("buttonOpenDropdownFooterNavigation");let isShowDropdownFooterNavigation=false;buttonOpenDropdownFooterNavigation.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();const iconButtonDropdown=e.currentTarget.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const position=e.currentTarget.parentElement.parentElement.getBoundingClientRect();const idDropdown=e.currentTarget.getAttribute("data-dropdown-id");const dropdownItem=document.getElementById(idDropdown);dropdownItem.style.left=`${position.left}px`;dropdownItem.style.top=`${position.top+20}px`;toggleDropdownFooterNavigation(dropdownItem);isShowDropdownFooterNavigation=!isShowDropdownFooterNavigation;});const buttonOpenDropdownSocialNetworkFooterNavigation=document.getElementById("buttonOpenDropdownSocialNetworkFooterNavigation");let isShowDropdownSocialNetworksFooterNavigation=false;buttonOpenDropdownSocialNetworkFooterNavigation.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();const iconButtonDropdown=e.currentTarget.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const position=e.currentTarget.parentElement.parentElement.getBoundingClientRect();const idDropdown=e.currentTarget.getAttribute("data-dropdown-id");const dropdownItem=document.getElementById(idDropdown);dropdownItem.style.left=`${position.left}px`;dropdownItem.style.top=`${position.top+20}px`;toggleDropdownFooterNavigation(dropdownItem);isShowDropdownSocialNetworksFooterNavigation=!isShowDropdownSocialNetworksFooterNavigation;});function flipIconButtonDropdownFooterNavigation(iconItem){iconItem.classList.toggle("footer-navigation__icon--flip");}
function toggleDropdownFooterNavigation(dropdownItem){dropdownItem.classList.toggle("footer-navigation__dropdown--show");}
document.addEventListener('click',(e)=>{if(isShowDropdownFooterNavigation){const iconButtonDropdown=buttonOpenDropdownFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const idDropdown=buttonOpenDropdownFooterNavigation.getAttribute("data-dropdown-id");const dropdown=document.getElementById(idDropdown);if(!e.target.isEqualNode(dropdown)){toggleDropdownFooterNavigation(dropdown);isShowDropdownFooterNavigation=!isShowDropdownFooterNavigation;}}else if(isShowDropdownSocialNetworksFooterNavigation){const idDropdownSocialNetwork=buttonOpenDropdownSocialNetworkFooterNavigation.getAttribute("data-dropdown-id");const dropdownSocialNetwork=document.getElementById(idDropdownSocialNetwork);if(!e.target.isEqualNode(dropdownSocialNetwork)){const iconButtonDropdown=buttonOpenDropdownSocialNetworkFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);toggleDropdownFooterNavigation(dropdownSocialNetwork);isShowDropdownSocialNetworksFooterNavigation=!isShowDropdownSocialNetworksFooterNavigation;}}});asideMenu.addEventListener('scroll',(e)=>{if(isShowDropdownFooterNavigation){isShowDropdownFooterNavigation=!isShowDropdownFooterNavigation;const iconButtonDropdown=buttonOpenDropdownFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const idDropdown=buttonOpenDropdownFooterNavigation.getAttribute("data-dropdown-id");const dropdown=document.getElementById(idDropdown);if(!e.target.isEqualNode(dropdown)){toggleDropdownFooterNavigation(dropdown);}}else if(isShowDropdownSocialNetworksFooterNavigation){isShowDropdownSocialNetworksFooterNavigation=!isShowDropdownSocialNetworksFooterNavigation;const iconButtonDropdown=buttonOpenDropdownSocialNetworkFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const idDropdownSocialNetwork=buttonOpenDropdownSocialNetworkFooterNavigation.getAttribute("data-dropdown-id");const dropdownSocialNetwork=document.getElementById(idDropdownSocialNetwork);toggleDropdownFooterNavigation(dropdownSocialNetwork);}});asideMenuWrapper.addEventListener('scroll',(e)=>{if(isShowDropdownFooterNavigation){isShowDropdownFooterNavigation=!isShowDropdownFooterNavigation;const iconButtonDropdown=buttonOpenDropdownFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const idDropdown=buttonOpenDropdownFooterNavigation.getAttribute("data-dropdown-id");const dropdown=document.getElementById(idDropdown);if(!e.target.isEqualNode(dropdown)){toggleDropdownFooterNavigation(dropdown);}}else if(isShowDropdownSocialNetworksFooterNavigation){isShowDropdownSocialNetworksFooterNavigation=!isShowDropdownSocialNetworksFooterNavigation;const iconButtonDropdown=buttonOpenDropdownSocialNetworkFooterNavigation.querySelector(".footer-navigation__icon");flipIconButtonDropdownFooterNavigation(iconButtonDropdown);const idDropdownSocialNetwork=buttonOpenDropdownSocialNetworkFooterNavigation.getAttribute("data-dropdown-id");const dropdownSocialNetwork=document.getElementById(idDropdownSocialNetwork);toggleDropdownFooterNavigation(dropdownSocialNetwork);}});});;const initScriptAsideRight=()=>{const asideRight=document.getElementById("asideRight");let ticking=false;if(asideRight){const resizeObserver=new MutationObserver(entries=>{setFixClassAsideRight();});resizeObserver.observe(asideRight,{attributes:true,attributeFilter:['data-container-loaded'],});}
function setFixClassAsideRight(){if(asideRight.clientHeight>window.innerHeight){window.addEventListener("scroll",(e)=>{if(e.currentTarget.innerHeight+e.currentTarget.pageYOffset>=asideRight.offsetHeight){if(!ticking){window.requestAnimationFrame((e)=>{asideRight.classList.add("aside-right--fix-bottom");ticking=true;});}}else{if(ticking){window.requestAnimationFrame((e)=>{asideRight.classList.remove("aside-right--fix-bottom");ticking=false;});}}});}else{asideRight.classList.add("aside-right--fix-top");}}}
if(/complete|interactive|loaded/.test(document.readyState)){initScriptAsideRight();}else{document.addEventListener("DOMContentLoaded",initScriptAsideRight,false);};document.addEventListener("DOMContentLoaded",()=>{const buttonOpenDropdownPostsFiltersMobile=document.querySelector("#buttonOpenDropdownPostsFiltersMobile");if(buttonOpenDropdownPostsFiltersMobile){const iconButtonOpenDropdownPostsFiltersMobile=buttonOpenDropdownPostsFiltersMobile.querySelector(".posts-filters-mobile__icon");const dropdownPostsFiltersMobile=document.getElementById("dropdownPostsFiltersMobile");buttonOpenDropdownPostsFiltersMobile.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();toggleDropdownPostsFiltersMobile(dropdownPostsFiltersMobile);iconButtonOpenDropdownPostsFiltersMobile.classList.toggle("posts-filters-mobile__icon--rotate");});}
const dropdownFilter=document.getElementById("dropdownFilter");const buttonOpenDropdownFilter=document.getElementById("buttonOpenDropdownFilter");if(!buttonOpenDropdownFilter){return}
buttonOpenDropdownFilter.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();if(dropdownFilter.classList.contains("posts-filters__dropdown--show")){hideDropdowFilters(dropdownFilter);}else{showDropdowFilters(dropdownFilter);}});const dropdownAdvancedFilter=document.getElementById("dropdownAdvancedFilter");const buttonOpenDropdownAdvancedFilter=document.getElementById("buttonOpenDropdownAdvancedFilter");const buttonCloseDropdownAdvancedFilter=document.getElementById("buttonCloseDropdownAdvancedFilter");buttonOpenDropdownAdvancedFilter.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();if(dropdownAdvancedFilter.classList.contains("posts-filters__dropdown--show")){hideDropdowFilters(dropdownAdvancedFilter);}else{showDropdowFilters(dropdownAdvancedFilter);}
document.addEventListener('click',(e)=>{});});buttonCloseDropdownAdvancedFilter.addEventListener("click",(e)=>{e.preventDefault();e.stopPropagation();hideDropdowFilters(dropdownAdvancedFilter);});const removeAllArticle=()=>{document.querySelectorAll('.main__posts-wrapper > article').forEach(article=>{article.remove()})
document.querySelectorAll('.main__posts-wrapper > *[data-widget-delete-watch]').forEach(article=>{article.remove()})}
let activeShowDropdown=null;document.addEventListener('keydown',(e)=>{if(e.code==="Escape"){if(activeShowDropdown){hideDropdowFilters(activeShowDropdown);}}});function showDropdowFilters(element){if(element){activeShowDropdown=element;element.classList.add("posts-filters__dropdown--show");}}
function hideDropdowFilters(element){if(element){activeShowDropdown=null;element.classList.remove("posts-filters__dropdown--show");}}
function toggleDropdownPostsFiltersMobile(element){if(element){activeShowDropdown=null;element.classList.toggle("posts-filters-mobile__dropdown--show");}}
document.addEventListener('click',(e)=>{if(!e.currentTarget.isSameNode(buttonOpenDropdownFilter)){if(dropdownFilter.classList.contains("posts-filters__dropdown--show")){hideDropdowFilters(dropdownFilter);}}
if(!e.currentTarget.isSameNode(buttonOpenDropdownAdvancedFilter)&&!dropdownAdvancedFilter.contains(e.target)){if(dropdownAdvancedFilter.classList.contains("posts-filters__dropdown--show")){hideDropdowFilters(dropdownAdvancedFilter);}}
if(!e.currentTarget.isSameNode(buttonOpenDropdownPostsFiltersMobile)&&!dropdownPostsFiltersMobile.contains(e.target)){if(dropdownPostsFiltersMobile.classList.contains("posts-filters-mobile__dropdown--show")){toggleDropdownPostsFiltersMobile(dropdownPostsFiltersMobile);}}});const getSearchParam=(param)=>{const value=(new URL(document.location)).searchParams.get(param)
return value!==null?value:''}
const initFilterPosts=()=>{const filter=document.querySelector('.posts-filters')
if(filter){const submitButton=filter.querySelector('#tproger-filter__submit-button')
const removeButton=filter.querySelector('#tproger-filter__remove-button')
const form=document.querySelector('#advanced-filter__form')
const categoriesSelect=filter.querySelector('.tp-select__select')
const categories=filter.querySelectorAll('.tp-select__select > option')
const tags=filter.querySelectorAll('.checkbox-button__checkbox')
const formTags=form.querySelector('.advanced-filter__form-tags')
const formCategories=form.querySelector('.advanced-filter__form-categories')
const dropdownButtons=document.querySelectorAll('.posts-filters__dropdown-item')
const dropdownButtonsMobile=document.querySelectorAll('.posts-filters-mobile__button-dropdown')
const newPostsSortButtons=document.querySelectorAll('#buttonNewPostsSort')
const hotPostsSortButtons=document.querySelectorAll('#buttonHotPostsSort')
const tagBeginners=filter.querySelector('input[id="40"]')
const buttonSite=document.querySelector('#buttonFilterSite')
let sortState=getSearchParam()
let statusActiveButtonSite=true
const getParamsSearchPosts=()=>{let filterTags=[]
let filterCategories=[]
for(let tag of tags){if(tag.checked){filterTags.push(tag.value)}}
if(tagBeginners.checked){filterTags.push(tagBeginners.value)}
for(let category of categories){if(category.selected){filterCategories.push(category.value)}}
const params={sort:sortState}
if(!statusActiveButtonSite){params.tags=filterTags,params.category=filterCategories}
return params}
const removeAllFilters=()=>{for(let tag of tags){if(tag.checked){tag.checked=false}}
tagBeginners.checked=false
formTags.value=''
for(let category of categories){if(category.selected){category.selected=''}}
formCategories.value=''}
const updateSubmitData=()=>{const params=getParamsSearchPosts()
if(params.tags&&params.tags.length>=0){formTags.value=params.tags.join(',')}
if(params.categories&&params.categories.length>=0){formCategories.value=params.categories.join(',')}}
submitButton.onclick=()=>{buttonCloseDropdownAdvancedFilter.click()
removeAllArticle()
statusActiveButtonSite=false
const params=getParamsSearchPosts()
window.getFiltersPosts(params)}
removeButton.onclick=()=>{buttonCloseDropdownAdvancedFilter.click()
removeAllArticle()
removeAllFilters()
const params=getParamsSearchPosts()
window.getFiltersPosts(params)}
if(buttonSite){buttonSite.onclick=()=>{const props={sort:sortState}
statusActiveButtonSite=true
removeAllArticle()
window.getFiltersPosts(props)}}
newPostsSortButtons.forEach(newPostsSortButton=>{newPostsSortButton.onclick=()=>{sortState=newPostsSortButton.dataset.sort;const props=getParamsSearchPosts()
removeAllArticle()
window.getFiltersPosts(props)}})
hotPostsSortButtons.forEach(hotPostsSortButton=>{hotPostsSortButton.onclick=()=>{sortState=hotPostsSortButton.dataset.sort;const props=getParamsSearchPosts()
removeAllArticle()
window.getFiltersPosts(props)}})
dropdownButtonsMobile.forEach(dropdownButtonMobile=>{dropdownButtonMobile.onclick=()=>{const oldActiveButtonMobile=filter.querySelector('.posts-filters-mobile__button-dropdown--active');if(typeof oldActiveButtonMobile!=='undefined'&&oldActiveButtonMobile){oldActiveButtonMobile.classList.remove('posts-filters-mobile__button-dropdown--active');}
dropdownButtonMobile.classList.add('posts-filters-mobile__button-dropdown--active');buttonOpenDropdownPostsFiltersMobile.querySelector('.posts-filters-mobile__text').innerText=dropdownButtonMobile.textContent;sortState=dropdownButtonMobile.dataset.sort;const props=getParamsSearchPosts();removeAllArticle();buttonOpenDropdownPostsFiltersMobile.click();window.getFiltersPosts(props);}});dropdownButtons.forEach(dropdownButton=>{dropdownButton.onclick=()=>{const oldActiveButton=filter.querySelector('.posts-filters__dropdown-link--active')
const linkButton=dropdownButton.querySelector('.posts-filters__dropdown-link')
if(typeof oldActiveButton!=='undefined'&&oldActiveButton){oldActiveButton.classList.remove('posts-filters__dropdown-link--active')}
if(typeof linkButton!=='undefined'&&linkButton){linkButton.classList.add('posts-filters__dropdown-link--active')}
sortState=dropdownButton.dataset.sort;const props=getParamsSearchPosts()
removeAllArticle()
buttonOpenDropdownFilter.click()
window.getFiltersPosts(props)}})
for(let tag of tags){tag.onchange=()=>{updateSubmitData()}}
if(categoriesSelect){categoriesSelect.onchange=()=>{updateSubmitData()}}}}
initFilterPosts()});;document.addEventListener('DOMContentLoaded',()=>{window.reachGoal=(eventCategory,eventAction,eventLabel,forceYandexGoal=false)=>{if(window.yaCounter27485085){yaCounter27485085.reachGoal(forceYandexGoal?forceYandexGoal:[eventCategory,eventAction,eventLabel].join('_'),)}
if(window.ga){ga('send','event',eventCategory,eventAction,eventLabel)}}
window.social_share=(data)=>{var w=760
var h=450
var goal=''
if(data.indexOf('vk.com')!==-1){goal='VK_SHARE'
w=650
h=584}else if(data.indexOf('twitter.com')!==-1){goal='TW_SHARE'
w=687
h=253}else if(data.indexOf('telegram.me')!==-1){goal='TG_SHARE'
data=data.replace('https://telegram.me/share/url','tg://msg_url')}else if(data.indexOf('ok.ru')!==-1){goal='OK_SHARE'
w=600
h=435}else if(data.indexOf('pinterest.com')!==-1){goal='PT_SHARE'}else if(data.indexOf('getpocket.com')!==-1){goal='PK_SHARE'
w=558
h=284}else if(data.indexOf('mailto:')!==-1){goal='EM_SHARE'}
if(goal!==''){reachGoal('share','click',goal,goal)}
var dualScreenLeft=window.screenLeft!=undefined?window.screenLeft:screen.left
var dualScreenTop=window.screenTop!=undefined?window.screenTop:screen.top
var width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width
var height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height
var left=width/2-w/2+dualScreenLeft
var top=height/2-h/2+dualScreenTop
var newWindow=window.open(data,'fbshare','height='+
h+
',width='+
w+
',top='+
top+
',left='+
left+
',resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0',)
if(window.focus){newWindow.focus()}
if(window.approveAchieve&&window.postID){let achieveName='Прочитал сам — поделись с другом'
window.approveAchieve(achieveName,window.postID)}}
document.addEventListener('mouseup',(e)=>{if(e.target.closest('.sharing-button')===null){executeIfElementsExists('.sharing-button-contaier',(elem)=>{elem.classList.remove('open')
const menu=elem.querySelector('.sharing-menu')
if(menu){menu.style.display='none'
const layoutBoundary=menu.closest('.layout-boundary')
layoutBoundary&&layoutBoundary.classList.remove('layout-boundary--disabled')}})}})
executeIfElementsExists('.sharing-button',(button)=>{button.onclick=()=>{const container=button.parentNode
const lock=document.querySelector('.sharing-lock')
if(lock.parentNode!==container){container.appendChild(lock)}
const menu=document.querySelector('.sharing-menu')
if(menu.parentNode!==container){container.appendChild(menu)}
const layoutBoundary=container.closest('.layout-boundary')
if(container.classList.contains('open')){container.classList.remove('open')
menu.addEventListener('transitionend',(e)=>{menu.style.display=null
layoutBoundary&&layoutBoundary.classList.remove('layout-boundary--disabled')},{once:true},)}else{layoutBoundary&&layoutBoundary.classList.add('layout-boundary--disabled')
menu.style.display='flex'
menu.getBoundingClientRect()
container.classList.add('open')}}})
window.copyLinkToClipboard=(url)=>{const dummy=document.createElement('input')
dummy.style.zIndex=-1
dummy.style.position='fixed'
document.body.appendChild(dummy)
dummy.value=url
dummy.select()
document.execCommand('copy')
document.body.removeChild(dummy)
const goal='LINK_COPY'
reachGoal('share','click',goal,goal)
window.successNotyf(`<span class='size16px'>Готово! Ссылка на этот пост у вас в буфере обмена</span>`)}});;;;;;;;document.addEventListener("DOMContentLoaded",()=>{const classesElements={radioButton:"tp-switch-theme__radio",switchDrop:"tp-switch-theme__drop",}
const clasesTheme={light:"theme--light",auto:"theme--auto",dark:"theme--dark",}
function setCheckedRadioButton(themeName){const radioButton=document.querySelector(`.tp-switch-theme__radio[value="${themeName}"]`);radioButton.checked=true;moveDrop(radioButton);}
function moveDrop(elementRadio){switchDrop.style.transform=`translateX(${elementRadio.offsetLeft-12}px)`;}
function setTheme(themeName){addClassThemeBody(themeName);}
function addClassThemeBody(themeName){body.classList.add(clasesTheme[themeName]);}
function removeClassThemeBody(themeName){body.classList.remove(clasesTheme[themeName]);}
function getSavedTheme(){return window.docCookies.get("color-theme");}
function saveTheme(nameTheme){window.docCookies.set("color-theme",nameTheme,new Date(Date.now()+7*24*3600*1000),'/');}
const body=document.querySelector("body");const radioButtons=document.querySelectorAll(`.${classesElements.radioButton}`);const switchDrop=document.querySelector(`.${classesElements.switchDrop}`);radioButtons.forEach(button=>{button.addEventListener("change",(e)=>{const savedTheme=getSavedTheme();if(savedTheme===null){removeClassThemeBody("auto");}else{removeClassThemeBody(savedTheme);}
saveTheme(e.currentTarget.value);moveDrop(e.currentTarget);setTheme(e.currentTarget.value);});});const savedTheme=getSavedTheme();if(savedTheme){setCheckedRadioButton(savedTheme);}else{window.docCookies.set('color-theme','auto',new Date(Date.now()+7*24*3600*1000),'/')}});;const initErrorsPopup=()=>{const errorsPopup=document.querySelector('#errors-popup')
const errorsPopupOpener=document.querySelector('#errors-popup-opener')
if(errorsPopup&&errorsPopupOpener){const errorsPopupCloseButton=errorsPopup.querySelector('.errors-popup__close-button')
const errorsPopupSubmitButton=errorsPopup.querySelector('.errors-popup__submit-button')
const errorsPopupTextarea=errorsPopup.getElementsByClassName('errors-popup__textarea')
const errorsPopupCover=errorsPopup.querySelector('.errors-popup__cover')
const removeValueTextarea=()=>{errorsPopupTextarea['arrange'].value=''
errorsPopupTextarea['actual'].value=''
errorsPopupTextarea['assert'].value=''}
errorsPopupSubmitButton.onclick=async()=>{const params={arrange:errorsPopupTextarea['arrange'].value,actual:errorsPopupTextarea['actual'].value,assert:errorsPopupTextarea['assert'].value,}
if(params.arrange!==''&&params.actual!==''&&params.assert!==''){await fetch('/wp-node/user/bug',{method:'POST',headers:window.getHeaders(),body:JSON.stringify(params),}).then(()=>{window.successNotyf('Баг отправлен на рассмотрение, спасибо')
errorsPopup.classList.remove('open')
removeValueTextarea()}).catch(()=>{window.warningNotyf('Вы превысили количество запросов в багрепорт, попробуйте позже')
errorsPopup.classList.remove('open')})}else{window.warningNotyf('Все поля должны быть заполнены')}}
errorsPopupCover.onclick=()=>{errorsPopup.classList.remove('open')}
errorsPopupCloseButton.onclick=()=>{errorsPopup.classList.remove('open')}
errorsPopupOpener.onclick=()=>{errorsPopup.classList.add('open')}}}
if(/complete|interactive|loaded/.test(document.readyState)){initErrorsPopup();}else{document.addEventListener('DOMContentLoaded',initErrorsPopup,false);};;;;;const scriptElement=()=>{const namesClass={buttonsGroup:"buttons-group",buttonsGroupMini:"buttons-group--mini",buttonsGroupButton:"buttons-group__button",buttonsGroupActiveButton:"buttons-group__button--active",buttonsGroupDrop:"buttons-group__drop",}
const buttonsGroupElements=document.querySelectorAll(`.${namesClass.buttonsGroup}`);buttonsGroupElements.forEach((buttonsGroupElement,key)=>{const dropCurrentButtonsGroup=buttonsGroupElement.querySelector(`.${namesClass.buttonsGroupDrop}`);const buttonsCurrentButtonsGroup=buttonsGroupElement.querySelectorAll(`.${namesClass.buttonsGroupButton}`);const activeButton=buttonsGroupElement.querySelector(`.${namesClass.buttonsGroupActiveButton}`);dataSet(buttonsGroupElement,key);if(dropCurrentButtonsGroup){dataSet(dropCurrentButtonsGroup,key);}
buttonsCurrentButtonsGroup.forEach(buttonButtonsGroupElement=>{dataSet(buttonButtonsGroupElement,key);});if(activeButton){setParamsDropButtonsGroup(dropCurrentButtonsGroup,activeButton.offsetLeft,activeButton.clientWidth);}
const resizeObserver=new ResizeObserver(entries=>{entries.forEach(entry=>{if(entry.contentBoxSize){const contentBoxSize=Array.isArray(entry.contentBoxSize)?entry.contentBoxSize[0]:entry.contentBoxSize;const activeButton=findActiveButton(`${namesClass.buttonsGroupActiveButton}`,`buttons-group-${key}`);if(activeButton){setParamsDropButtonsGroup(dropCurrentButtonsGroup,activeButton.offsetLeft,activeButton.clientWidth);}}});});resizeObserver.observe(buttonsGroupElement);buttonsCurrentButtonsGroup.forEach(element=>{element.addEventListener("click",(e)=>{const dataButtonButtonsGroup=e.currentTarget.getAttribute("data-buttons-group-key");const activeButton=findActiveButton(`${namesClass.buttonsGroupActiveButton}`,dataButtonButtonsGroup);setParamsDropButtonsGroup(dropCurrentButtonsGroup,e.currentTarget.offsetLeft,e.currentTarget.clientWidth);switchActiveButton(`${namesClass.buttonsGroupActiveButton}`,activeButton,e.currentTarget);});});});function findActiveButton(activeClass,dataButtonsGroup){return document.querySelector(`.${activeClass}[data-buttons-group-key="${dataButtonsGroup}"]`);}
function setParamsDropButtonsGroup(element,offsetLeftActiveButton,widthActiveButton){element.style.transform=`translateX(${offsetLeftActiveButton}px) `
element.style.width=`${widthActiveButton}px`}
function switchActiveButton(activeClass,oldActiveElement,newActiveElement){oldActiveElement.classList.remove(activeClass);newActiveElement.classList.add(activeClass);}
function dataSet(element,key){element.dataset.buttonsGroupKey=`buttons-group-${key}`;};}
if(/complete|interactive|loaded/.test(document.readyState)){scriptElement()}else{document.addEventListener('DOMContentLoaded',scriptElement,false)};const initUIComponentModalFullscreen=()=>{const namesClass={modalFullscreen:"tp-modal-fullscreen",modalFullscreenShow:"tp-modal-fullscreen--show",closeButton:"tp-modal-fullscreen__close-button",}
const buttonsOpenModal=document.querySelectorAll('[data-modal]')
if(buttonsOpenModal){buttonsOpenModal.forEach(element=>{element.addEventListener('click',()=>{const filterID='#'+element.dataset.modal+'Modal'
const filter=document.querySelector(filterID)
showModalFullscreen(filter)})})}
const modalFullscreenElements=document.querySelectorAll(`.${namesClass.modalFullscreen}`);modalFullscreenElements.forEach((modalFullscreenElement,key)=>{const closeButtons=modalFullscreenElement.querySelectorAll(`.${namesClass.closeButton}, #mobile-filter-find-text`);dataSet(modalFullscreenElement,key);closeButtons.forEach(closeButtons=>{dataSet(closeButtons,key);closeButtons.addEventListener("click",(e)=>{const dataModalFullscreen=e.currentTarget.getAttribute("data-tp-modal-fullscreen");const modalFullscreen=document.querySelector(`.${namesClass.modalFullscreen}[data-tp-modal-fullscreen="${dataModalFullscreen}"]`);hideModalFullscreen(modalFullscreen);});});});document.addEventListener('keydown',(e)=>{if(e.code==="Escape"){const lastActiveModalFullscreen=findActiveModalFullscreen();if(lastActiveModalFullscreen){hideModalFullscreen(lastActiveModalFullscreen);}}});function findActiveModalFullscreen(){const activeModalsFullscreen=document.querySelectorAll(`.${namesClass.modalFullscreenShow}`);return activeModalsFullscreen.length>0?activeModalsFullscreen[activeModalsFullscreen.length-1]:null;}
function showModalFullscreen(element){element.classList.add(namesClass.modalFullscreenShow);}
function dataSet(element,key){element.dataset.tpModalFullscreen=`tp-modal-fullscreen-${key}`;}
function hideModalFullscreen(element){element.classList.remove(namesClass.modalFullscreenShow);}}
if(/complete|interactive|loaded/.test(document.readyState)){initUIComponentModalFullscreen();}else{document.addEventListener('DOMContentLoaded',initUIComponentModalFullscreen,false);};;;;;;;;;;;const elementInViewport=(el)=>{let rect=el.getBoundingClientRect();return(rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth));};const onVisibilityChange=(el,callback)=>{if(elementInViewport(el)){el.dataset.visible=true;if(typeof callback=='function'){callback();}}};const sendTo=(event,version,data)=>{if(typeof window.ta==='function'){window.ta(event,version,data);}};const getPositionWidget=(type)=>{switch(type){case 'feed':return 'feedSidebar';case 'sidebar':return 'rightSidebar';case 'afterPost':return 'afterPost';}};(()=>{const click=EventJobsBannerStatistic?.event.click;const view=EventJobsBannerStatistic?.event.view;const eventWidget=document.querySelectorAll('[id^=right_event_job_widget]');window.addEventListener('scroll',(event)=>{eventWidget.forEach((widget)=>{const widgetItems=widget.querySelectorAll('.widget-list > a:not([data-visible="true"])');widgetItems.forEach((item)=>{onVisibilityChange(item,()=>{data={targetPostId:parseInt(item.dataset.postid),bannerPositionName:getPositionWidget(widget.dataset.widgetType),};if(window.getPostID()){data.fromPostId=window.getPostID();}
sendTo(view,1,data);});});});});eventWidget.forEach((widget)=>{const widgetItems=widget.querySelectorAll('.widget-list > a');widgetItems.forEach((item)=>{item.addEventListener('click',(event)=>{event.preventDefault();data={targetPostId:parseInt(item.dataset.postid),bannerPositionName:getPositionWidget(widget.dataset.widgetType),};if(window.getPostID()){data.fromPostId=window.getPostID();}
sendTo(click,1,data);document.location.href=item.href;});});});const widgetAdsInContent=document.querySelectorAll('.widget-in-text-ads');window.addEventListener('scroll',(event)=>{const widgetAdsInContent=document.querySelectorAll('.widget-in-text-ads:not([data-visible="true"]');widgetAdsInContent.forEach((item)=>{onVisibilityChange(item,()=>{sendTo(view,1,{fromPostId:window.getPostID(),targetPostId:parseInt(item.dataset.postid),bannerPositionName:'inContent',});});});});widgetAdsInContent.forEach((item)=>{item.addEventListener('click',(event)=>{event.preventDefault();sendTo(click,1,{fromPostId:window.getPostID(),targetPostId:parseInt(item.dataset.postid),bannerPositionName:'inContent',});document.location.href=item.querySelector('a').href;});});})();;document.addEventListener('DOMContentLoaded',()=>{window.isAnyPartOfElementInViewport=(elem)=>{const rect=elem.getBoundingClientRect()
const windowHeight=window.innerHeight||document.documentElement.clientHeight
const windowWidth=window.innerWidth||document.documentElement.clientWidth
const vertInView=rect.top<=windowHeight&&rect.top+rect.height>=0
const horInView=rect.left<=windowWidth&&rect.left+rect.width>=0
return vertInView&&horInView}
const divs=document.getElementsByClassName('cards-sidebar')
for(var i=0;i<divs.length;i++){divs[i].onclick=function(){document.getElementById('cards-anchor-'+this.dataset.index).scrollIntoView({block:'start',behavior:'smooth'})}}
const handleScrollChange=(scrollPosition)=>{let chapterIndex=null
executeIfElementsExists('.card-chapter',(elem)=>{if(!chapterIndex&&isAnyPartOfElementInViewport(elem)){chapterIndex=elem.id.replace('card-chapter-','')}})
executeIfElementsExists('.cards-sidebar',(elem)=>{if(elem.dataset.index===chapterIndex){if(!elem.classList.contains('cards-sidebar--active')){elem.classList.add('cards-sidebar--active')}}else{if(elem.classList.contains('cards-sidebar--active')){elem.classList.remove('cards-sidebar--active')}}})}
handleScrollChange(window.scrollY)
let lastKnownScrollPosition=0
let isTick=false
window.addEventListener('scroll',function(){lastKnownScrollPosition=window.scrollY
if(!isTick){window.requestAnimationFrame(function(){handleScrollChange(lastKnownScrollPosition)
isTick=false})
isTick=true}},)})